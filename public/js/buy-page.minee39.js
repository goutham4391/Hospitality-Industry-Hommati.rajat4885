var fixmeTop=0,headerHeight=0,loadPercent=0,main_sear_manully_is_place_selected="",main_sear_manully_address_change="";advance_address="",advance_state="",advance_county="",advance_search_city="",advance_zipcode="",advance_lat="",advance_long="",advance_price_from="",advance_price_to="",advance_beds="",advance_baths="",advance_sqft="",advance_sqft_man="",advance_sqft_man="",advance_garage="",advance_search_3d="",advance_select_aerial="",advance_national_radius="";var advance_search_address="";$(document).ready((function(){""!=$("#searched_address").val()&&(advance_search_address=$("#searched_address").val())})),$(document).ready((function(){$("#search_garage,#search_sqft,#search_beds,#search_national_radius").select2({tags:!0,dropdownAutoWidth:!0,width:"auto",createTag:function(a){return{id:a.term,text:a.term,newOption:!0}}})})),$(document).ready((function(){$("#modal-search_beds,#modal-search_baths,#modal-search_sqft,#modal-search_garage,#modal-search_national_radius").select2({tags:!0,createTag:function(a){return{id:a.term,text:a.term,newOption:!0}}})})),$(document).on("change","#search_min_price",(function(){if(1==word_checker($(this).val()))return $(this).val("").trigger("change"),showErrorToast("Enter Only Numeric Value."),!1;0!=parseInt($("#search_min_price").val())&&0!=parseInt($("#search_max_price").val())&&parseInt($("#search_min_price").val())>parseInt($("#search_max_price").val())&&(showErrorToast("Enter proper price for search."),$("#search_min_price").val("0").trigger("change")),selected_min_val=parseInt($("#search_min_price").val()),$("#search_max_price").select2("destroy"),$("#search_max_price").select2({tags:!0,createTag:function(a){return{id:a.term,text:a.term,newOption:!0}}}),$("#search_max_price option").filter((function(){return $(this).val()})).attr("disabled",!1),0!=parseInt($("#search_min_price").val())&&$("#search_max_price option").filter((function(){if(0!=$(this).val())return selected_min_val>=parseInt($(this).val())})).attr("disabled",!0)})),$(document).on("change","#search_max_price",(function(){if(1==word_checker($(this).val()))return $(this).val("").trigger("change"),showErrorToast("Enter Only Numeric Value."),!1;0!=parseInt($("#search_min_price").val())&&0!=parseInt($("#search_max_price").val())&&parseInt($("#search_max_price").val())<parseInt($("#search_min_price").val())&&(showErrorToast("Enter proper price for search."),$("#search_max_price").val("0").trigger("change")),selected_min_val=parseInt($("#search_max_price").val()),$("#search_min_price").select2("destroy"),$("#search_min_price").select2({tags:!0,createTag:function(a){return{id:a.term,text:a.term,newOption:!0}}}),$("#search_min_price option").filter((function(){return $(this).val()})).attr("disabled",!1),0!=parseInt($("#search_max_price").val())&&$("#search_min_price option").filter((function(){if(0!=$(this).val())return selected_min_val<=parseInt($(this).val())})).attr("disabled",!0)})),$(document).on("click","#clear_search_field",(function(){$("#db_advance_city").length?$("#db_advance_city").val(""):$("#advance_city").val(""),$("#filter_search_state").val(""),$("#filter_search_county").val(""),$("#filter_search_city").val(""),$("#filter_search_city_short").val(""),$("#filter_search_zipcode").val(""),$("#filter_search_lat").val(""),$("#filter_search_long").val(""),Isgooglesearch=!1,advance_search_address=""})),$(document).ready((function(){var a=document.getElementById("advance_city"),e=new google.maps.places.Autocomplete(a,{componentRestrictions:{country:"US"}});e.addListener("place_changed",(function(){customConsoleLog("place_change"),main_sear_manully_is_place_selected=!0,$("#filter_search_state").val(""),$("#filter_search_county").val(""),$("#filter_search_city").val(""),$("#filter_search_city_short").val(""),$("#filter_search_zipcode").val(""),$("#filter_search_lat").val(""),$("#filter_search_long").val("");var a=e.getPlace(),t=a.name,r="",s="",n="",c="",_="",i="",o="",l="",d="",h="",m={street_number:"short_name",route:"long_name",locality:"long_name",administrative_area_level_1:"short_name",administrative_area_level_2:"short_name",country:"long_name",postal_code:"short_name",neighborhood:"long_name"},v=!0;-1===a.formatted_address.indexOf("County")&&(v=!1);for(var u=0;u<a.address_components.length;u++){var p=a.address_components[u].types[0];if(m[p]){var f=a.address_components[u][m[p]];"neighborhood"==p&&(h=f.trim()),"locality"==p&&0==f.toLowerCase().indexOf(t.toLowerCase())&&(t=""),"country"==p&&0==f.toLowerCase().indexOf(t.toLowerCase())&&(t=""),"administrative_area_level_2"==p&&0==f.toLowerCase().indexOf(t.toLowerCase())&&(t=""),"street_number"==p&&(0==f.toLowerCase().indexOf(t.toLowerCase())&&(t=""),r+=s=f+" "),"route"==p&&(0==f.toLowerCase().indexOf(t.toLowerCase())&&(t=""),r+=n=f),"locality"==p&&($("#filter_search_city").val(f.trim()),$("#filter_search_city_short").val(a.address_components[u].short_name.trim()),l=f.trim(),d=a.address_components[u].short_name.trim()),"administrative_area_level_1"==p&&($("#filter_search_state").val(f.trim()),i=f.trim()),"postal_code"==p&&($("#filter_search_zipcode").val(f),o=f.trim()),"administrative_area_level_2"==p&&v&&""!=(_=f)&&(_=_.replace("County","").trim(),$("#filter_search_county").val(_.trim()))}}t&&(c=c.concat(t+" ")),s&&(c=c.concat(s)),p&&(c=c.concat(n)),$("#filter_search_lat").val(a.geometry.location.lat().toFixed(4)),$("#filter_search_long").val(a.geometry.location.lng().toFixed(4)),$("#advance_city").val(a.formatted_address),$("#advance_city").attr("title",a.formatted_address),advance_search_address=r,Isgooglesearch=!0;var g=customSearchParameters({neighborhood:h,city:l,state:i,county:_,zipcode:o,address:advance_search_address,cityShort:d});g.type&&(h=g.neighborhood.trim(),$("#filter_search_city").val(g.city),$("#filter_search_city_short").val(g.cityShort),l=check_city=g.city,d=g.cityShort,$("#filter_search_state").val(g.state),i=g.state,$("#filter_search_zipcode").val(g.zipcode),o=g.zipcode,$("#filter_search_county").val(g.county),check_county=g.county),resetFiltersWithoutMessage(),$("#advanced_serch_submit").trigger("click")})),$("#advance_city").change((function(){customConsoleLog("text change"),advance_search_address="",""==$(this).val()&&($("#filter_search_state").val(""),$("#filter_search_county").val(""),$("#filter_search_city").val(""),$("#filter_search_city_short").val(""),$("#filter_search_zipcode").val(""),$("#filter_search_lat").val(""),$("#filter_search_long").val(""),Isgooglesearch=!1,$("#search_national_radius").val(0).trigger("change")),0==main_sear_manully_is_place_selected&&get_data_from_address(main_sear_manully_address_change,(function(a){0==main_sear_manully_is_place_selected&&(1==a.status?($("#advance_city").val(a.address),$("#filter_search_state").val(a.state),$("#filter_search_county").val(a.county),$("#filter_search_city").val(a.city_name),$("#filter_search_city_short").val(a.city_name_short),$("#filter_search_zipcode").val(""),$("#filter_search_lat").val(a.lat),$("#filter_search_long").val(a.long),Isgooglesearch=!0,advance_search_address=a.address_data):($("#filter_search_state").val(""),$("#filter_search_county").val(""),$("#filter_search_city").val(""),$("#filter_search_city_short").val(""),$("#filter_search_zipcode").val(""),$("#filter_search_lat").val(""),$("#filter_search_long").val(""),advance_search_address="",Isgooglesearch=!1))}))})),$("#advance_city").keydown((function(a){main_sear_manully_address_change=$(".pac-container:visible .pac-item:first").text(),main_sear_manully_is_place_selected=!1,advance_search_address="",Isgooglesearch=!1}))})),$(document).on("change","#search_baths,#search_beds,#search_sqft,#search_garage",(function(){1==word_checker($(this).val())&&($(this).val("").trigger("change"),showErrorToast("Enter Only Numeric Value."))})),$(document).on("change","#modal-search_beds,#modal-search_baths,#modal-search_sqft,#modal-search_garage",(function(){1==word_checker($(this).val())&&($(this).val("").trigger("change"),showErrorToast("Enter Only Numeric Value."))})),$(document).on("change","#search_national_radius",(function(){1==word_checker($(this).val())&&($(this).val(0).trigger("change"),showErrorToast("Enter Only Numeric Value.")),lat=$("#filter_search_lat").val(),long=$("#filter_search_long").val()}));var i,infowindow,map="",idList=[],mapBound=null,markers=[],clustor_markers=[],markerBounds="",openedInfowindow=null,is_map=!0,markerCluster=null,map_called=0,show_console_log=!0,simultaneousMarkerCreationCount=500,markerAddSleepDuration=500,createdMarkersCount=0,markersCreationInterval=null,isPageLoaded=!1,listLoaded=!1,mapLoaded=!1,forcedSearch=!1,originalInfowindowAjaxCall=null,open_house=0,min_payment=0,max_payment=0,search_max_baths=0,min_lot_size=0,is_ter_search=0,agent_id=0,mapSearchAjax="",advance_search_type="",firstHomeSearch=!0,forcefulSearch=!1;function home_Map_init(){var a={zoom:4,center:new google.maps.LatLng(37.0902,-95.7129),mapTypeId:google.maps.MapTypeId.ROADMAP};map=new google.maps.Map(document.getElementById("home_properties_map"),a),infowindow=new google.maps.InfoWindow,markerBounds=new google.maps.LatLngBounds}function addMarkerToMap(a,e,t,r,s,n,c){randomPoint=new google.maps.LatLng(a,e);var _=new google.maps.Marker({position:randomPoint,title:s,icon:web_url+"public/images/hommati-icon.png"});c=c||"",markerBounds.extend(randomPoint);var i=new google.maps.InfoWindow({content:t,own_redirection:c,home_id:r});_.addListener("click",(function(){window.location.href=i.own_redirection})),markers.push(_),1==n?(clustor_markers.push(_),markerCluster&&markerCluster.addMarker(_,!0)):_.setMap(map),idList.push(parseInt(r)),_.addListener("mouseover",(function(){openedInfowindow&&openedInfowindow.close(),i.open(map,this),i.content||(originalInfowindowAjaxCall&&originalInfowindowAjaxCall.abort(),originalInfowindowAjaxCall=$.ajax({type:"POST",url:web_url+"ajax/get-property-infowindow-html",dataType:"json",data:{home_id:i.home_id},success:function(a){if(a.status){i.setContent(a.html);var e="#marker_img_"+i.home_id;$(e).length&&""==$(e).attr("src")&&$(e).attr("src",$(e).attr("data-img"))}else showErrorToast(a.message);originalInfowindowAjaxCall=null},error:function(a,e,t){e&&"abort"!=e&&showErrorToast("Something Went Wrong."),originalInfowindowAjaxCall=null}}));var a="#marker_img_"+i.home_id;$(a).length&&""==$(a).attr("src")&&$(a).attr("src",$(a).attr("data-img")),openedInfowindow=i})),_.addListener("mouseout",(function(){openedInfowindow&&openedInfowindow.close()}))}function set_cluster(){setTimeout((function(){markerCluster=new MarkerClusterer(map,clustor_markers,{imagePath:"https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m"})}),1e3)}function append_cluster(){setTimeout((function(){markerCluster=new MarkerClusterer(map,clustor_markers,{imagePath:"https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m"})}),2e3)}function searchNotCanceled(){$("#advanced_serch_submit").val("Search"),$("#advanced_serch_submit").removeClass("cancel")}function advance_search_result(a,e){if(!$("#advance_city").val()&&!agent_id&&!forcefulSearch)return searchNotCanceled(),$("#advanced_serch_submit").prop("disabled",!1),void showErrorToast("Please click on your desired search from the Google Suggestions dropdown.");firstHomeSearch=!1,$("#list_properties_listing").is(":visible")&&$("#list_properties_listing .container-fluid").showLoading(),0==map_called&&1==is_map&&$(".fullmap").showLoading(),0==map_called&&1==is_map&&properties_on_map_load(),isPageLoaded=!0,forcefulSearch=!1,""==advance_search_city&&""==advance_state&&""!=$("#db_advance_city").val()&&$("#db_advance_city").val()&&(string_searched=$("#db_advance_city").val()),mapSearchAjax=$.ajax({type:"POST",url:web_url+"ajax/map-search-result",dataType:"json",data:{state:advance_state,county:advance_county,zipcod:advance_zipcode,city:advance_search_city,search_type:advance_search_type,city_short:advance_search_city_short,lat:advance_lat,long:advance_long,price_from:advance_price_from,price_to:advance_price_to,beds:advance_beds,baths:advance_baths,sqft:advance_sqft,sqft_man:advance_sqft_man,garage:advance_garage,search_3d:advance_search_3d,select_aerial:advance_select_aerial,national_radius:advance_national_radius,page:a,is_map:is_map,usa_latitude:usa_latitude,usa_longitude:usa_longitude,advance_search_address:advance_search_address,payment_from:min_payment,payment_to:max_payment,max_baths:search_max_baths,min_lot_size:min_lot_size,is_ter_search:is_ter_search,agent_id:agent_id,open_house:open_house,string_searched:string_searched,days_on_hommati:$("#search_days_on_hommati").val(),days_on_hommati_start_date:$("#days_on_datefromfilter").val(),days_on_hommati_end_date:$("#days_on_datetofilter").val()},success:function(a){forcedSearch=!1,1==e&&(1==a.no_franchise_founded?($.alert({title:"No Franchise Found",content:noFranchiseFoundMessage}),$("#db_advance_city").length&&($("#db_advance_city").val(""),$("#db_advance_city").attr("title","")),$("#advance_city").val(""),$("#advance_city").attr("title",""),$("#filter_search_state").val(""),$("#filter_search_city").val(""),$("#filter_search_city_short").val(""),$("#filter_search_county").val(""),$("#filter_search_zipcode").val(""),$("#filter_search_lat").val(usa_latitude),$("#filter_search_long").val(usa_longitude),$("#search_open_house").val(open_house),$("#search_days_on_hommati").val(days_on_hommati),$("#days_on_datefromfilter").val(days_on_hommati_start_date),$("#days_on_datetofilter").val(days_on_hommati_end_date),advance_lat=usa_latitude,advance_long=usa_longitude,advance_national_radius=0,advance_search_address=""):0==a.no_franchise_founded&&0==a.home_list_count&&(is_ter_search||0==a.franchise_listing_count?$.confirm({title:'We\'re sorry, we do not currently have a franchisee serving that market so we do not have agents and/or listings available in that area.  For now, we will show you all the listings on a national basis.  If you are interested in possibly opening a franchise in this market, please click the link below to go to the franchise opportunity page. <br> <a href="https://www.hommati.com/top-franchise-opportunity">Top Franchise Opportunity</a> <br>Thank you.',content:"",buttons:{Ok:function(){$("#db_advance_city").length&&($("#db_advance_city").val(""),$("#db_advance_city").attr("title","")),$("#advance_city").val(""),$("#advance_city").attr("title",""),$("#filter_search_state").val(""),$("#filter_search_city").val(""),$("#filter_search_city_short").val(""),$("#filter_search_county").val(""),$("#filter_search_zipcode").val(""),$("#filter_search_agentid").val(""),$("#filter_search_lat").val(usa_latitude),$("#filter_search_long").val(usa_longitude),advance_lat=usa_latitude,advance_long=usa_longitude,advance_national_radius=0,advance_search_address="",showResetFilterMessage=!1,$("#reset_filters").trigger("click"),forcefulSearch=!0}}}):$.confirm({title:"Weâ€™re sorry we do not have any homes in that exact search so we are delivering all homes that are listed near your search.",content:"",buttons:{Ok:function(){is_ter_search=1,showResetFilterMessage=!1,$("#reset_filters").trigger("click"),forcefulSearch=!0,advance_search_result(1,1)}}}))),1==e&&(1!=a.reset_filtters||is_ter_search||($("#db_advance_city").length&&""==string_searched&&($("#db_advance_city").val(""),$("#db_advance_city").attr("title","")),$("#advance_city").val(""),$("#advance_city").attr("title",""),$("#filter_search_state").val(""),$("#filter_search_city").val(""),$("#filter_search_city_short").val(""),$("#filter_search_county").val(""),$("#filter_search_zipcode").val(""),$("#filter_search_lat").val(usa_latitude),$("#filter_search_long").val(usa_longitude),advance_lat=usa_latitude,advance_long=usa_longitude,advance_national_radius=0,advance_search_address="")),next_load=0,next_page=1,1==a.has_more_pages&&(next_load=1,next_page=a.next_page_number),$("#loadingaction").val(next_load),$("#seq").val(next_page),1==is_map?($(".properties-list-cl").html(""),$(".properties-list-cl").html(a.html),mapLoaded=!0):($(".list-cl").html(""),$(".list-cl").html(a.html),listLoaded=!0),$(".properties-list-cl").hideLoading(),$("#list_properties_listing .container").hideLoading(),searchNotCanceled(),$("#advanced_serch_submit").prop("disabled",!1),$("html, body").animate({scrollTop:0}),a.show_login_popup&&openLoginPopup((function(){$("#login_modal").modal("show")}))},error:function(a,e){forcedSearch=!1,"abort"!==e&&showErrorToast("Something Went Wrong."),$("#advanced_serch_submit").prop("disabled",!1),$(".properties-list-cl").hideLoading(),$("#list_properties_listing .container").hideLoading(),searchNotCanceled()}})}function refreshMap(){markers&&markerCluster&&($.each(markers,(function(a,e){e.setMap(null)})),markerCluster.removeMarkers(markers),markers=[],clustor_markers=[],idList=[]),markerBounds=new google.maps.LatLngBounds;new google.maps.InfoWindow}function clean_map(){markers&&markerCluster&&markerCluster.clearMarkers();new google.maps.InfoWindow}function updatePageParams(){var a="?",e=window.innerWidth&&window.innerWidth>767?0:1;advance_address=$("#db_advance_city").val(),searched_address=$("#searched_address").val(),advance_state=$("#filter_search_state").val(),advance_county=$("#filter_search_county").val(),advance_search_city=$("#filter_search_city").val(),advance_search_type=$("#filter_search_type").val(),advance_search_city_short=$("#filter_search_city_short").val(),advance_zipcode=$("#filter_search_zipcode").val(),advance_lat=$("#filter_search_lat").val(),advance_long=$("#filter_search_long").val(),advance_price_from=$("#search_min_price").val(),advance_price_to=$("#search_max_price").val(),min_payment=$("#search_min_payment").val(),max_payment=$("#search_max_payment").val(),agent_id=$("#filter_search_agentid").val(),open_house=$("#search_open_house").val(),db_search=$("#db_search").val(),string_searched="",string_searched=$("#string_searched").val(),days_on_hommati=$("#search_days_on_hommati").val(),days_on_hommati_start_date=$("#days_on_datefromfilter").val(),days_on_hommati_end_date=$("#days_on_datetofilter").val(),advance_beds=$("#search_beds").val(),advance_baths=$("#search_baths").val(),search_max_baths=$("#search_max_baths").val(),min_lot_size=$("#search_min_lot").val(),advance_sqft=$("#search_sqft").val(),advance_sqft_man=$("#search_sqft option:selected").attr("data-is_system"),"undefined"!=typeof advance_sqft_man?advance_sqft_man=0:advance_sqft_man=1,advance_garage=$("#search_garage").val(),advance_search_3d=$("#search_3d").val(),advance_select_aerial=$("#select_aerial").val(),advance_national_radius=$("#search_national_radius").val(),$(".properties-list-cl").animate({scrollTop:0},"500","swing"),0==is_map&&(a=a.concat("&list-view=true")),1==db_search?""!=$("#db_advance_city").val()&&(a=(a=a.concat("&address="+$("#db_advance_city").val())).concat("&address-title="+$("#db_advance_city").val())):""!=$("#advance_city").val()&&(a=(a=a.concat("&address="+$("#advance_city").val())).concat("&address-title="+$("#advance_city").attr("title"))),""!=$("#searched_address").val()&&(a=a.concat("&searched_address="+$("#searched_address").val())),""!=$("#filter_search_state").val()&&(a=a.concat("&state="+$("#filter_search_state").val())),""!=$("#filter_search_county").val()&&(a=a.concat("&county="+$("#filter_search_county").val())),""!=$("#filter_search_city").val()&&(a=a.concat("&city="+$("#filter_search_city").val())),""!=$("#filter_search_type").val()&&(a=a.concat("&search_type="+$("#filter_search_type").val())),""==$("#filter_search_city").val()&&""==$("#filter_search_state").val()&&(""!=$("#db_advance_city").val()?a=a.concat("&string_searched="+$("#db_advance_city").val()):""!=$("#string_searched").val()&&(a=a.concat("&string_searched="+$("#string_searched").val()))),""!=$("#filter_search_city_short").val()&&(a=a.concat("&city-short="+$("#filter_search_city_short").val())),""!=$("#filter_search_zipcode").val()&&(a=a.concat("&zipcode="+$("#filter_search_zipcode").val())),""!=$("#filter_search_lat").val()&&(a=a.concat("&latitude="+$("#filter_search_lat").val())),""!=$("#filter_search_long").val()&&(a=a.concat("&longitude="+$("#filter_search_long").val())),0!=$("#search_min_price").val()&&(a=a.concat("&min-price="+$("#search_min_price").val())),0!=$("#search_max_price").val()&&(a=a.concat("&max-price="+$("#search_max_price").val())),0!=$("#search_beds").val()&&(a=a.concat("&beds="+$("#search_beds").val())),0!=$("#search_baths").val()&&(a=a.concat("&baths="+$("#search_baths").val())),0!=$("#search_sqft").val()&&(a=a.concat("&sqft="+$("#search_sqft").val())),0!=$("#pageno").val()&&(a=a.concat("&page="+$("#pageno").val())),0!=$("#filter_search_agentid").val()&&(a=a.concat("&agent_id="+$("#filter_search_agentid").val())),e?(advance_sqft=$("#search_sqft").val(),advance_sqft_man=$("#search_sqft option:selected").attr("data-is_system"),a="undefined"!=typeof advance_sqft_man?a.concat("&sqft_type=0"):a.concat("&sqft_type=1")):(advance_sqft_man=$("#search_sqft option:selected").attr("data-is_system"),a="undefined"!=typeof advance_sqft_man?a.concat("&sqft_type=0"):a.concat("&sqft_type=1")),0!=$("#search_garage").val()&&(a=a.concat("&garage="+$("#search_garage").val())),0!=$("#search_3d").val()&&(a=a.concat("&3d="+$("#search_3d").val())),0!=$("#select_aerial").val()&&(a=a.concat("&aerial="+$("#select_aerial").val())),0!=$("#search_national_radius").val()&&(a=a.concat("&radius="+$("#search_national_radius").val())),search_max_baths&&(a=a.concat("&max-baths="+search_max_baths)),min_lot_size&&(a=a.concat("&min-lot="+min_lot_size)),min_payment&&(a=a.concat("&min-payment-price="+min_payment)),max_payment&&(a=a.concat("&max-payment-price="+max_payment)),1==open_house&&(a=a.concat("&open-house=1")),a=(a=(a=a.concat("&days-on-hommati="+$("#search_days_on_hommati").val())).concat("&days-on-hommati-start-date="+$("#days_on_datefromfilter").val())).concat("&days-on-hommati-to-date="+$("#days_on_datetofilter").val()),1==db_search&&(a=a.concat("&db_search=1")),processAjaxData("",a)}function processAjaxData(a,e){window.history.pushState({html:a.html,pageTitle:a.pageTitle},"",e)}function properties_on_map_load(){var a=$("#searched-home-list-ids").val();refreshMap(),$(".fullmap").showLoading(),show_console_log&&(customConsoleLog("markers fetch call started on "+$.now()),customConsoleLog($("#searched-home-list-ids"))),""==advance_search_city&&""==advance_state&&""!=$("#db_advance_city").val()&&$("#db_advance_city").val()&&(string_searched=$("#db_advance_city").val()),$.ajax({type:"POST",url:web_url+"ajax/map-search-markers",dataType:"json",data:{state:advance_state,county:advance_county,zipcod:advance_zipcode,city:advance_search_city,search_type:advance_search_type,city_short:advance_search_city_short,lat:advance_lat,long:advance_long,price_from:advance_price_from,price_to:advance_price_to,beds:advance_beds,baths:advance_baths,sqft:advance_sqft,sqft_man:advance_sqft_man,garage:advance_garage,search_3d:advance_search_3d,select_aerial:advance_select_aerial,national_radius:advance_national_radius,usa_latitude:usa_latitude,usa_longitude:usa_longitude,advance_search_address:advance_search_address,home_list_ids:a,payment_from:min_payment,payment_to:max_payment,max_baths:search_max_baths,min_lot_size:min_lot_size,is_ter_search:is_ter_search,string_searched:string_searched},success:function(a){show_console_log&&customConsoleLog("markers fetch call ended and marker creation began at "+$.now()),createdMarkersCount=0,markersCreationInterval&&(markersCreationInterval=null),$(".fullmap").hideLoading(),$(".map-loader-container").show();var e=$.now(),t=$.now();markersCreationInterval=setInterval((function(){var r=a.slice(createdMarkersCount,createdMarkersCount+simultaneousMarkerCreationCount);if(customConsoleLog("next bunch of "+createdMarkersCount+" "+(e-$.now())/1e3),e=$.now(),$.each(r,(function(a,e){addMarkerToMap(e.latitude,e.longitude,e.html,e.id,"",e.is_fea,e.add)})),createdMarkersCount||setTimeout((function(){map_called=1}),300),map.fitBounds(markerBounds),map.setCenter(markerBounds.getCenter()),$(".fullmap").hideLoading(),(createdMarkersCount+=r.length)==a.length){var s=$.now();$(".map-loader-container").hide(),clearInterval(markersCreationInterval),markersCreationInterval=null,customConsoleLog("End duration",(s-t)/1e3+" seconds"),map.fitBounds(markerBounds),map.setCenter(markerBounds.getCenter()),show_console_log&&customConsoleLog("markers creation ended on "+$.now()+" with markerBounds ",markerBounds," and center ",markerBounds.getCenter())}}),markerAddSleepDuration)},error:function(){showErrorToast("Something Went Wrong."),$(".fullmap").hideLoading()}})}function advance_save_search(){var a=$("#advance_city").val(),e=$("#filter_search_state").val(),t=$("#filter_search_county").val(),r=$("#filter_search_zipcode").val(),s=$("#filter_search_lat").val(),n=$("#filter_search_long").val(),c=$("#search_min_price").val(),_=$("#search_max_price").val(),i=$("#search_beds").val(),o=$("#search_baths").val(),l=$("#search_sqft").val(),d=$("#search_garage").val(),h=$("#search_3d").val(),m=$("#select_aerial").val(),v=$("#search_national_radius").val(),u=$("#search_min_payment").val(),p=$("#search_max_payment").val();""!=a||""!=c||""!=_||""!=i||""!=o||""!=l||""!=d||"0"!=h||"0"!=m||"0"!=v?$.ajax({type:"POST",url:web_url+"ajax/save-advance-search",dataType:"json",data:{advance_address:a,advance_state:e,advance_county:t,advance_zipcode:r,advance_lati:s,advance_longi:n,advance_min_price:c,advance_max_price:_,advance_search_beds:i,advance_search_baths:o,advance_search_sqft:l,advance_search_garage:d,advance_search_3d:h,advance_select_aerial:m,advance_search_national_radius:v,advance_min_payment:u,advance_max_payment:p},success:function(a){1==a.status?showSuccessToast(a.message):showErrorToast("Something went wrong.")},error:function(){showErrorToast("Something went wrong.")}}):showErrorToast("Please Select Something to save.")}function save_search_withoutlogin(){arr.advance_address=$("#advance_city").val(),arr.advance_state=$("#filter_search_state").val(),arr.advance_county=$("#filter_search_county").val(),arr.advance_zipcode=$("#filter_search_zipcode").val(),arr.advance_lati=$("#filter_search_lat").val(),arr.advance_longi=$("#filter_search_long").val(),arr.advance_min_price=$("#search_min_price").val(),arr.advance_max_price=$("#search_max_price").val(),arr.advance_min_payment=$("#search_min_payment").val(),arr.advance_max_payment=$("#search_max_payment").val(),arr.advance_search_beds=$("#search_beds").val(),arr.advance_search_baths=$("#search_baths").val(),arr.advance_search_sqft=$("#search_sqft").val(),arr.advance_search_garage=$("#search_garage").val(),arr.advance_search_3d=$("#search_3d").val(),arr.advance_select_aerial=$("#select_aerial").val(),arr["advance_search_national_radius\t"]=$("#search_national_radius").val(),openLoginPopup((function(){$("#login_modal").modal("show")}))}days_on_hommati=0,days_on_hommati_start_date="",days_on_hommati_end_date="",$(document).ready((function(){home_Map_init(),$(".map-search-filters-container").length&&(settingFiltersValueInTheMap=!0),"undefined"!=typeof MarkerClusterer&&set_cluster(),$(document).on("click",".search-pagination a",(function(a){a.preventDefault();var e=$(this).attr("href").split("page=")[1];$(".properties-list-cl").animate({scrollTop:0},"500","swing"),$("#pageno").val(e),updatePageParams(),advance_search_result(e,0)}))})),$(document).ready((function(){$("#search_garage,#search_sqft,#search_beds,#search_national_radius").select2({tags:!0,dropdownAutoWidth:!0,width:"auto",createTag:function(a){return{id:a.term,text:a.term,newOption:!0}}})})),$(document).on("mouseenter",".marker_home",(function(){if(1==map_called&&(idIndex=$.inArray(parseInt($(this).attr("data-id")),idList),-1!=idIndex)){google.maps.event.trigger(markers[idIndex],"mouseover");var a=markers[idIndex].getPosition();map.setCenter(a)}})),$(document).on("mouseover",".marker_home",(function(){if(1==map_called&&(idIndex=$.inArray(parseInt($(this).attr("data-id")),idList),-1!=idIndex)){google.maps.event.trigger(markers[idIndex],"mouseover");var a=markers[idIndex].getPosition();map.setCenter(a)}})),$(document).on("mouseout",".marker_home",(function(){1==map_called&&openedInfowindow&&openedInfowindow.close()})),$(document).on("click","#clear_search_field",(function(){$("#db_advance_city").length?$("#db_advance_city").val(""):$("#advance_city").val(""),$("#filter_search_state").val(""),$("#filter_search_county").val(""),$("#filter_search_city").val(""),$("#filter_search_city_short").val(""),$("#filter_search_zipcode").val(""),$("#filter_search_lat").val(""),$("#filter_search_long").val(""),Isgooglesearch=!1,advance_search_address=""})),$(document).on("click","#advanced_serch_submit",(function(){if(forcedSearch||(is_ter_search=0,mapLoaded=!1,listLoaded=!1),firstHomeSearch)$("#advanced_serch_submit").prop("disabled",!0);else{if($("#advanced_serch_submit").hasClass("cancel"))return $("#clear_search_field").click(),showResetFilterMessage&&(showResetFilterMessage=!1),$("#reset_filters").click(),$("#advanced_serch_submit").removeClass("cancel"),mapSearchAjax&&mapSearchAjax.abort(),updatePageParams(),!1;$("#advanced_serch_submit").addClass("cancel"),$("#advanced_serch_submit").val("Cancel")}updatePageParams(),map_called=0,"undefined"==typeof page&&(page=0),advance_search_result(page,1)})),$(document).on("change","#search_days_on_hommati",(function(){""!=$(this).val()&&2!=$(this).val()&&("undefined"==typeof page&&(page=0),updatePageParams(),advance_search_result(page,1))})),$(document).on("change","#days_on_datefromfilter",(function(){""!=$(this).val()&&""!=$("#days_on_datetofilter").val()&&$("#advanced_serch_submit").trigger("click"),$("#days_on_datetofilter").prop("min",$(this).val())})),$(document).on("change","#days_on_datetofilter",(function(){""==$("#days_on_datefromfilter").val()?(showErrorToast("Please Select From date first."),$(this).val("")):""!=$(this).val()&&""!=$("#days_on_datefromfilter").val()&&$("#advanced_serch_submit").trigger("click")})),$(document).on("change","#search_days_on_hommati",(function(){$("#search_days_on_hommati option").each((function(){$(this).hasClass("own_selected_val")&&($(this).is(":selected")||$(this).remove())}))})),$(document).on("change","#search_min_price",(function(){$("#search_min_price option").each((function(){$(this).hasClass("own_selected_val")&&($(this).is(":selected")||$(this).remove())}))})),$(document).on("change","#search_max_price",(function(){$("#search_max_price option").each((function(){$(this).hasClass("own_selected_val")&&($(this).is(":selected")||$(this).remove())}))})),$(document).on("change","#search_beds",(function(){$("#search_beds option").each((function(){$(this).hasClass("own_selected_val")&&($(this).is(":selected")||$(this).remove())}))})),$(document).on("change","#search_baths",(function(){$("#search_baths option").each((function(){$(this).hasClass("own_selected_val")&&($(this).is(":selected")||$(this).remove())}))})),$(document).on("change","#search_sqft",(function(){$("#search_sqft option").each((function(){$(this).hasClass("own_selected_val")&&($(this).is(":selected")||$(this).remove())}))})),$(document).on("change","#search_garage",(function(){$("#search_garage option").each((function(){$(this).hasClass("own_selected_val")&&($(this).is(":selected")||$(this).remove())}))})),$(document).on("change","#search_national_radius",(function(){$("#search_national_radius option").each((function(){$(this).hasClass("own_selected_val")&&($(this).is(":selected")||$(this).remove())}))})),$(document).on("click","#map_view_btn",(function(){$("#seq").val();$("#map_properties_listing").css("display","none"),$("#list_properties_listing").css("display","block"),$("body").addClass("scrollon"),$("body").removeClass("mapview"),is_map=!1,isPageLoaded&&listLoaded||(forcedSearch=!0,$("#advanced_serch_submit").trigger("click")),updatePageParams(),$("footer").css("display","block"),$(".main-footer").css("display","block"),$("#map_view_btn").hide(),$("#list_view_btn").show()})),$(document).on("click","#list_view_btn",(function(){$("#seq").val();setTimeout((function(){var a=map.getCenter();google.maps.event.trigger(map,"resize"),map.setCenter(a)}),250),$("#map_properties_listing").css("display","block"),$("#list_properties_listing").css("display","none"),$("body").removeClass("scrollon"),$("body").addClass("mapview"),is_map=!0,isPageLoaded&&mapLoaded||(forcedSearch=!0,$("#advanced_serch_submit").trigger("click")),updatePageParams(),map&&markerBounds&&(map.fitBounds(markerBounds),map.setCenter(markerBounds.getCenter())),$("footer").css("display","none"),$(".main-footer").css("display","none"),$("#map_view_btn").show(),$("#list_view_btn").hide()})),$(document).on("click",".home_single_page_link",(function(){localStorage.setItem("search_url",window.location.href);var a=$(this).attr("data-link");window.location.href=a}));
