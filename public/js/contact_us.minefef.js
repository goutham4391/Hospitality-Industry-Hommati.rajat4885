var agent_mls_id_required=!1,emain_2nd_required=!1;function submit_contactus(){$("#first_name_con_user_required").text("First Name is required."),$("#last_name_con_user_required").text("Last Name is required."),$("#email_con_user_required").text("Email is required."),$("#city_con_user_required").text("City is required."),$("#state_con_user_required").text("State is required."),$("#county_con_user_required").text("County is required."),$("#agent_mls_id_required").text("Agent MLS ID is required.");var e=!0;$(".user_required").each((function(t){var a=$(this).attr("name");""==$(this).val()?($("#"+a+"_user_required").css("display","block"),e=!1):$("#"+a+"_user_required").css("display","none")}));var t=$("#email_con").val();$("input[name=real_estate_agent]:checked").val()?($("#real_estate_agent_required").text("Please select option."),$("#real_estate_agent_required").hide()):(e=!1,$("#real_estate_agent_required").text("Please select option."),$("#real_estate_agent_required").show()),""!=t&&(/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(t)?$("#email_con_user_required").css("display","none"):($("#email_con_user_required").text("Email is not valid."),$("#email_con_user_required").css("display","block"),e=!1)),1==agent_mls_id_required&&""==$("#agent_mls_id").val().trim()&&(e=!1,$("#agent_mls_id_required").text("Agent MLS ID is required."),$("#agent_mls_id_required").show()),1==e&&check_email_exists(e)}function check_email_exists(e){var t=$("input[name=real_estate_agent]:checked").val(),a=$("#email_con").val(),n=$("#city_con").val(),s=$("#state_con").val(),i=$("#county_con").val(),o=$("#agent_mls_id").val();1==e&&""!=s&&""!=a&&($(".contactus_page").showLoading(),$.ajax({type:"post",url:web_url+"ajax/check-realestate-email",data:{real_estate_agent:t,email:a,city:n,state:s,county:i,agent_mls_id:o},dataType:"json",success:function(a){$("#fid").val(a.fid);var n=0;if(1!=a.email_exists&&1!=a.email_exists||(n=1),$("#user_exists").val(n),$(".contactus_page").hideLoading(),0!=a.email_exists||1!=t||1!=agent_mls_id_required&&1!=emain_2nd_required)if(0==a.email_exists&&1==t){$.confirm({title:"",content:"We're sorry the email address you provided does not appear to be in our system as a real estate agent who is enrolled in Hommati. Please either try a different email address or submit your Agent MLS ID.",buttons:{confirm:{text:"Different Email",action:function(){emain_2nd_required=!0,$("#agent_mls_id").hide(),$("#agent_mls_id").removeClass("user_required"),setTimeout((function(){$("html, body").animate({scrollTop:$("#last_name_con").offset().top},500),$("#email_con").focus()}),500),$("#email_con_user_required").text("Please try a different email address"),$("#email_con_user_required").css("display","block")}},cancel:{text:"Agent MLS ID",action:function(){agent_mls_id_required=!0,$("#agent_mls_id").addClass("user_required"),$(".agent_mls_id").css("display","block"),$("#agent_mls_id_required").text("Please enter Agent MLS ID"),$("#agent_mls_id_required").css("display","block"),setTimeout((function(){$("html, body").animate({scrollTop:$("#email_con").offset().top},500),$("#agent_mls_id").focus()}),500)}}}})}else(0==a.email_exists&&0==t||1==a.email_exists&&1==t||1==a.email_exists&&0==t)&&submit_form(e);else submit_form(e)},error:function(){$(".contactus_page").hideLoading(),showErrorToast("Something went wrong.")}}))}function submit_form(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return function(t){var a=$("#first_name_con").val(),n=$("#last_name_con").val(),s=$("#phone_con").val(),i=$("#email_con").val(),o=$("#city_con").val(),r=$("#state_con").val(),_=$("#county_con").val(),c=(t=$("#message_con").val(),$("#fid").val()),l=$("#agent_mls_id").val(),u=$("#user_exists").val(),d=$("input[name=real_estate_agent]:checked").val();1==e&&($(".contactus_page").showLoading(),$.ajax({type:"post",url:web_url+"ajax/add-contactus",data:{user_exists:u,fname:a,lname:n,phone:s,email:i,city:o,state:r,county:_,message:t,fid:c,agent_mls_id:l,real_estate_agent:d},dataType:"json",success:function(e){$(".contactus_page").hideLoading(),1==e.status?(showSuccessToast(e.message),$("#first_name_con").val(""),$("#last_name_con").val(""),$("#phone_con").val(""),$("#email_con").val(""),$("#city_con").val(""),$("#state_con").val(""),$("#county_con").val(""),$("#message_con").val(""),$("#fid").val(""),$("#agent_mls_id").val(""),$("#user_exists").val(0),setTimeout((function(){window.location.reload(!0)}),3e3)):showErrorToast(e.message)},error:function(){$(".contactus_page").hideLoading(),showErrorToast("Something went wrong.")}}))}(t)}$(document).ready((function(){$("body").on("click",(function(e){setTimeout((function(){localStorage.setItem("clickCount",0)}),500)})),$(".user_required").keyup((function(e){localStorage.setItem("clickCount",0)})),$((function(){document.getElementById("phone_con").addEventListener("input",(function(e){var t=e.target.value.replace(/\D/g,"").match(/(\d{0,3})(\d{0,3})(\d{0,4})/);e.target.value=t[2]?"("+t[1]+") "+t[2]+(t[3]?"-"+t[3]:""):t[1]}))})),$("#state_con,#county_con").select2(),$("#state_con").change((function(){""!=$("#state_con").val()?($(".contactus_page").showLoading(),$.ajax({url:web_url+"/ajax/county-find",type:"post",data:{state_id:$("#state_con").val()},dataType:"json",success:function(e){$(".contactus_page").hideLoading(),$("#county_con").html(e.county_options)},error:function(){$(".contactus_page").hideLoading(),showErrorToast("Something Went Wrong.")}})):$("#county_con").html('<option value="">County</option>')}))}));
