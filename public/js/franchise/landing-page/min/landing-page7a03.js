function _defineProperty(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function _createForOfIteratorHelper(e,a){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=_unsupportedIterableToArray(e))||a&&e&&"number"==typeof e.length){t&&(e=t);var o=0,n=function(){};return{s:n,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,i=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return s=e.done,e},e:function(e){i=!0,r=e},f:function(){try{s||null==t.return||t.return()}finally{if(i)throw r}}}}function _unsupportedIterableToArray(e,a){if(e){if("string"==typeof e)return _arrayLikeToArray(e,a);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(e,a):void 0}}function _arrayLikeToArray(e,a){(null==a||a>e.length)&&(a=e.length);for(var t=0,o=new Array(a);t<a;t++)o[t]=e[t];return o}var user_id=0,email_exists=!1,email_user=0,email_agentIDs=[],emailResp=[],serviceReqResp=[],statee="",new_fid="";function requestServiceForm(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";1==e?window.location.href=web_url+"/request-service":($("#request_service_modal").modal("show"),""!=a&&$("#request_package option[value="+a+"]").length>0?$("#request_package").val(a).trigger("change"):$("#request_package").val("").trigger("change"))}function closerequestServiceForm(){$("#request_service_modal").modal("hide"),$("#book_now_form")[0].reset()}function submitformRqservice(){var e=$("#book_now_form").serializeArray(),a=new FormData;$(e).each((function(e,t){a.append(t.name,t.value)})),a.append("fid",franchiseCode),a.append("fcode",franchiseCode),a.append("agent_fId",franchiseId),a.append("user_id",emailResp.user_id),a.append("type",emailResp.type),a.append("role",emailResp.role),a.append("new_fid",new_fid),a.append("state_id",$("#agent_state_id").val()),a.append("county_id",$("#agent_county_id").val());var t=!1;if($(".agent_state").is(":visible")&&($("#agent_state_id").val()||(t=!0)),$(".agent_county").is(":visible")&&($("#agent_county_id").val()||(t=!0)),1==t)return showErrorToast("Please Select State and County"),!1;$.ajax({type:$("#book_now_form").attr("method"),url:web_url+$("#book_now_form").attr("action"),data:a,cache:!1,processData:!1,contentType:!1,beforeSend:function(){$("#request_service_modal").showLoading()},success:function(e){$("#request_service_modal").hideLoading(),serviceReqResp=e,e.status?(statee=$("#state").val().toUpperCase(),user_id=e.user_id,$("#book_now_form")[0].reset(),$("#addAgent")[0].reset(),enrollAgent()):showErrorToast(e.message)},error:function(e){showErrorToast("Something went wrong"),$("#request_service_modal").hideLoading()}})}function submitagentIDandPass(){var e=$("#addAgent").serializeArray(),a=new FormData;$(e).each((function(e,t){a.append(t.name,t.value)})),a.append("user_id",serviceReqResp.user_id),a.append("state_id",serviceReqResp.state_id),a.append("agent_type_old",serviceReqResp.agent_type_old),a.append("state",serviceReqResp.state.id),a.append("uid",serviceReqResp.uid),$.ajax({type:$("#addAgent").attr("method"),url:web_url+$("#addAgent").attr("action"),data:a,cache:!1,processData:!1,contentType:!1,beforeSend:function(){$("#enroll-agent-modal").showLoading()},success:function(e){$("#enroll-agent-modal").hideLoading(),$("#addAgent")[0].reset(),e.status?showSuccessToast(e.message,!1):showErrorToast(e.message,!0),setTimeout((function(){window.location.reload()}),3e3)},error:function(e){showErrorToast("Something went wrong",!0),$("#enroll-agent-modal").hideLoading()}})}function enrollAgent(e){$("#request_service_modal").modal("hide"),$("#enroll-agent-modal").modal("show")}function download_price_list(){$("#download_price_list_modal").modal("show"),$("#download_price_list_modal").modal({backdrop:"static",keyboard:!1})}function second_download_price_list_modal(){var e=$("#price_request_email").val(),a=new FormData;return a.append("request_email_id",e),a.append("fid_id",franchiseId),""==e||0==IsEmail(e)?(showErrorToast("Please Enter Email Address!"),$("#price_request_email").focus(),!1):void $.ajax({type:"POST",url:web_url+"ajax/save-price-list-email",data:a,cache:!1,processData:!1,contentType:!1,beforeSend:function(){$("#price_request_email").showLoading()},success:function(e){$("#price_request_email").hideLoading(),202==e.code?($("#price_request_email").val(""),$("#download_price_list_modal").modal("hide"),showpricepdfdata(),showSuccessToast(e.message,!1)):e.status?($("#request_user_id").val(0),e.data?$("#request_user_id").val(e.data.id):$("#request_lead_users_id").val(e.lead_users.id),$("#franchise_lead_id").val(e.f_data.id),$("#price_request_email").val(""),$("#download_price_list_modal").modal("hide"),$("#second_download_price_list_modal").modal("show"),$("#second_download_price_list_modal").modal({backdrop:"static",keyboard:!1}),showSuccessToast(e.message,!1)):showErrorToast(e.message)},error:function(e){showErrorToast("Something went wrong"),$("#price_request_email").hideLoading()}})}function download_price_list_userLogged_in(){var e=new FormData;e.append("fid_id",franchiseId),$.ajax({type:"POST",url:web_url+"ajax/save-price-list-user-logged-in",data:e,cache:!1,processData:!1,contentType:!1,beforeSend:function(){$("#request_service_modal").showLoading()},success:function(e){$("#request_service_modal").hideLoading(),e.status?showpricepdfdata():showErrorToast(e.message)},error:function(e){showErrorToast("Something went wrong"),$("#request_service_modal").hideLoading()}})}function show_price_list_data(){var e=$("#request_first_name").val(),a=$("#request_last_name").val(),t=$("#request_phone_number").val(),o=$("#request_agent_mls_id").val(),n=$("#request_user_id").val(),r=$("#request_lead_users_id").val(),s=$("#franchise_lead_id").val();if(""==s)return showErrorToast("Franchise Id is required"),!1;if(""==n)return showErrorToast("User Id is required"),!1;if(""==e)return showErrorToast("Please Enter First Name!"),$("#request_first_name").focus(),!1;if(""==a)return showErrorToast("Please Enter Last Name!"),$("#request_last_name").focus(),!1;if(""==t)return showErrorToast("Please Enter Phone Number!"),$("#request_phone_number").focus(),!1;if(10!=t.replace(/\D/g,"").length)return showErrorToast("Please Enter Correct Phone Number!"),$("#request_phone_number").focus(),!1;if(""==o)return showErrorToast("Please Enter MLS ID!"),$("#request_agent_mls_id").focus(),!1;var i=new FormData;i.append("request_first_name",e),i.append("request_last_name",a),i.append("request_phone_number",t),i.append("request_agent_mls_id",o),i.append("request_user_id",n),i.append("franchise_lead_id",s),i.append("request_lead_users_id",r),i.append("franchise_id",franchiseId),$.ajax({type:"POST",url:web_url+"ajax/save-price-list-user-data",data:i,cache:!1,processData:!1,contentType:!1,beforeSend:function(){$("#second_download_price_list_modal_loader").showLoading()},success:function(e){$("#second_download_price_list_modal_loader").hideLoading(),e.status?($("#request_first_name").val(""),$("#request_last_name").val(""),$("#request_phone_number").val(""),$("#request_agent_mls_id").val(""),$("#request_user_id").val(""),showpricepdfdata(),$("#Second_download_price_list_modal").modal("hide")):showErrorToast(e.message)},error:function(e){showErrorToast("Something went wrong"),$("#second_download_price_list_modal_loader").hideLoading()}})}function showpricepdfdata(){var e=web_url+"download-pricesheet/"+franchiseCode+".pdf";window.open(e,"_blank")}function IsEmail(e){return!!/^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(e)}$(document).ready((function(){$("#requested_date").datepicker({dateFormat:"dd-mm-yy",changeYear:!0,changeMonth:!0,startDate:"+3d"}),$("#agent_state_id").select2({dropdownParent:$("#request_service_modal")}),$("#agent_county_id").select2({dropdownParent:$("#request_service_modal")}),$("#request_package").select2({dropdownParent:$("#request_service_modal")}),$("body").on("change","#agent_state_id",(function(){$(".agent_state").is(":visible")&&(""!=$("#agent_state_id").val()?($(".agent_county").showLoading(),$.ajax({url:web_url+"ajax/county-find",type:"post",cache:!1,data:{state_id:$("#agent_state_id").val()},dataType:"json",success:function(e){$(".agent_county").hideLoading(),$("#agent_county_id").html(e.county_options),$("#agent_county_id").select2({dropdownParent:$("#request_service_modal")})},error:function(){$(".agent_county").hideLoading(),showErrorToast("Something Went Wrong.")}})):$("#agent_county_id").html('<option value="">County</option>'))})),$("body").on("change","#agent_county_id",(function(){$(".agent_county").is(":visible")&&(""!=$("#agent_county_id").val()?($(".agent_county").showLoading(),$.ajax({url:web_url+"ajax/checkfranchiseterretories",type:"post",cache:!1,data:{state_id:$("#agent_state_id").val(),county_id:$("#agent_county_id").val(),fid:franchiseId},dataType:"json",success:function(e){$(".agent_county").hideLoading(),new_fid=e.status?"":e.new_fid},error:function(){$(".agent_county").hideLoading(),showErrorToast("Something Went Wrong.")}})):showErrorToast("Please select county"))}))})),$((function(){$("#phone").length&&document.getElementById("phone").addEventListener("input",(function(e){var a=e.target.value.replace(/\D/g,"").match(/(\d{0,3})(\d{0,3})(\d{0,4})/);e.target.value=a[2]?"("+a[1]+") "+a[2]+(a[3]?"-"+a[3]:""):a[1]})),$("#request_phone_number").length&&document.getElementById("request_phone_number").addEventListener("input",(function(e){var a=e.target.value.replace(/\D/g,"").match(/(\d{0,3})(\d{0,3})(\d{0,4})/);e.target.value=a[2]?"("+a[1]+") "+a[2]+(a[3]?"-"+a[3]:""):a[1]}))})),$("#request_service_modal").on("hidden.bs.modal",(function(e){$("#book_now_form")[0].reset()})),$("#email").change((function(){var e=$(this).val();email_exists=!1,email_user=0,$.ajax({url:web_url+"ajax/check-email-agentid",type:"post",cache:!1,data:{"user-email":e.trim()},dataType:"json",beforeSend:function(){$("#email").showLoading()},success:function(e){$("#email").hideLoading(),1==e.success?(email_exists=!0,email_user=e.user_id,email_agentIDs=e.agent_ids,$("#agent_state_id").val("").select2(),$("#agent_county_id").val("").select2(),$(".agent_state").hide(),$(".agent_county").hide()):e.is_assistant?($("#email").val(""),showErrorToast("This email has been taken as Assistant.")):($(".agent_state").show(),$(".agent_county").show(),email_exists=!1,email_user=e.user_id,email_agentIDs=e.agent_ids),emailResp=e},error:function(){showErrorToast("Something Went Wrong.")}})})),$("#book_now_form").validate({debug:!0,rules:{city:"required",state:{required:!0,minlength:2,maxlength:2},zipcode:"required",email:{email:!0,required:!0},listing_address:"required",fname:"required",lname:"required",phone:"required"},messages:{mls_id:"Please select MLS number",listing_address:"Please enter address",city:"Please enter city",state:{required:"Please enter your state",maxlength:"Please enter state abbreviation"},zipcode:"Please enter zipcode of home",new_address_text:"Please enter address"},submitHandler:function(e){var a=$("#book_now_form").serializeArray(),t=new FormData;$(a).each((function(e,a){t.append(a.name,a.value)})),t.append("fid",franchiseCode);var o,n=1,r=_createForOfIteratorHelper(t.entries());try{for(r.s();!(o=r.n()).done;)o.value}catch(e){r.e(e)}finally{r.f()}1==n&&(""==$("#request_package").val()&&(n=0,showErrorToast("Please select at least one request.")));if(1!=n)return!1;0==emailResp.type||1==emailResp.type||4==emailResp.type||3==emailResp.type?($(".password").hide(),$(".password #password").val("000000"),$(".password #password_confirm").val("000000"),$("#enroll-agent-modal .modal-title").html("To Complete Your Request, Please Confirm Your MLS Agent ID")):($(".password").show(),$(".password #password").val(""),$(".password #password_confirm").val(""),$(".radiochoosebox").addClass("radiochooseboxcls"),$("#mls_id").val(""),$(".mlsbox").show(),$("#enroll-agent-modal .modal-title").html("Your Request Has Been Sent. Please Add a Password And Your MLS Agent ID To Finish.")),franchiseId==emailResp.fid||0==emailResp.fid?submitformRqservice():emailResp.fcode?(showErrorToast("You are registered with franchise "+emailResp.fcode+". Please wait while we are redirecting you."),setTimeout((function(){window.location.href=web_url+"office/"+emailResp.fcode}),2e3)):submitformRqservice()}}),$("#addAgent").validate({rules:{mls_id:"required",password:{required:!0,minlength:6},password_confirm:{required:!0,minlength:6,equalTo:"#password"}},messages:{mls_id:"Please select MLS number"},submitHandler:function(e){var a=$("#mls_id").val(),t=a+"-"+statee,o=!1;if($(".radiochoosebox").hasClass("radiochooseboxcls")){$(".dynamicradios").remove();for(var n=0;n<email_agentIDs.length;n++){var r=email_agentIDs[n];$(".radiochooseboxinner").append('<div class="dynamicradios"><input type="radio" id="new_check_'+n+'" value="'+r+'" class="mls_check" name="mls_check"><label class="new_check_inn" for="new_check_'+n+'"><span></span>'+r+"</label></div>"),r!=a&&t!=r||!1!==o||(o=!0)}!1===o&&email_agentIDs.length>0?(showErrorToast("The agent ID you entered is different than what is currently in our database. Please select the correct Agent ID that you use in your MLS.  If the ID that is in our database is correct, but you have multiple ID's due to using multiple MLS's, please use the existing ID in our database and you can add the second one later"),$(".radiochoosebox").removeClass("radiochooseboxcls"),$(".mlsbox").hide()):($(".mlsbox").show(),$(".radiochoosebox").addClass("radiochooseboxcls"),submitagentIDandPass())}else $(".mls_check:checked").length?submitagentIDandPass():showErrorToast("Please select the correct Agent ID that you use in your MLS.")}});var gift_apply=!1,type=0,is_price_sheet_request=0,email_valid=!0;function agent_show_loading(){$(".agent_block").showLoading()}function agent_hide_loading(){$(".agent_block").hideLoading()}function RestrictSpace(){if(32==event.keyCode)return!1}function change_state_county(){$("#agent_state").val(""),$("#agent_state").select2(),$("#agent_county").val(""),$("#agent_county").select2(),$("#select_franchise").modal("hide")}function checkAgentEmail(){$("#agent_email-required").css("display","none"),$("#agent_county_conf_pass-required").css("display","none"),$("#agent_email").showLoading(),$("#agent_enrollment_submit_btn").attr("disabled",!1),$.ajax({url:web_url+"ajax/check-email-enrollment",type:"post",async:!1,cache:!1,data:{email:$("#agent_email").val(),zipcode:"38001"},dataType:"json",success:function(e){$("#agent_email").hideLoading(),1==e.status?0==e.user_exist?($("#reg_confirm_password_tx").css("display","block"),$(".confirm-pass-btn").css("display",""),$("#agent_county_conf_pass").css("display","block"),$("#agent_county_new_pass").attr("placeholder","Create Password"),$(".password_block").addClass("first-name-box")):2!=e.utype&&0!=e.utype&&($("#reg_confirm_password_tx").css("display","none"),$(".confirm-pass-btn").css("display","none"),$("#agent_county_conf_pass").css("display","none"),$("#agent_county_new_pass").attr("placeholder","Current Password"),$(".password_block").removeClass("first-name-box"),$("#agent_county_conf_pass,#agent_county_new_pass").val("")):(e.remove_email&&$("#agent_email").val(""),1==e.is_fb?(showErrorToast("Facebook users are not able to enroll as an Agent."),$("#agent_enrollment_submit_btn").attr("disabled",!0)):(showErrorToast(e.message),email_valid=!1))},error:function(){$("#agent_email").hideLoading(),showErrorToast("Something Went Wrong.")}})}function submit_agent_details(){$("#agent_role-required").text("Role is required."),$("#agent_first_name-required").text("First Name is required."),$("#agent_last_name-required").text("Last Name is required."),$("#agent_phone_number-required").text("Phone Number is required."),$("#agent_email-required").text("Email is required."),$("#agent_state-required").text("State is required."),$("#agent_county-required").text("County is required."),$("#agent_county_new_pass-required").text("New Password is required."),$("#agent_franchise_code-required").text("Franchise Code is required."),$("#agent_county_conf_pass-required").text("Confirm Password is required."),$("#agent_county_old_password-required").text("Password is required."),$("#agent_agent_id-required").text("Agent ID is required.");var e=!0;$(".agent_required").each((function(a){var t=$(this).attr("name");$("#"+t).is(":visible")&&(""==$(this).val()?($("#"+t+"-required").css("display","block"),e=!1):$("#"+t+"-required").css("display","none"))}));var a=$("#agent_email").val(),t=/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/;if(t.test(a)||""==a||($("#agent_email-required").text("Email is not valid."),$("#agent_email-required").css("display","block"),e=!1),!t.test(a)||""==a||(checkAgentEmail(),email_valid)){$("#agent_county_new_pass").is(":visible")&&""!=$("#agent_county_conf_pass").val()&&""!=$("#agent_county_new_pass").val()&&$("#agent_county_conf_pass").val()!=$("#agent_county_new_pass").val()&&($("#agent_county_conf_pass-required").text("Password and Confirm password must be same."),$("#agent_county_conf_pass-required").css("display","block"),e=!1);var o="";if($("#agent_county_new_pass").is(":visible")&&(o=$("#agent_franchise_code").val()),$("#termcond").is(":checked")?$("#termcondreq").css("display","none"):($("#termcondreq").css("display","block"),e=!1),logged_in_user_id)showSuccessToast("You are already logged in, so you can not enroll as agent.");else if(google_lead_val=1==gift_apply?2:1,1==e&&($("#agent_enrollment_submit_btn").attr("disabled",!0),$.ajax({url:web_url+"ajax/agent-id-check",type:"post",async:!1,cache:!1,data:{agent_id:$("#agent_agent_id").val(),user_id:logged_in_user_id,agent_state:$("#agent_state option:selected").text()},dataType:"json",success:function(a){1==a.status||(e=!1,$("#agent_enrollment_submit_btn").attr("disabled",!1),showErrorToast(a.message))},error:function(){showErrorToast("Something Went Wrong."),$("#agent_enrollment_submit_btn").attr("disabled",!1)}})),1==e){var n;agent_show_loading(),$.ajax({url:web_url+"ajax/agent-add-landing",type:"post",cache:!1,data:(n={agent_role:$("#agent_role").val(),agent_email:$("#agent_email").val(),agent_first_name:$("#agent_first_name").val(),agent_last_name:$("#agent_last_name").val(),agent_phone_number:$("#agent_phone_number").val()},_defineProperty(n,"agent_email",$("#agent_email").val()),_defineProperty(n,"agent_state",$("#agent_state").val()),_defineProperty(n,"agent_county",$("#agent_county").val()),_defineProperty(n,"agent_county_new_pass",$("#agent_county_new_pass").val()),_defineProperty(n,"agent_is_logged_in_data",$("#agent_is_logged_in_data").val()),_defineProperty(n,"agent_county_old_password",$("#agent_county_old_password").val()),_defineProperty(n,"agent_agent_id",$("#agent_agent_id").val()),_defineProperty(n,"type",type),_defineProperty(n,"franchise_code",o),_defineProperty(n,"is_price_sheet_request",is_price_sheet_request),_defineProperty(n,"is_charter_agent",!1),_defineProperty(n,"agent_state_text",$("#agent_state option:selected").text()),_defineProperty(n,"from_office",1),_defineProperty(n,"google_lead",google_lead_val),n),dataType:"json",success:function(e){if(1==e.status)showSuccessToast(e.message),setTimeout((function(){1==$("#secondenrollmodal").attr("data-type")&&window.location.replace(web_url+"enroll-complete"),2==$("#secondenrollmodal").attr("data-type")&&window.location.replace(web_url+"enroll-featured")}),1500);else{if(0==e.allow_enroll&&"1"==e.another_franchise){var a=e.available_franchise,t=window.location.origin+"/office/"+a[0]+"?reference="+!0;$(".refer-below-btn").attr("href",t),$("#select_franchise").modal("show")}else showErrorToast(e.message);$("#agent_enrollment_submit_btn").attr("disabled",!1)}agent_hide_loading()},error:function(){agent_hide_loading(),showErrorToast("Something Went Wrong.")}})}}}$(document).ready((function(){$("#agent_state").select2({dropdownParent:$("#secondenrollmodal")}),$("#agent_county").select2({dropdownParent:$("#secondenrollmodal")}),$(document).on("keypress","#agent_agent_id",(function(e){var a=e.which?e.which:addEventListenerent.keyCode;return a>64&&a<91||a>96&&a<123||a>47&&a<58||127==a||8==a||32==a||95==a||45==a||(e.preventDefault(),!1)})),$("#agent_state").change((function(){""!=$("#agent_state").val()?(agent_show_loading(),$.ajax({url:web_url+"ajax/county-find",type:"post",cache:!1,data:{state_id:$("#agent_state").val()},dataType:"json",success:function(e){agent_hide_loading(),$("#agent_county").html(e.county_options)},error:function(){agent_hide_loading(),showErrorToast("Something Went Wrong.")}})):$("#agent_county").html('<option value="">County</option>')})),$(".agent_required").keyup((function(e){13==e.keyCode&&submit_agent_details()})),""!=$("#agent_email").val()&&$("#agent_email").trigger("change"),$("#agent_phone_number").length&&document.getElementById("agent_phone_number").addEventListener("input",(function(e){var a=e.target.value.replace(/\D/g,"").match(/(\d{0,3})(\d{0,3})(\d{0,4})/);e.target.value=a[2]?"("+a[1]+") "+a[2]+(a[3]?"-"+a[3]:""):a[1]})),$("#agent_franchise_code").length&&document.getElementById("agent_franchise_code").addEventListener("input",(function(e){var a=e.target.value.replace(/\D/g,"").match(/(\d{0,3})(\d{0,3})(\d{0,4})/);e.target.value=a[2]?""+a[1]+a[2]+(a[3]?""+a[3]:""):a[1]}))}));var tourData=[],showFirst=!1,floor=0,zoomFloorPlan=!1;function showTour(e,a){if(tourData){showFirst=!0,floor=tourData[0].floor,a&&(floor=a);var t="";e&&(t=e),appendViewImages(floor,t);for(var o=0;o<tourData.length;o++){var n=$("#floor_detail").html();n=n.replace(/{floor}/g,tourData[o].floor);var r="Floor "+tourData[o].floor;tourData[o].title&&(r=tourData[o].title),n=n.replace(/{title}/g,r),$(".floors").append(n),tourData[o].floor==floor&&$("#floor_"+tourData[o].floor).addClass("active")}dragElement(document.getElementById("main_view"))}}function appendViewImages(e,a){if(tourData)for(var t=0;t<tourData.length;t++)if(tourData[t].floor==e){var o=tourData[t].images[0].image,n=tourData[t].floorplan_crop;$(".floor-image").on("load",(function(){})).attr("src",n);for(var r=0;r<tourData[t].images.length;r++)if(tourData[t].images[r]){var s=document.createElement("img");zoomFloorPlan?(s.style.height="30px",s.style.width="30px"):(s.style.height="17px",s.style.width="17px"),s.style.position="absolute",showFirst?a?a==tourData[t].images[r].id?(s.src=$("#activeimage").val(),s.className="viewimage active",o=tourData[t].images[r].image,showFirst=!1):(s.src=$("#dragimage").val(),s.className="viewimage"):(s.src=$("#activeimage").val(),s.className="viewimage active",showFirst=!1):(s.src=$("#dragimage").val(),s.className="viewimage"),s.dataset.img_id=tourData[t].images[r].image,s.style.top=tourData[t].images[r].top+"%",s.onerror=web_url+"public/imagenotavailable.png",s.style.left=tourData[t].images[r].left+"%",$("#main_view").append(s)}$(".main-image").attr("src",o);break}}function createViewImage(e,a){var t=document.createElement("img");return t.style.height="17px",t.style.width="17px",t.style.position="absolute",t.src=a,t.dataset.img_id=e,t.className="viewimage",t.id="viewimage_"+e,t}function dragElement(e){var a=0,t=0,o=0,n=0,r=Math.max(document.getElementById("guidedtour").clientWidth||0),s=(Math.max(document.getElementById("guidedtour").clientHeight||0),$("#guidedtour").scrollTop(),document.getElementById("main_view").clientWidth);document.getElementById("main_view").clientHeight;function i(i){if((i=i||window.event).preventDefault(),!zoomFloorPlan){p={top:i.clientY,left:i.clientX};var l=$("#guidedtour").position();if(p.top<=l.top||p.left<=l.left)return;var d=$("#main_view").position(),c=p.left+s-45;d.top;if(c>r)return;a=o-i.clientX,t=n-i.clientY,o=i.clientX,n=i.clientY,e.style.top=e.offsetTop-t+"px",e.style.left=e.offsetLeft-a+"px"}}function l(){document.onmouseup=null,document.onmousemove=null}document.getElementById("move_floor_plan")&&(document.getElementById("move_floor_plan").onmousedown=function(e){(e=e||window.event).preventDefault(),o=e.clientX,n=e.clientY,document.onmouseup=l,document.onmousemove=i})}$(".show-guided-tour").on("click",(function(){$(".guided-tour-main").showLoading(),$.ajax({type:"GET",url:web_url+"ajax/guided-tour/tour/611685",success:function(e){e.status?e.tour_data&&(tourData=e.tour_data,e.default_image&&e.default_floor?showTour(e.default_image,e.default_floor):showTour()):e.message?showErrorToast(e.message):showErrorToast("Something went wrong."),$(".guided-tour-main").hideLoading()},error:function(){$(".guided-tour-main").hideLoading(),showErrorToast("Something went wrong.")}})})),$(document).on("click",".viewimage",(function(){var e=$(this).data("img_id");$(".viewimage.active").attr("src",$("#dragimage").val()),$("#main_view .viewimage").removeClass("active"),$(this).addClass("active").attr("src",$("#activeimage").val()),$(".main-image").on("load",(function(){})).attr("src",e)})),$(document).on("click",".show-floors",(function(){$(".floors").slideToggle("slow")})),$(document).on("click",".floor-change",(function(){var e=$(this).data("floor");e!=floor&&(floor=e,showFirst=!0,$("#main_view .viewimage").remove(),appendViewImages(floor),$(".floors .floor").removeClass("active"),$(this).parent().addClass("active"))})),$(document).on("click",".close-floor-plan",(function(){$("#main_view").hide(),$("#image_view").show()})),$(document).on("click","#image_view",(function(){$("#main_view").show(),$("#image_view").hide()})),$(document).on("click",".zoom-floor-plan",(function(){$("#main_view").hasClass("zoomed-floor-plan")?($("#main_view").removeClass("zoomed-floor-plan"),$(".guided-tour-main").removeClass("main-zoom"),$(".viewimage").css("height","17px"),$(".viewimage").css("width","17px"),zoomFloorPlan=!1,$("#zoom_in_floor").show(),$("#zoom_out_floor").hide()):($(".viewimage").css("height","30px"),$(".viewimage").css("width","30px"),$("#main_view").addClass("zoomed-floor-plan"),$(".guided-tour-main").addClass("main-zoom"),zoomFloorPlan=!0,$("#zoom_in_floor").hide(),$("#zoom_out_floor").show())}));var previousX,previousY,clicking=!1;$(document).on("mousedown","#floor_plan_image_div",(function(e){e.preventDefault(),previousX=e.clientX,previousY=e.clientY,clicking=!0,$(this).addClass("grab")})),$(document).on("mouseup","#floor_plan_image_div",(function(e){clicking=!1,$(this).removeClass("grab")})),$(document).on("mouseleave","#floor_plan_image_div",(function(e){clicking=!1,$(this).removeClass("grab")})),$(document).on("mousemove","#floor_plan_image_div",(function(e){if(clicking){e.preventDefault();e.clientX,e.clientY;$("#floor_plan_image_div").scrollLeft($("#floor_plan_image_div").scrollLeft()+(previousX-e.clientX)),$("#floor_plan_image_div").scrollTop($("#floor_plan_image_div").scrollTop()+(previousY-e.clientY)),previousX=e.clientX,previousY=e.clientY}})),$(document).on("click",".zoom-in",(function(){if($("#second_floor_plan_image").is(":visible"))var e=$("#second_floor_plan_image");else e=$("#floor_plan_image");e.width()<4e3&&e.width(e.width()+300)})),$(document).on("click",".zoom-out",(function(){if($("#second_floor_plan_image").is(":visible"))var e=$("#second_floor_plan_image");else e=$("#floor_plan_image");e.width()>200&&e.width(e.width()-300)}));
