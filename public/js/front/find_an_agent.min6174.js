var sell_search_manully_is_place_selected=!1,sell_search_manully_address_change="",find_agent_searched_address="",getted_data={};function googleInitializeFunction(){customConsoleLog("calling the googleInitializeFunction"),"undefined"==typeof google&&(customConsoleLog("google is undefined"),setTimeout(googleInitializeFunction,100)),customConsoleLog("google is defined");var a=document.getElementById("find_an_agent_db_search_address"),n=new google.maps.places.Autocomplete(a,{componentRestrictions:{country:"US"}});n.addListener("place_changed",(function(){sell_search_manully_is_place_selected=!0,customConsoleLog("place change "+sell_search_manully_is_place_selected);var a=n.getPlace();$("#find_an_agent_db_search_address").val(a.formatted_address),$("#find_an_agent_db_search_address").attr("title",a.formatted_address);var e="",_="",t="",s="",o="",i="",d={street_number:"short_name",route:"long_name",locality:"long_name",administrative_area_level_1:"short_name",administrative_area_level_2:"short_name",country:"long_name",postal_code:"short_name",neighborhood:"long_name"},r=!0;-1===a.formatted_address.indexOf("County")&&(r=!1);for(var c=0;c<a.address_components.length;c++){var l=a.address_components[c].types[0];if(d[l]){var g=a.address_components[c][d[l]];"neighborhood"==l&&(i=g.trim()),"administrative_area_level_1"==l&&($("#find_an_agent_search_state").val(g.trim()),e=g.trim()),"postal_code"==l&&($("#find_an_agent_search_zipcode").val(g),_=g.trim()),"administrative_area_level_2"==l&&r&&($("#find_an_agent_search_county").val(g),o=g.trim()),"locality"==l&&($("#find_an_agent_search_city").val(g),t=g.trim(),s=a.address_components[c].short_name.trim(),$("#find_an_agent_search_city_short").val(s)),$("#find_an_agent_search_lat").val(a.geometry.location.lat().toFixed(4)),$("#find_an_agent_search_long").val(a.geometry.location.lng().toFixed(4))}}var h=customSearchParameters({neighborhood:i,city:t,state:e,county:o,zipcode:_,cityShort:s});h.type&&(i=h.neighborhood.trim(),$("#find_an_agent_search_city").val(h.city),$("#find_an_agent_search_city_short").val(h.cityShort),t=check_city=h.city,s=h.cityShort,$("#find_an_agent_search_state").val(h.state),e=h.state,$("#find_an_agent_search_zipcode").val(h.zipcode),_=h.zipcode,$("#find_an_agent_search_county").val(h.county),check_county=h.county),is_find_an_agent_google_search=!0}))}function find_an_agent_search(a){if(state=$("#find_an_agent_search_state").val(),county=$("#find_an_agent_search_county").val(),city=$("#find_an_agent_search_city").val(),""==city&&""==county&&""!=state)return $.alert("You must search on at least City & State or County & State or Zip Code"),!1;$.ajax({url:web_url+"ajax/find-an-agent-list",type:"post",data:{agent_name:$("#find_an_agent_search_agent_name").val(),address:$("#find_an_agent_db_search_address").val(),state:$("#find_an_agent_search_state").val(),county:$("#find_an_agent_search_county").val(),city:$("#find_an_agent_search_city").val(),search_type:$("#find_an_agent_search_type").val(),city_short:$("#find_an_agent_search_city_short").val(),latitude:$("#find_an_agent_search_lat").val(),longitude:$("#find_an_agent_search_long").val(),zipcode:$("#find_an_agent_search_zipcode").val(),page:a},dataType:"json",success:function(a){find_agent_searched_address=$("#find_an_agent_db_search_address").val(),$(".sell-search-area").html(a.html),$("body").css("background-image",'url("")'),a.show_login_popup&&openLoginPopup((function(){$("#login_modal").modal("show")})),$("html, body").animate({scrollTop:0}),find_an_agent_agent_loading_hide()},error:function(){find_an_agent_agent_loading_hide(),showErrorToast("Something Went Wrong.")}})}function find_an_agent_list_pagination(a){find_an_agent_agent_loading_show(),$.ajax({url:web_url+"ajax/find-an-agent-list",type:"post",data:{address:$("#find_an_agent_db_search_address").val(),state:$("#find_an_agent_search_state").val(),county:$("#find_an_agent_search_county").val(),city:$("#find_an_agent_search_city").val(),search_type:$("#find_an_agent_search_type").val(),city_short:$("#find_an_agent_search_city_short").val(),latitude:$("#find_an_agent_search_lat").val(),longitude:$("#find_an_agent_search_long").val(),zipcode:$("#find_an_agent_search_zipcode").val(),page:a},dataType:"json",success:function(a){$(".sell-search-area").html(a.html),$("body").css("background-image",'url("")'),a.show_login_popup&&openLoginPopup((function(){$("#login_modal").modal("show")})),find_an_agent_agent_loading_hide()},error:function(){find_an_agent_agent_loading_hide(),showErrorToast("Something Went Wrong.")}})}function find_an_agent_agent_loading_show(){$(".sell-search-area").showLoading()}function find_an_agent_agent_loading_hide(){$(".sell-search-area").hideLoading()}function processAjaxData(a,n){window.history.pushState({html:a.html,pageTitle:a.pageTitle},"",n)}$(document).ready((function(){var a=!1;$("#find_an_agent_db_search_address").keydown((function(e){if(""!=$("#find_an_agent_search_name").val())return a||showErrorToast("You can search either by location or by agent’s name, but not both."),a=!0,n=!1,!1}));var n=!1;$("#find_agent_loc_clear").click((function(){$("#find_an_agent_db_search_address").val(""),$("#find_an_agent_db_search_address").attr("title","Enter City,State,County or Zip"),$("#find_an_agent_search_state").val(""),$("#find_an_agent_search_city").val(""),$("#find_an_agent_search_type").val(""),$("#find_an_agent_search_city_short").val(""),$("#find_an_agent_search_county").val(""),$("#find_an_agent_search_zipcode").val(""),$("#find_an_agent_search_lat").val(""),$("#find_an_agent_search_long").val(""),is_find_an_agent_google_search=!1})),$("#find_agent_name_clear").click((function(){$("#find_an_agent_search_name").val(""),$("#find_an_agent_search_agent_name").val("")})),$("#find_an_agent_search_name").keypress((function(e){if(""!=$("#find_an_agent_db_search_address").val())return n||showErrorToast("You can search either by location or by agent’s name, but not both."),n=!0,a=!1,!1})),$("#find_an_agent_search_address").change((function(){""==$(this).val()&&($("#sell_search_state").val(""),$("#sell_search_county").val(""),$("#sell_search_zipcode").val(""),$("#sell_search_lat").val(""),$("#sell_search_long").val(""),is_find_an_agent_google_search=!1),customConsoleLog("Manully "+sell_search_manully_is_place_selected),0==sell_search_manully_is_place_selected&&(1==getted_data.status?($("#find_an_agent_db_search_address").val(getted_data.address),$("#find_an_agent_db_search_address").attr("title",getted_data.address),$("#find_an_agent_search_state").val(""),$("#find_an_agent_search_city").val(""),$("#find_an_agent_search_type").val(""),$("#find_an_agent_search_city_short").val(""),$("#find_an_agent_search_county").val(""),$("#find_an_agent_search_zipcode").val(""),$("#find_an_agent_search_lat").val(getted_data.lat),$("#find_an_agent_search_long").val(getted_data.long),is_find_an_agent_google_search=!0):($("#find_an_agent_search_state").val(""),$("#find_an_agent_search_city").val(""),$("#find_an_agent_search_type").val(""),$("#find_an_agent_search_city_short").val(""),$("#find_an_agent_search_county").val(""),$("#find_an_agent_search_zipcode").val(""),$("#find_an_agent_search_lat").val(""),$("#find_an_agent_search_long").val(""),is_find_an_agent_google_search=!1))}))})),$(document).on("click",".search-pagination a",(function(a){a.preventDefault();var n=$(this).attr("href").split("page=")[1];find_an_agent_agent_loading_show(),find_an_agent_search(n)})),$(document).on("click","#find_an_agent_btn_submit",(function(){$("#find_an_agent_search_agent_name").val($("#find_an_agent_search_name").val()),""==$("#find_an_agent_db_search_address").val()||""==$("#find_an_agent_search_name").val()?""!=$("#find_an_agent_db_search_address").val()||""!=$("#find_an_agent_search_name").val()?1==is_find_an_agent_google_search||1==link_searched?$("#find_an_agent_search_county").val()||$("#find_an_agent_search_city").val()?(find_an_agent_agent_loading_show(),find_an_agent_search(1)):showErrorToast("You must search on at least City & State or County & State or Zip Code."):""!=$("#find_an_agent_search_name").val()?(find_an_agent_agent_loading_show(),find_an_agent_search(1)):showErrorToast("Select address from google or Enter Agent Name."):showErrorToast("Enter Address or Agent Name First."):showErrorToast("You can search either by location or by agent’s name, but not both.")})),$(document).ready((function(){var a=window.location.href.split("isuser_search=")[1],n=window.location.href,e=n.indexOf("?"),_=n.substring(e),t=n.replace(_,"");n=t,1==a&&(find_an_agent_agent_loading_show(),$.ajax({url:web_url+"ajax/find-an-agent-list-redirect",type:"post",data:{address:"",state:"",county:"",latitude:"",longitude:"",zipcode:"",page:1},dataType:"json",success:function(a){find_agent_searched_address=$("#find_an_agent_db_search_address").val(),$(".sell-search-area").html(a.html),$("body").css("background-image",'url("")'),a.show_login_popup&&openLoginPopup((function(){$("#login_modal").modal("show")})),find_an_agent_agent_loading_hide()},error:function(){find_an_agent_agent_loading_hide(),showErrorToast("Something Went Wrong.")}}))})),$(document).on("click",".find-an-agent-pagination a",(function(a){a.preventDefault(),find_an_agent_list_pagination($(this).attr("href").split("page=")[1])})),$(document).on("click",".request_founded_agent",(function(){var a=this,n=$(a).attr("data-agent_id");$(a).showLoading(),$.ajax({url:web_url+"ajax/request-agent-bio",type:"post",data:{agent_id:n},dataType:"json",success:function(n){1==n.status?showSuccessToast(n.message):showErrorToast(n.message),$(a).hideLoading()},error:function(){$(a).hideLoading(),showErrorToast("Something Went Wrong.")}})})),$(document).on("click",".non_login_request_founded_agent",(function(){var a=$(this).attr("data-agent_id");openLoginPopup((function(){useraction="contact_agent_request",homeid=0,agentid=a,$("#login_modal").modal("show")}))}));
