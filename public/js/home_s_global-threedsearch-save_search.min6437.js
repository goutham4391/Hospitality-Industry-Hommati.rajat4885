var fixmeTop=0,headerHeight=0,loadPercent=0,main_sear_manully_is_place_selected="",main_sear_manully_address_change="";advance_address="",advance_state="",advance_county="",advance_search_city="",advance_zipcode="",advance_lat="",advance_long="",advance_price_from="",advance_price_to="",advance_beds="",advance_baths="",advance_sqft="",advance_sqft_man="",advance_sqft_man="",advance_garage="",advance_search_3d="",advance_select_aerial="",advance_national_radius="";var advance_search_address="";if($(document).ready((function(){""!=$("#searched_address").val()&&(advance_search_address=$("#searched_address").val())})),$(document).ready((function(){$("#search_garage,#search_sqft,#search_beds,#search_national_radius").select2({tags:!0,dropdownAutoWidth:!0,width:"auto",createTag:function(a){return{id:a.term,text:a.term,newOption:!0}}})})),$(document).ready((function(){$("#modal-search_beds,#modal-search_baths,#modal-search_sqft,#modal-search_garage,#modal-search_national_radius").select2({tags:!0,createTag:function(a){return{id:a.term,text:a.term,newOption:!0}}})})),$(document).on("change","#search_min_price",(function(){if(1==word_checker($(this).val()))return $(this).val("").trigger("change"),showErrorToast("Enter Only Numeric Value."),!1;0!=parseInt($("#search_min_price").val())&&0!=parseInt($("#search_max_price").val())&&parseInt($("#search_min_price").val())>parseInt($("#search_max_price").val())&&(showErrorToast("Enter proper price for search."),$("#search_min_price").val("0").trigger("change")),selected_min_val=parseInt($("#search_min_price").val()),$("#search_max_price").select2("destroy"),$("#search_max_price").select2({tags:!0,createTag:function(a){return{id:a.term,text:a.term,newOption:!0}}}),$("#search_max_price option").filter((function(){return $(this).val()})).attr("disabled",!1),0!=parseInt($("#search_min_price").val())&&$("#search_max_price option").filter((function(){if(0!=$(this).val())return selected_min_val>=parseInt($(this).val())})).attr("disabled",!0)})),$(document).on("change","#search_max_price",(function(){if(1==word_checker($(this).val()))return $(this).val("").trigger("change"),showErrorToast("Enter Only Numeric Value."),!1;0!=parseInt($("#search_min_price").val())&&0!=parseInt($("#search_max_price").val())&&parseInt($("#search_max_price").val())<parseInt($("#search_min_price").val())&&(showErrorToast("Enter proper price for search."),$("#search_max_price").val("0").trigger("change")),selected_min_val=parseInt($("#search_max_price").val()),$("#search_min_price").select2("destroy"),$("#search_min_price").select2({tags:!0,createTag:function(a){return{id:a.term,text:a.term,newOption:!0}}}),$("#search_min_price option").filter((function(){return $(this).val()})).attr("disabled",!1),0!=parseInt($("#search_max_price").val())&&$("#search_min_price option").filter((function(){if(0!=$(this).val())return selected_min_val<=parseInt($(this).val())})).attr("disabled",!0)})),$(document).on("click","#clear_search_field",(function(){$("#db_advance_city").length?$("#db_advance_city").val(""):$("#advance_city").val(""),$("#filter_search_state").val(""),$("#filter_search_county").val(""),$("#filter_search_city").val(""),$("#filter_search_city_short").val(""),$("#filter_search_zipcode").val(""),$("#filter_search_lat").val(""),$("#filter_search_long").val(""),Isgooglesearch=!1,advance_search_address=""})),$(document).ready((function(){var a=document.getElementById("advance_city"),e=new google.maps.places.Autocomplete(a,{componentRestrictions:{country:"US"}});e.addListener("place_changed",(function(){customConsoleLog("place_change"),main_sear_manully_is_place_selected=!0,$("#filter_search_state").val(""),$("#filter_search_county").val(""),$("#filter_search_city").val(""),$("#filter_search_city_short").val(""),$("#filter_search_zipcode").val(""),$("#filter_search_lat").val(""),$("#filter_search_long").val("");var a=e.getPlace(),t=a.name,r="",c="",s="",_="",n="",l="",i="",o="",d="",h="",v={street_number:"short_name",route:"long_name",locality:"long_name",administrative_area_level_1:"short_name",administrative_area_level_2:"short_name",country:"long_name",postal_code:"short_name",neighborhood:"long_name"},m=!0;-1===a.formatted_address.indexOf("County")&&(m=!1);for(var u=0;u<a.address_components.length;u++){var f=a.address_components[u].types[0];if(v[f]){var p=a.address_components[u][v[f]];"neighborhood"==f&&(h=p.trim()),"locality"==f&&0==p.toLowerCase().indexOf(t.toLowerCase())&&(t=""),"country"==f&&0==p.toLowerCase().indexOf(t.toLowerCase())&&(t=""),"administrative_area_level_2"==f&&0==p.toLowerCase().indexOf(t.toLowerCase())&&(t=""),"street_number"==f&&(0==p.toLowerCase().indexOf(t.toLowerCase())&&(t=""),r+=c=p+" "),"route"==f&&(0==p.toLowerCase().indexOf(t.toLowerCase())&&(t=""),r+=s=p),"locality"==f&&($("#filter_search_city").val(p.trim()),$("#filter_search_city_short").val(a.address_components[u].short_name.trim()),o=p.trim(),d=a.address_components[u].short_name.trim()),"administrative_area_level_1"==f&&($("#filter_search_state").val(p.trim()),l=p.trim()),"postal_code"==f&&($("#filter_search_zipcode").val(p),i=p.trim()),"administrative_area_level_2"==f&&m&&""!=(n=p)&&(n=n.replace("County","").trim(),$("#filter_search_county").val(n.trim()))}}t&&(_=_.concat(t+" ")),c&&(_=_.concat(c)),f&&(_=_.concat(s)),$("#filter_search_lat").val(a.geometry.location.lat().toFixed(4)),$("#filter_search_long").val(a.geometry.location.lng().toFixed(4)),$("#advance_city").val(a.formatted_address),$("#advance_city").attr("title",a.formatted_address),advance_search_address=r,Isgooglesearch=!0;var g=customSearchParameters({neighborhood:h,city:o,state:l,county:n,zipcode:i,address:advance_search_address,cityShort:d});g.type&&(h=g.neighborhood.trim(),$("#filter_search_city").val(g.city),$("#filter_search_city_short").val(g.cityShort),o=check_city=g.city,d=g.cityShort,$("#filter_search_state").val(g.state),l=g.state,$("#filter_search_zipcode").val(g.zipcode),i=g.zipcode,$("#filter_search_county").val(g.county),check_county=g.county),resetFiltersWithoutMessage(),$("#advanced_serch_submit").trigger("click")})),$("#advance_city").change((function(){customConsoleLog("text change"),advance_search_address="",""==$(this).val()&&($("#filter_search_state").val(""),$("#filter_search_county").val(""),$("#filter_search_city").val(""),$("#filter_search_city_short").val(""),$("#filter_search_zipcode").val(""),$("#filter_search_lat").val(""),$("#filter_search_long").val(""),Isgooglesearch=!1,$("#search_national_radius").val(0).trigger("change")),0==main_sear_manully_is_place_selected&&get_data_from_address(main_sear_manully_address_change,(function(a){0==main_sear_manully_is_place_selected&&(1==a.status?($("#advance_city").val(a.address),$("#filter_search_state").val(a.state),$("#filter_search_county").val(a.county),$("#filter_search_city").val(a.city_name),$("#filter_search_city_short").val(a.city_name_short),$("#filter_search_zipcode").val(""),$("#filter_search_lat").val(a.lat),$("#filter_search_long").val(a.long),Isgooglesearch=!0,advance_search_address=a.address_data):($("#filter_search_state").val(""),$("#filter_search_county").val(""),$("#filter_search_city").val(""),$("#filter_search_city_short").val(""),$("#filter_search_zipcode").val(""),$("#filter_search_lat").val(""),$("#filter_search_long").val(""),advance_search_address="",Isgooglesearch=!1))}))})),$("#advance_city").keydown((function(a){main_sear_manully_address_change=$(".pac-container:visible .pac-item:first").text(),main_sear_manully_is_place_selected=!1,advance_search_address="",Isgooglesearch=!1}))})),$(document).on("change","#search_baths,#search_beds,#search_sqft,#search_garage",(function(){1==word_checker($(this).val())&&($(this).val("").trigger("change"),showErrorToast("Enter Only Numeric Value."))})),$(document).on("change","#modal-search_beds,#modal-search_baths,#modal-search_sqft,#modal-search_garage",(function(){1==word_checker($(this).val())&&($(this).val("").trigger("change"),showErrorToast("Enter Only Numeric Value."))})),$(document).on("change","#search_national_radius",(function(){1==word_checker($(this).val())&&($(this).val(0).trigger("change"),showErrorToast("Enter Only Numeric Value.")),lat=$("#filter_search_lat").val(),long=$("#filter_search_long").val()})),1==is_address_got)var Isgooglesearch=!0;else Isgooglesearch=!1;var is_ter_search=0,min_lot_size=0,search_max_baths=0,min_payment=0,max_payment=0,advance_search_city_short="",search_open_house=0,threedSearchAjax="",db_search=0,db_string_search=0,string_searched="";function savehome(a,e,t){$.ajax({type:"POST",url:"{!! URL::to('ajax/savehome') !!}",data:{action:a,home:e,agent:t},success:function(a){}})}function updateThreedParameters(){}function searchNotCanceled(){$("#advanced_serch_submit").val("Search"),$("#advanced_serch_submit").removeClass("cancel")}function advancethreed_search_result(a,e){$("#properties_listing").showLoading(),threedSearchAjax=$.ajax({type:"POST",url:web_url+"ajax/threed-datasearch",dataType:"json",data:{state:advance_state,county:advance_county,city:advance_search_city,city_short:advance_search_city_short,zipcod:advance_zipcode,lat:advance_lat,long:advance_long,price_from:advance_price_from,price_to:advance_price_to,beds:advance_beds,baths:advance_baths,sqft:advance_sqft,sqft_man:advance_sqft_man,garage:advance_garage,search_3d:advance_search_3d,select_aerial:advance_select_aerial,national_radius:advance_national_radius,page:a,usa_latitude:usa_latitude,usa_longitude:usa_longitude,advance_search_address:advance_search_address,payment_from:min_payment,payment_to:max_payment,max_baths:search_max_baths,min_lot_size:min_lot_size,is_ter_search:is_ter_search,open_house:search_open_house,string_searched:string_searched},success:function(a){if(1==e)if(1==a.no_franchise_founded)$.alert({title:"No Franchise Found",content:noFranchiseFoundMessage}),$("#advance_city").val(""),$("#advance_city").attr("title",""),$("#filter_search_state").val(""),$("#filter_search_city").val(""),$("#filter_search_city_short").val(""),$("#filter_search_county").val(""),$("#filter_search_zipcode").val(""),$("#filter_search_lat").val(usa_latitude),$("#filter_search_long").val(usa_longitude),advance_lat=usa_latitude,advance_long=usa_longitude,advance_national_radius=0,advance_search_address="";else if(0==a.no_franchise_founded&&0==a.home_list_count)if(is_ter_search||0==a.franchise_listing_count){var t='We\'re sorry, we do not currently have a franchisee serving that market so we do not have agents and/or listings available in that area.  For now, we will show you all the listings on a national basis.  If you are interested in possibly opening a franchise in this market, please click the link below to go to the franchise opportunity page. <br> <a href="https://www.hommati.com/top-franchise-opportunity">Top Franchise Opportunity</a> <br>Thank you.';1==search_open_house&&(t="We're sorry there are currently no open houses scheduled for the location you searched. Please try a different location."),$.confirm({title:t,content:"",buttons:{Ok:function(){0==search_open_house&&($("#advance_city").val(""),$("#advance_city").attr("title",""),$("#filter_search_state").val(""),$("#filter_search_city").val(""),$("#filter_search_city_short").val(""),$("#filter_search_county").val(""),$("#filter_search_zipcode").val(""),$("#filter_search_lat").val(usa_latitude),$("#filter_search_long").val(usa_longitude),advance_lat=usa_latitude,advance_long=usa_longitude,advance_national_radius=0,advance_search_address="",showResetFilterMessage=!1,$("#reset_filters").trigger("click")),$("#search_open_house").val(0),search_open_house=0}}})}else{var r="Weâ€™re sorry we do not have any homes in that exact search so we are delivering all homes that are listed near your search.";1==search_open_house&&(r="We're sorry there are currently no open houses scheduled for the location you searched. Please try a different location."),$.confirm({title:r,content:"",buttons:{Ok:function(){is_ter_search=1,showResetFilterMessage=!1,$("#reset_filters").trigger("click"),advancethreed_search_result(1,1)}}})}1==e&&1==a.reset_filtters&&($("#advance_city").val(""),$("#advance_city").attr("title",""),$("#filter_search_state").val(""),$("#filter_search_county").val(""),$("#filter_search_city").val(""),$("#filter_search_city_short").val(""),$("#filter_search_zipcode").val(""),$("#filter_search_lat").val(usa_latitude),$("#filter_search_long").val(usa_longitude),advance_lat=usa_latitude,advance_long=usa_longitude,advance_national_radius=0,advance_search_address=""),next_load=0,next_page=1,1==a.has_more_pages&&(next_load=1,next_page=a.next_page_number),$("#loadingaction").val(next_load),$("#seq").val(next_page),$("#properties_listing").html(""),$("#properties_listing").html(a.html),$("#properties_listing").hideLoading(),searchNotCanceled(),$("html, body").animate({scrollTop:0})},error:function(a,e){"abort"!==e&&showErrorToast("Something Went Wrong."),$("#properties_listing").hideLoading(),searchNotCanceled()}})}function advance_save_search(){var a=$("#advance_city").val(),e=$("#filter_search_state").val(),t=$("#filter_search_county").val(),r=$("#filter_search_zipcode").val(),c=$("#filter_search_lat").val(),s=$("#filter_search_long").val(),_=$("#search_min_price").val(),n=$("#search_max_price").val(),l=$("#search_beds").val(),i=$("#search_baths").val(),o=$("#search_sqft").val(),d=$("#search_garage").val(),h=$("#search_3d").val(),v=$("#select_aerial").val(),m=$("#search_national_radius").val(),u=$("#search_min_payment").val(),f=$("#search_max_payment").val();""!=a||""!=_||""!=n||""!=l||""!=i||""!=o||""!=d||"0"!=h||"0"!=v||"0"!=m?$.ajax({type:"POST",url:web_url+"ajax/save-advance-search",dataType:"json",data:{advance_address:a,advance_state:e,advance_county:t,advance_zipcode:r,advance_lati:c,advance_longi:s,advance_min_price:_,advance_max_price:n,advance_search_beds:l,advance_search_baths:i,advance_search_sqft:o,advance_search_garage:d,advance_search_3d:h,advance_select_aerial:v,advance_search_national_radius:m,advance_min_payment:u,advance_max_payment:f},success:function(a){1==a.status?showSuccessToast(a.message):showErrorToast("Something went wrong.")},error:function(){showErrorToast("Something went wrong.")}}):showErrorToast("Please Select Something to save.")}function save_search_withoutlogin(){arr.advance_address=$("#advance_city").val(),arr.advance_state=$("#filter_search_state").val(),arr.advance_county=$("#filter_search_county").val(),arr.advance_zipcode=$("#filter_search_zipcode").val(),arr.advance_lati=$("#filter_search_lat").val(),arr.advance_longi=$("#filter_search_long").val(),arr.advance_min_price=$("#search_min_price").val(),arr.advance_max_price=$("#search_max_price").val(),arr.advance_min_payment=$("#search_min_payment").val(),arr.advance_max_payment=$("#search_max_payment").val(),arr.advance_search_beds=$("#search_beds").val(),arr.advance_search_baths=$("#search_baths").val(),arr.advance_search_sqft=$("#search_sqft").val(),arr.advance_search_garage=$("#search_garage").val(),arr.advance_search_3d=$("#search_3d").val(),arr.advance_select_aerial=$("#select_aerial").val(),arr["advance_search_national_radius\t"]=$("#search_national_radius").val(),openLoginPopup((function(){$("#login_modal").modal("show")}))}localStorage.setItem("search_url",""),$(document).ready((function(){$(".playstore").removeAttr("target"),$(".apple-appstore").removeAttr("target"),$(".playstore").attr("data-target","#app_release_modal"),$(".playstore").attr("data-toggle","modal"),$(".apple-appstore").attr("data-target","#app_release_modal2"),$(".apple-appstore").attr("data-toggle","modal"),"undefined"!=typeof Storage&&(sessionStorage.clickcount?sessionStorage.clickcount=Number(sessionStorage.clickcount)+1:sessionStorage.clickcount=1),fixmeTop=$(".fixme").offset().top-$("header.header").height(),headerHeight=$("header.header").height(),loadPercent=98.5,$(document).on("click",".search-threedpagination a",(function(a){a.preventDefault(),advancethreed_search_result($(this).attr("href").split("page=")[1],0)})),$("#advanced_serch_submit").trigger("click")})),$(document).on("click","#advanced_serch_submit",(function(){if($("#advanced_serch_submit").hasClass("cancel"))return $("#clear_search_field").click(),showResetFilterMessage&&(showResetFilterMessage=!1),$("#reset_filters").click(),$("#advanced_serch_submit").removeClass("cancel"),threedSearchAjax&&threedSearchAjax.abort(),localStorage.removeItem("search_url"),!1;$("#advanced_serch_submit").addClass("cancel"),$("#advanced_serch_submit").val("Cancel");var a=window.innerWidth&&window.innerWidth>767?0:1;if(advance_address=$("#advance_city").val(),advance_state=$("#filter_search_state").val(),advance_county=$("#filter_search_county").val(),advance_search_city=$("#filter_search_city").val(),advance_search_type=$("#filter_search_type").val(),advance_search_city_short=$("#filter_search_city_short").val(),advance_zipcode=$("#filter_search_zipcode").val(),advance_lat=$("#filter_search_lat").val(),advance_long=$("#filter_search_long").val(),advance_price_from=$("#search_min_price").val(),advance_price_to=$("#search_max_price").val(),min_payment=$("#search_min_payment").val(),max_payment=$("#search_max_payment").val(),search_open_house=$("#search_open_house").val(),db_search=$("#db_search").val(),string_searched="",advance_beds=a?$("#modal-search_beds").val():$("#search_beds").val(),advance_baths=a?$("#modal-search_baths").val():$("#search_baths").val(),search_max_baths=$("#search_max_baths").val(),min_lot_size=$("#search_min_lot").val(),max_lot_size=$("#search_max_lot").val(),a?(advance_sqft=$("#modal-search_sqft").val(),advance_sqft_man=$("#modal-search_sqft option:selected").attr("data-is_system"),"undefined"!=typeof advance_sqft_man?advance_sqft_man=0:advance_sqft_man=1):(advance_sqft=$("#search_sqft").val(),advance_sqft_man=$("#search_sqft option:selected").attr("data-is_system"),"undefined"!=typeof advance_sqft_man?advance_sqft_man=0:advance_sqft_man=1),advance_garage=a?$("#modal-search_garage").val():$("#search_garage").val(),advance_search_3d=a?$("#modal-select_search_3d").val():$("#search_3d").val(),advance_select_aerial=a?$("#modal-select_aerial").val():$("#select_aerial").val(),advance_national_radius=$("#search_national_radius").val(),window.location.href.indexOf("homes-3d?")>-1)var e=web_url+"homes-3d?&list-view=true";else e=web_url+"homes?&list-view=true";if(1==db_search?""!=$("#db_advance_city").val()&&(e=(e=e.concat("&address="+$("#db_advance_city").val())).concat("&address-title="+$("#db_advance_city").val())):""!=$("#advance_city").val()&&(e=(e=e.concat("&address="+$("#advance_city").val())).concat("&address-title="+$("#advance_city").attr("title"))),""!=$("#filter_search_state").val()&&(e=e.concat("&state="+$("#filter_search_state").val())),""!=$("#filter_search_county").val()&&(e=e.concat("&county="+$("#filter_search_county").val())),""!=$("#filter_search_city").val()&&(e=e.concat("&city="+$("#filter_search_city").val())),""!=$("#filter_search_type").val()&&(e=e.concat("&search_type="+$("#filter_search_type").val())),""!=$("#filter_search_city_short").val()&&(e=e.concat("&city-short="+$("#filter_search_city_short").val())),""!=$("#filter_search_zipcode").val()&&(e=e.concat("&zipcode="+$("#filter_search_zipcode").val())),""!=$("#filter_search_lat").val()&&(e=e.concat("&latitude="+$("#filter_search_lat").val())),""!=$("#filter_search_long").val()&&(e=e.concat("&longitude="+$("#filter_search_long").val())),0!=$("#search_min_price").val()&&(e=e.concat("&min-price="+$("#search_min_price").val())),0!=$("#search_max_price").val()&&(e=e.concat("&max-price="+$("#search_max_price").val())),0!=$("#search_beds").val()&&(e=e.concat("&beds="+$("#search_beds").val())),0!=$("#search_baths").val()&&(e=e.concat("&baths="+$("#search_baths").val())),0!=$("#search_sqft").val()&&(e=e.concat("&sqft="+$("#search_sqft").val())),""==$("#filter_search_city").val()&&""==$("#filter_search_state").val()&&(""!=$("#db_advance_city").val()?(e=e.concat("&string_searched="+$("#db_advance_city").val()),string_searched=$("#db_advance_city").val()):""!=$("#string_searched").val()&&(e=e.concat("&string_searched="+$("#string_searched").val()),string_searched=$("#string_searched").val())),a?(advance_sqft=$("#modal-search_sqft").val(),e=0==advance_sqft_man?e.concat("&sqft_type=0"):e.concat("&sqft_type=1")):e=0==advance_sqft_man?e.concat("&sqft_type=0"):e.concat("&sqft_type=1"),0!=$("#search_garage").val()&&(e=e.concat("&garage="+$("#search_garage").val())),0!=$("#search_3d").val()&&(e=e.concat("&3d="+$("#search_3d").val())),0!=$("#select_aerial").val()&&(e=e.concat("&aerial="+$("#select_aerial").val())),0!=$("#search_national_radius").val()&&(e=e.concat("&radius="+$("#search_national_radius").val())),search_max_baths&&(e=e.concat("&max-baths="+search_max_baths)),min_lot_size&&(e=e.concat("&min-lot="+min_lot_size)),min_payment&&(e=e.concat("&min-payment-price="+min_payment)),max_payment&&(e=e.concat("&max-payment-price="+max_payment)),1==search_open_house&&(e=e.concat("&open-house=1")),1==db_search&&(e=e.concat("&db_search=1")),localStorage.setItem("search_url",e),window.location.href.indexOf("homes-3d?")>-1)var t="?"+e.replace(web_url+"homes-3d?&list-view=true").replace("undefined","");else t="?"+e.replace(web_url+"homes?&list-view=true").replace("undefined","");updatePageHistory("",t),advancethreed_search_result(1,1)})),$(document).on("click",".home_single_page_link",(function(){localStorage.setItem("search_url",localStorage.getItem("search_url"));var a=$(this).attr("data-link");window.location.href=a})),setTimeout((function(){$("body").addClass("advnc-srch")}),1500);
