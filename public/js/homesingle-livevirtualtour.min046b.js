var tab_date1,tab_date2,tab_date3,timezone__1=Intl.DateTimeFormat().resolvedOptions().timeZone,i=1,now=(new Date).getTime();function previous(){1!=i&&getdata(--i,now)}function next(){getdata(++i,now)}function getdata(e,t){1==e?$(".previous-1").css("cursor","not-allowed"):$(".previous-1").css("cursor","pointer");var a=new Date(t),n=a.setDate(a.getDate()+e),o=a.toLocaleString("en-US",{weekday:"long"}),i=a.toLocaleString("en-US",{month:"short"}),r=a.toLocaleString("en-US",{day:"2-digit"});tab_date1=new Date(n).toLocaleDateString();var l=new Date(t),d=l.setDate(l.getDate()+(e+1)),s=l.toLocaleString("en-US",{weekday:"long"}),c=l.toLocaleString("en-US",{month:"short"}),u=l.toLocaleString("en-US",{day:"2-digit"});tab_date2=new Date(d).toLocaleDateString();var g=new Date(t),m=g.setDate(g.getDate()+(e+2)),v=g.toLocaleString("en-US",{weekday:"long"}),h=g.toLocaleString("en-US",{month:"short"}),f=g.toLocaleString("en-US",{day:"2-digit"});tab_date3=new Date(m).toLocaleDateString(),$(".month-1").text(i),$(".date-1").text(r),$(".day-1").text(o),$(".month-2").text(c),$(".date-2").text(u),$(".day-2").text(s),$(".month-3").text(h),$(".date-3").text(f),$(".day-3").text(v),setdate($("#set-option").val())}function setdate(e){2==e?$("#comman-select-date").val(tab_date2):3==e?$("#comman-select-date").val(tab_date3):$("#comman-select-date").val(tab_date1)}function get_day_diff_count(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=new Date,a=new Date(e),n=Math.abs(a-t);return diffDays=Math.ceil(n/864e5)}function select_date__1(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(e){i=get_day_diff_count(new Date(e).getTime()),getdata(0,new Date(e).getTime()),$(".date-select").removeClass("date-active"),$("[data-tab=1]").addClass("date-active"),setdate(1)}(e)}$("#comman-select-date").val(tab_date1),$(".previous-1").on("click",(function(e){e.preventDefault(),previous()})),$(".next1").on("click",(function(e){e.preventDefault(),next()})),getdata(i,now),$(".date-select").on("click",(function(){var e=$(this).attr("data-tab");$(".date-select").each((function(e,t){$(this).removeClass("date-active")})),$("[data-tab="+e+"]").addClass("date-active"),$("#set-option").val(e),setdate(e)})),$(".full-name").on("keyup",(function(e){$(".full-name").val(e.target.value)})),$(".e-mail").on("keyup",(function(e){$(".e-mail").val(e.target.value)})),$(".phoneNum").on("keyup",(function(e){$(".phoneNum").val(e.target.value)})),$(".text-msg").on("keyup",(function(e){$(".text-msg").val(e.target.value)})),$("#timepicker").on("keyup",(function(e){$("#timepicker").val(e.target.value)})),$(".phoneNum").on("input",(function(e){var t=e.target.value.replace(/\D/g,"").match(/(\d{0,3})(\d{0,3})(\d{0,4})/);e.target.value=t[2]?"("+t[1]+") "+t[2]+(t[3]?"-"+t[3]:""):t[1]}));var homeId=document.getElementById("home_id").value,agent=document.getElementById("agent_id").value;function getWithExpiry(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=localStorage.getItem(e);if(!t)return null;var a=JSON.parse(t),n=new Date,o=new Date(a.expiry);return n.getTime()<o.getTime()?a.value:null}$(".request_submit").on("click",(function(e){e.preventDefault(),$("body").showLoading();var t=$(".e-mail").val();flag1=!0,0===$(".phoneNum").val().length||$(".phoneNum").val().length<14&&(showErrorToast("Please enter valid phone."),flag1=!1,$("body").hideLoading());var a=$(".text-msg").val();0===$(".text-msg").val().length&&(a="I have questions about ".concat(home__address,"."));var n={selected_date:$("#comman-select-date").val(),full_name:$(".full-name").val(),email:t,phone:$(".phoneNum").val(),text:a,home:homeId,lead_id:getWithExpiry(homeId),agent_id:agent,listing_address:listing_address,time:$("#timepicker").val()};flag1&&$.ajax({type:"POST",url:generate_virtual_tour_request_route,headers:{"X-CSRF-Token":$('meta[name="_token"]').attr("content")},data:n,cache:!1,beforeSend:function(){},success:function(e){console.log(e,"data"),$("body").hideLoading(),1==e.status?($(".livetourForm")[0].reset(),$("#live_virtual_tour_form").hide(),showSuccessToast(e.message)):2==e.status?($.each(e.error,(function(e,t){showErrorToast(t[0])})),$("body").hideLoading()):($("body").hideLoading(),e.message?showErrorToast(e.message):showErrorToast("Something went wrong."))},error:function(e){$("body").hideLoading(),showErrorToast("Something went wrong.")}})}));
