function _createForOfIteratorHelper(e,t){var o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!o){if(Array.isArray(e)||(o=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){o&&(e=o);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,r=!0,l=!1;return{s:function(){o=o.call(e)},n:function(){var e=o.next();return r=e.done,e},e:function(e){l=!0,n=e},f:function(){try{r||null==o.return||o.return()}finally{if(l)throw n}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,a=new Array(t);o<t;o++)a[o]=e[o];return a}var bounds,schoolbutton,isDescriptionCalled=!1,isMobile=function(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t}(),agent_contact_displayed=!1,extenedBounds=!1,markers=[],zoom_level=0,lst_zoom_lvl=18,schoolidList=[],schoolsResponse={},infowindows=[],userAgent=window.navigator.userAgent,addMarkersFlag=!1,currentvideo="",threed_lead_generated=!1,slideshow_lead_generated=!1,walkthrough_lead_generated=!1,brochureview_lead_generated=!1,aerial_lead_generated=!1,currentMapType="",animationeffects=["center center","top left","bottom left","top center","bottom center","top right","bottom right"],arCanvasMaxHeight=250,arCanvasMaxWidth=350,aerialVideoObj=null,restrictionReached=!1,guidedTourLoaded=!1,tourData=[],showFirst=!1,floor=0,zoomFloorPlan=!1,broucherLoaded=!1,floorplanLoaded=!1;function isChrome(){return-1!=navigator.userAgent.indexOf("Chrome")}function stophomevid(){$("#c2").hide(),$("#closehomevidbtn").hide(),$("#introvideo")[0]&&$("#introvideo")[0].pause(),$("#safari_play").hide()}$("#email_agent_btn").click((function(){var e=$(this).attr("data-agent_id");0==is_user_login?openLoginPopup((function(){useraction="found-contact-agent",homeid=0,agentid=e,$("#login_modal").modal("show")})):$("#sell_contact_agent_modal").modal("show")}));var street_view_lat=0,street_view_lng=0,pdfMapLoaded=!1;function walkthroughAutoplayModal(){$("#tab9").length&&($("#walkthrough_iframe").attr("src",""),walkthroughAudioPause(),$("#walkthrough_modal").modal("show"),$(".walkthrough_tab_content").addClass("after_modal_appended"),$(".modal-backdrop").appendTo(".walkthrough_tab_content"),$("body").removeClass("modal-open"),$("body").css("padding-right",""))}function walkthroughAutoPlay(){if($("#tab9").length){$("#tab9").showLoading(),$("#walkthrough_iframe").attr("src",$("#walkthrough_iframe_url").val());var e=0,t=slideshowaudios.length;e=parseInt(1e3*Math.random()%t),$("#walkthroughaudio").attr("src",audiopath+slideshowaudios[e]),$("#walkthroughaudio").get(0).muted=!1,$("#walkthroughaudio").get(0).play(),wtAudio=document.getElementById("walkthroughaudio"),wtAudio.addEventListener("ended",(function(){e=parseInt(1e3*Math.random()%t),$("#walkthroughaudio").attr("src",audiopath+slideshowaudios[e]),$("#walkthroughaudio").get(0).play()})),wtAudio.volume=1,generateWalkthroughLead(),setTimeout((function(){$("#tab9").hideLoading()}),2e3)}}function walkthroughAudioPause(){var e=document.getElementById("walkthroughaudio");$("#walkthroughaudio").length&&(e.paused&&!e.currentTime||$("#walkthroughaudio").get(0).pause())}function street_map_initialize(){if(0!=street_view_lat&&0!=street_view_lng){var e={lat:street_view_lat,lng:street_view_lng},t=new google.maps.Map(document.getElementById("simple_map_view"),{center:e,zoom:14}),o=new google.maps.StreetViewPanorama(document.getElementById("street_map_view"),{position:e,pov:{heading:34,pitch:10}});t.setStreetView(o)}}function getSchools(){schoolbutton.style.display="none",$("#home_properties_map").showLoading(),setTimeout((function(){$("body,html").animate({scrollTop:$("#home_properties_map").offset().top-130},600)}),500),$.ajax({type:"POST",url:web_url+"ajax/getschools/"+$("#home_id").val(),dataType:"json",data:{homeid:$("#home_id").val(),latt:latitude,longg:longitude},success:function(e){if($("#home_properties_map").hideLoading(),e.status){schoolsResponse=e;schools=e.data,schools.length>0&&(addMarkers(schools,!0),map.fitBounds(bounds),map.setCenter(bounds.getCenter()),lst_zoom_lvl=map.getZoom(),setTimeout((function(){mapzoomevent()}),1e3))}},error:function(e,t,o){$("#home_properties_map").hideLoading(),schoolbutton.style.display="block",t&&"abort"!=t&&showErrorToast("Something Went Wrong.")}})}function mapzoomevent(){var e;e=(markers.length-schoolsResponse.data.length)/10;for(var t=0;t<schoolsResponse.other.length;t++){var o=schoolsResponse.other[e];console.log("i ",o),addMarkers(o)}lst_zoom_lvl=map.getZoom(),zoom_level++}function addMarkers(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(map.getMapTypeId()==google.maps.MapTypeId.ROADMAP||""==currentMapType?map.setMapTypeId(google.maps.MapTypeId.ROADMAP):map.setMapTypeId(google.maps.MapTypeId.SATELLITE),p=0;p<e.length;p++){var o=e[p].latt,a=e[p].longg;if(o&&a){var i=e[p].school_name,n=null!=e[p].school_grade?e[p].school_grade:"",r=null!=e[p].district?e[p].district:"",l=e[p].ratings>0&&null!=e[p].ratings?e[p].ratings:"",s=e[p].school_link,d=e[p].school_district,c=parseInt(e[p].id),u=new google.maps.Marker({position:new google.maps.LatLng(o,a),map:map,title:i,own_redirection:s,icon:web_url+"public/images/school4.png",school_id:c});schoolidList.push(c),markers.push(u);var m="";1==d&&(m+='<span style="color:#093b5d;font-weight: 700;"> Home is in This District </span><br>',m+="<style>.gm-style-iw.gm-style-iw-c{opacity:1;}.gm-style-iw.gm-style-iw-c { opacity: 1; background: rgba(247, 148, 37) !important; padding: 5px 10px  10px 10px !important;}.schoolmarkerinfo{margin-top:5px;}",m+=".gm-style .gm-style-iw-t::after {background: rgba(247, 148, 37) !important;}",m+=".schoolmarkerinfo { background-color: #fff;}",m+=".gm-style-iw-d {overflow: hidden !important;}</style>"),m+='<div style="padding-left:5px;text-align:left;min-width: 180px;" class="schoolmarkerinfo">',m+='<span style="color:#093b5d;font-weight: 700;">'+i+"</span><br/>",m+='<span style="color:#093b5d;font-weight: 700;"> Grades '+n+"</span><br/>",l>0&&""!=l&&(m+='<span style="color:#093b5d;font-weight: 700;"> GreatSchools &reg; Rating: <span style="color:#093b5d;background:#f19327;border-radius:50%;padding:4px 8px;position:absolute;right:15px;font-weight: 700;top:40%;">'+l+"</span></span>"),m+='<br><span style="color:#093b5d;font-weight: 700;"> '+r+" </span>",m+="</div><style>.gm-ui-hover-effect{display:none !important;} .gm-style-iw.gm-style-iw-c{border-radius:0px !important;}</style>";var h=new google.maps.InfoWindow({content:m,own_redirection:s,school_id:c});infowindows.push(h),u.addListener("mouseenter",(function(){h.close();var e=parseInt(this.school_id);idIndex=$.inArray(e,schoolidList),(h=infowindows[idIndex]).open(map,this)})),isUnbranded||u.addListener("click",(function(){window.open(this.own_redirection,"_blank")})),u.addListener("mouseover",(function(){h.close();var e=parseInt(this.school_id);idIndex=$.inArray(e,schoolidList),(h=infowindows[idIndex]).open(map,this)})),u.addListener("mouseout",(function(){h.close()})),$(".marker_home").trigger("mouseenter"),$(".marker_home").removeClass("marker_home"),!0===t&&1==d&&(extenedBounds=!0,bounds.extend(u.position))}}if(!1===extenedBounds&&!0===t)for(var p=0;p<markers.length;p++)bounds.extend(markers[p].position)}function playintrovideo(){processor.doLoad()}function deleteOverlays(){if(markers){for(i in markersArray)markersArray[i].infoWindow.setMap(null),markersArray[i].infoWindow=null,markersArray[i].setMap(null);markers.length=0}}function listing_agent_phone(e,t){if(0==t)!1===agent_contact_displayed?$("#property_phone_agent_modal").modal("show"):agent_details_show();else{$("."+e+"_div").attr("data-home_type");submit_phone_contact(loginFirst,loginLast,loginEmail,loginNum)}}function broker_phone(e){broker_details_show(e)}function processAjaxData(e,t){window.history.pushState({html:e.html,pageTitle:e.pageTitle},"",t)}function agent_details_show(){$.alert({title:agent_name,content:agent_number})}function broker_details_show(e){$("."+e+"_div").attr("data-home_type");$.alert({title:broker_name,content:broker_number})}function changeNumberOfSlides(e,t){var o=null,a=$(".temp-slider-container .col-md-4").length;e&&(o=e),o||(o=window.innerWidth>1366?12:window.innerWidth>1200?10:window.innerWidth>992?6:window.innerWidth>768?5:2);var i=0;window.innerWidth>=1020&&window.innerWidth<=1032&&(o-=1);var n=$(".temp-slider-container .col-md-4");for($(".carousel .carousel-inner").html("");i<a;){var r;r=n.splice(0,o);var l="<div class='item "+(0==i?"active":"")+"'><div class='row'>";i+=o,$.each(r,(function(e,t){l+='<div class="col-md-4 property_thumb" style="width:100px;">'+$(t).html()+"</div>"})),l+="</div></div>",$(".carousel .carousel-inner").append(l)}1==t?$("#media1").carousel({pause:!0,interval:!1}):$("#media").carousel({pause:!0,interval:!1}),addSliderClass()}function addSliderClass(){$("#slider_main .property_thumb").length>=10&&$("#slider_main").addClass("change-width")}function sliderInitialize(){var e=null,t=$(".temp-slider-container .col-md-4").length;e=window.innerWidth>1200?9:window.innerWidth>991?6:window.innerWidth>767?5:2;for(var o=0;o<t;){var a=$(".temp-slider-container .col-md-4").slice(0,e);$(".temp-slider-container .col-md-4").slice(0,e).remove();var i="<div class='item "+(0==o?"active":"")+"'><div class='row'>";o+=e,$.each(a,(function(e,t){i+='<div class="col-md-4 property_thumb" style="width:100px;">'+$(t).html()+"</div>"})),i+="</div></div>",$(".carousel .carousel-inner").append(i)}$("#media").carousel({pause:!0,interval:!1}),$("#media").show()}$(".walkthrough_content_overlay").on("click",(function(e){walkthroughAutoplayModal()})),$(document).ready((function(){$("#c2").hide();var e=localStorage.getItem("current_tab");e||(e="overview_tab"),$("#walkthrough_play_btn").on("click",(function(){$(".walkthrough_content_overlay").remove(),walkthroughAutoPlay(),videoClicked||(videoClicked=!0,0==logged_in_user_id&&1==restrict_30_seconds&&0==parseInt(unbranded)&&setTimeout((function(){open30SecondRestrictionPopup(home_id,{restrict_30_seconds:restrict_30_seconds,restrict_30_seconds_action:"restrict_30_seconds_3d"}),$("#walkthrough_iframe").attr("src",""),videoClicked=!1}),15e3))})),window.location.href.indexOf("walkthrough")>-1?($(".walkthrough_content_overlay").on("click",(function(e){walkthroughAutoplayModal()})),walkthroughAutoplayModal()):(walkthroughAudioPause(),$("#walkthrough_iframe").attr("src","")),isUnbranded&&$(".walkthrough_content_overlay").on("click",(function(e){walkthroughAutoplayModal()}));function t(e,t){var o=document.createElement("div");o.style.backgroundColor="#fff",o.style.border="2px solid #fff",o.style.borderRadius="3px",o.style.boxShadow="0 2px 6px rgba(0,0,0,.3)",o.style.cursor="pointer",o.style.marginBottom="22px",o.style.textAlign="center",o.title="Show Near By Schools",e.appendChild(o);var a=document.createElement("div");a.style.color="#FFF",a.style.fontFamily="Roboto,Arial,sans-serif",a.style.fontSize="16px",a.style.fontWeight="bold",a.style.lineHeight="30px",a.style.paddingLeft="15px",a.style.paddingRight="15px",a.style.position="absolute",$(window).width()<767?a.style.left="-155px":a.style.left="-180px",a.style.top="55px",a.style.backgroundColor="#f19327",a.style.borderRadius="3px",a.innerHTML="Schools",o.appendChild(a),schoolbutton=o,o.addEventListener("click",(function(){schoolidList=[],infowindows=[],markers=[],schools=[],getSchools()}))}initiateMortgageComponents(),$(document).on("click",".show-floor-plan",(function(){if(!pdfMapLoaded&&(pdfMapLoaded=!0,home_floor_plan_url)){var e,t=0,o=_createForOfIteratorHelper(pdfJsURLs);try{for(o.s();!(e=o.n()).done;){var a=e.value;loadScriptAsync({"script-url":a},(function(){if(++t==pdfJsURLs.length){window.innerWidth;showPDF(home_floor_plan_url)}}))}}catch(e){o.e(e)}finally{o.f()}}})),loadScriptAsync({"script-url":mapJsURL},(function(){!function(){if(bounds=new google.maps.LatLngBounds,latitude&&longitude){var e=new google.maps.StreetViewService,o=200,a=new google.maps.LatLng(latitude,longitude);e.getPanoramaByLocation(a,o,(function(e,t){show_street_view&&(t===google.maps.StreetViewStatus.OK?(street_view_lat=e.location.latLng.lat(),street_view_lng=e.location.latLng.lng(),"unbranded"!=unbranded&&unbranded,$(".street-div").css("display",""),$(".property-img-list-div").removeClass("col-md-12").addClass("col-md-11")):($(".street-div").css("display","none"),$(".property-img-list-div").removeClass("col-md-11").addClass("col-md-12")))})),setTimeout((function(){map.setZoom(17),map.setCenter(new google.maps.LatLng(latitude,longitude)),map.setMapTypeId(google.maps.MapTypeId.SATELLITE),("unbranded"!=unbranded&&1==unbranded||0==show_street_view)&&map.setOptions({streetViewControl:!1});var e=new google.maps.Marker({position:new google.maps.LatLng(latitude,longitude),map:map,title:"",icon:web_url+"public/images/hommati-icon.png"});bounds.extend(e.position),$(".marker_home").trigger("mouseenter"),$(".marker_home").removeClass("marker_home"),map.addListener("maptypeid_changed",(function(){currentMapType=map.getMapTypeId()}))}),100),1==$("#display_schools").val()&&setTimeout((function(){var e=document.createElement("div");new t(e,map);e.index=1,map.controls[google.maps.ControlPosition.TOP_LEFT].push(e),t(e,map)}),200)}}()})),$(document).on("click","#home-description-more-link",(function(){fetchModalPopupAndShow({"popup-name":"myModal_description"},(function(){$("#myModal_description").modal("show"),$("#home-description-modal-container").text($("#home-description-full-content").text())}))})),$(document).on("click","#openhome-description-more-link",(function(){fetchModalPopupAndShow({"popup-name":"myModal_description"},(function(){$("#myModal_description").modal("show"),$("#home-description-modal-container").text($("#openhome-description-full-content").text())}))})),$(document).on("shown.bs.modal","#myModal",(function(e){})),$(document).on("hidden.bs.modal","#myModal",(function(e){stopVideoPlayer()})),$(document).on("click",".threed_tour_redirection_link",(function(){localStorage.setItem("search_url","");var e=$(this).attr("data-link");window.location.href=e})),1==is_contact_details_req&&(agent_details_show(),processAjaxData("",singlehandle));var o={};if(homevideo){var a;a=function(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(t>0)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);if(e.indexOf("Trident/")>0){var o=e.indexOf("rv:");return parseInt(e.substring(o+3,e.indexOf(".",o)),10)}var a=e.indexOf("Edge/");return a>0&&parseInt(e.substring(a+5,e.indexOf(".",a)),10)}(),l_r=90,l_g=255,l_b=90,d_r=118,d_g=165,d_b=118,tolerance=.14,mintolerance=1,maxtolerance=0,toleranceTemp=80,a&&(toleranceTemp=70),disregardWidthPixels=0,minHueAngle=.3,maxHueAngle=.44,processor={};var i=$(".blur_img").innerHeight(),n=$(".blur_img").innerWidth(),r={r:[],g:[],b:[]};$(window).on("resize",(function(){customConsoleLog(currentvideo),"arvideo"==currentvideo&&processor.updateDimensions()})),processor.doLoad=function(){this.videoposition=$("#video_position").val(),this.video=document.getElementById("introvideo"),this.greenscreen_image=document.getElementById("greenscreen-image"),this.c1=document.getElementById("c1"),this.ctx1=this.c1.getContext("2d"),this.c2=document.getElementById("c2"),this.c2.globalCompositeOperation="source-atop",this.ctx2=this.c2.getContext("2d"),$("#c2").show(),navigator.userAgent.indexOf("Firefox"),$("#introvideo").get(0).play(),customConsoleLog("play"),this.video.muted=!1;var e=this;this.video.addEventListener("play",(function(){currentvideo="arvideo",$("#closehomevidbtn").show(),customConsoleLog("in play"),e.updateDimensions(),e.timerCallback()}),!1),this.video.addEventListener("ended",(function(){$("#c2").hide(),$("#closehomevidbtn").hide(),$("#safari_play").hide(),currentvideo=""})),this.video.addEventListener("pause",(function(){customConsoleLog("paused")})),this.video.addEventListener("error",(function(){customConsoleLog("error")}))},processor.updateDimensions=function(){var e,t,a,r,l,s,d,c,u,m,h,p,g,_,f,v,w,b=this.video.videoHeight,y=this.video.videoWidth,k=b,x=y;if(i=$(".full_pro_img").innerHeight(),n=$(".full_pro_img").innerWidth(),$(window).innerWidth()>767?(arCanvasMaxHeight=2*i/3,arCanvasMaxWidth=n/2):(arCanvasMaxHeight=2*i/3,arCanvasMaxWidth=n),b>y?b>arCanvasMaxHeight&&(k=arCanvasMaxHeight,x=arCanvasMaxHeight*y/b):y>arCanvasMaxWidth&&(x=arCanvasMaxHeight,k=arCanvasMaxWidth*b/y),this.height=b,this.width=y,this.c1.height=b,this.c1.width=y,this.c2.height=b,this.c2.width=y,$("#c2").height(k),$("#c2").width(x),""!=this.videoposition){o=JSON.parse(this.videoposition);e=o.imageWidth,t=o.parentWidth,a=o.imageWidth,r=$("#bigimg").width(),l=o.imageHeight,s=o.parentHeight,d=o.imageHeight,c=t-e,u=r-a,m=s-l,h=$("#bigimg").height()-d,p=o.left,g=o.top,_=parseFloat(c)/parseFloat(u),f=parseFloat(m)/parseFloat(h),v=parseFloat(p)/_,w=parseFloat(g)/f,$("#c2").css({left:v,top:w});var C=o.transform;if($(window).innerWidth()>767)if(1==Math.round(n/i)){$(".canvas_video").attr("style","max-height: 230px !important");o.percentTop;18;o.percentLeft;$("#c2").css({left:"initial"}),$("#c2").css({top:"initial"}),C=1.6,$("#c2").css({transform:"scale(".concat(C,")")})}$("#c2").css({transform:C})}disregardWidthPixels=x/5,customConsoleLog("New height and width are ",k," and ",x)},processor.timerCallback=function(){if(!this.video.paused&&!this.video.ended){this.computeFrame();var e=this;setTimeout((function(){e.timerCallback()}),60)}},processor.createGreenScreenBitmap=function(){this.ctx1.drawImage(this.greenscreen_image,0,0,this.width,this.height);for(var e=this.ctx1.getImageData(0,0,this.width,this.height).data,t=parseInt(e.length/4),o=0;o<t;o++){var a=e[4*o+0],i=r.r.indexOf(a),n=e[4*o+1],l=r.g.indexOf(n),s=e[4*o+2],d=r.b.indexOf(s);-1!==l&&l==i&&l==d||(r.r.push(a),r.g.push(n),r.b.push(s))}},processor.calculateDistance=function(e,t,o){return e<t?t-e:e>o?e-o:0},processor.computeFrame=function(){this.ctx1.drawImage(this.video,0,0,this.width,this.height);for(var e=this.ctx1.getImageData(0,0,this.width,this.height),t=e.data.length/4,o=(parseInt(this.height),parseInt(this.width)),a={r:e.data[0],g:e.data[1],b:e.data[2],a:e.data[3]},i=(e.data[4*o+0],e.data[4*o+1],e.data[4*o+2],e.data[4*o+3],e.data[4*(t-o-1)+0],e.data[4*(t-o-1)+1],e.data[4*(t-o-1)+2],e.data[4*(t-o-1)+3],e.data[4*(t-1)+0],e.data[4*(t-1)+1],e.data[4*(t-1)+2],e.data[4*(t-1)+3],parseInt(a.r)),n=parseInt(a.g),r=parseInt(a.b),l=(parseInt(a.a),0);l<t;l++){var s=e.data[4*l+0],d=e.data[4*l+1],c=e.data[4*l+2],u=this.rgb2hsv(s,d,c);(Math.abs(s-i)+Math.abs(d-n)+Math.abs(c-r)<toleranceTemp||u.h>minHueAngle&&u.h<maxHueAngle&&u.s>.5)&&(e.data[4*l+3]=0)}this.ctx2.putImageData(e,0,0)},processor.removePredefinedSection=function(e){var t=e.i,o=(e.imageHeight,e.imageWidth),a=t%o,i=!1;return(a<disregardWidthPixels||a>o-disregardWidthPixels)&&(i=!0),i},processor.rgb2hsv=function(){var e,t,o,a,i,n=arguments[0]/255,r=arguments[1]/255,l=arguments[2]/255,s=Math.max(n,r,l),d=s-Math.min(n,r,l),c=function(e){return(s-e)/6/d+.5};return 0==d?a=i=0:(i=d/s,e=c(n),t=c(r),o=c(l),n===s?a=o-t:r===s?a=1/3+e-o:l===s&&(a=2/3+t-e),a<0?a+=1:a>1&&(a-=1)),{h:a,s:i,v:s}},setTimeout((function(){/constructor/i.test(window.HTMLElement)||"[object SafariRemoteNotification]"===(!window.safari||safari.pushNotification).toString(),null!=window.chrome&&"Google Inc."===window.navigator.vendor,navigator.userAgent.toLowerCase().indexOf("firefox")>-1;var e=navigator.userAgent.toLowerCase();if(-1!=e.indexOf("safari")&&(e.indexOf("chrome")>-1||!0),"slideshowvideo"!=currentvideo){document.getElementById("introvideo");$("#safari_play").show()}}),2e3)}})),$(document).on("click",".street_view,.street_view_one",(function(){var e=this;home_latitude||home_longitude?0==$(e).attr("data-action")?($(e).attr("data-action",1),$(".street_view_text").text("Property Image"),$(".street_view_img").attr("src","/public/images/street-view12.png"),$(".img_center,.blur_img,.change").css("display","none"),$("#maps_view").css("display",""),0==$(e).attr("data-first_click")&&(street_map_initialize(),$(e).attr("data-first_click",1),setTimeout((function(){$("#street_map_view").css("position","unset")}),500))):($(e).attr("data-action",0),$(".street_view_text").text("Street View"),$(".street_view_img").attr("src","/public/images/street-view12.png"),$(".img_center,.blur_img,.change").css("display",""),$("#maps_view").css("display","none")):showErrorToast("Something Went Wrong.")})),$("#safari_play").click((function(){processor.doLoad(),$("#safari_play").hide()}));var lister=".item .property_thumb";function changeimage(e,t,o){var a;if(!e)e=window.event;e.target&&(a=e.target),$(a).addClass("active");var i="openmodel("+o+")";$("#bigimg").attr("src",t),$("#bigimg").css("background-image","url("+t+")"),$("#bigimg").parent().attr("onclick",i),1==$(".street_view").attr("data-action")&&$(".street_view").trigger("click"),openmodel(o)}function closeSlideModal(){$("#sliderModel").modal("hide")}function openmodel(e){var t=!0;if(0==$("#slider-modal-flexslider-slides li").length&&(t=!1),$("#sliderModel").modal("show"),!t){$("#slider-modal-flexslider-slides").html("");var o,a=_createForOfIteratorHelper(sliderModelList);try{for(a.s();!(o=a.n()).done;){var i=o.value;$("#slider-modal-flexslider-slides").append('<li> <img alt="'+i.alt+'" src="'+i.img+'" /> </li>')}}catch(e){a.e(e)}finally{a.f()}}$(".ss .current-slide").text(e+1),setTimeout((function(){$(".flexslider").flexslider({animation:"slide",slideshow:!1,controlNav:!1,directionNav:!0,prevText:"",nextText:"",minItems:1,startAt:e,controlsContainer:".flex-container",start:function(e){$(".ss .total-slides").text(e.count)},after:function(e){$(".ss .current-slide").text(e.currentSlide+1)}}),$(".flexslider").data("flexslider").flexAnimate(e),$(window).resize()}),500)}var isslideshowrunning=!1,spvideo=null;function startslideshow(){stophomevid(),fetchModalPopupAndShow({"popup-name":"slideshowmodal"},(function(){$("#slideshowmodal").modal({backdrop:"static",keyboard:!1}),$("#slideshowmodal").modal("show"),$(".first-slider").flexslider({slideshow:!1,animation:"slide",slideshowSpeed:5e3,animationSpeed:3e3,controlNav:!1,startAt:0,directionNav:!1,start:function(e){$(".fs .total-slides").text(e.count)},before:function(e){},after:function(e){$(".fs .current-slide").text(e.currentSlide+1)},end:function(e){}}),$(".fs .current-slide").text(1),setTimeout((function(){$(".flexslider").data("flexslider").flexAnimate(0),$(window).resize()}),500)}))}var touchtime=0;$(".first-slider img").on("click",(function(){0==touchtime?touchtime=(new Date).getTime():(new Date).getTime()-touchtime<800?(touchtime=0,isslideshowrunning||(isslideshowrunning=!0,openslideshow(0))):touchtime=(new Date).getTime()})),$(".first-slider img").dblclick((function(){}));var aerialVideo,audioindex=0,totalaudios=slideshowaudios.length;function createVideoSlider(){if(0!=is_user_login||1!=restrict_nonsignin_user||1==unbranded&&void 0!==unbranded){currentvideo="slideshowvideo",stophomevid();home_id;if($(".slideshow-property-text").html(slideshowText),firstSlideShow){var e,t=_createForOfIteratorHelper(slideshowImagesList);try{for(t.s();!(e=t.n()).done;){var o=e.value;$(".kenburn-slider .slides").append('<li><div class="slide-image" data-bg="'+o+'" data-kenburn-start="top left" style="background-size: contain;background-repeat: no-repeat;"></div></li>')}}catch(e){t.e(e)}finally{t.f()}firstSlideShow=!1}$("#splashvideo").hide(),$(".kenburn-slider").hide(),document.getElementById("splashvideo").style.display="block",$("#play_me").hide(),generateSlideShowLead(),audioindex=parseInt(getRandomNo()%totalaudios),$("#slideshowaudio").attr("src",audiopath+slideshowaudios[audioindex]),$("#slideshowaudio").get(0).muted=!0,$("#slideshowaudio").get(0).play(),$("#slideshowaudio").get(0).pause(),$("#slideshowaudio").get(0).currentTime=0,initializeSlideshowElements()}else openLoginPopup((function(){$("#login_modal").modal("show")}))}function openslideshow(e){var t=!0;currentvideo="slideshowvideo",stophomevid();var o=home_id;customConsoleLog("inopen"),$.ajax({url:web_url+"ajax/slideshow-lead",type:"post",data:{home_id:o},dataType:"json",success:function(e){1==e.status||isUnbranded||showErrorToast(e.message)},error:function(){showErrorToast("Something Went Wrong.")}}),$("#slideshowmodal").length||(t=!1),t=!0,fetchModalPopupAndShow({"popup-name":"slideshowmodal"},(function(){if(!t){initializeSlideshowElements(),$(".slideshow-property-text").html(slideshowText);var e,o=_createForOfIteratorHelper(slideshowImagesList);try{for(o.s();!(e=o.n()).done;){var a=e.value;$(".kenburn-slider .slides").append('<li><div class="slide-image" data-bg="'+a+'" data-kenburn-start="top left" style="background-size: contain;background-repeat: no-repeat;"></div></li>')}}catch(e){o.e(e)}finally{o.f()}$(".kenburn-slider .slides").append($(".slidershow-last-image-container").html()),$(".slidershow-last-image-container").remove()}initializeSlideshowElements(),$("#slideshowmodal").modal("show"),$("#splashvideo").show(),$(".kenburn-slider").hide(),document.getElementById("splashvideo").style.display="block",$("#slideshowmodal").modal({backdrop:"static",keyboard:!1}),spvideo.play(),spvideo.onwaiting=function(){$("#splashvideo").showLoading()},spvideo.onplaying=function(){$("#splashvideo").hideLoading()},spvideo.muted=!1,audioindex=parseInt(getRandomNo()%totalaudios),$("#slideshowaudio").attr("src",audiopath+slideshowaudios[audioindex]),$("#slideshowaudio").get(0).muted=!0,$("#slideshowaudio").get(0).play(),$("#slideshowaudio").get(0).pause(),$("#slideshowaudio").get(0).currentTime=0}))}function getRandomNo(){return 1e3*Math.random()}function initializeSlideshowElements(e){if(spvideo=document.getElementById("splashvideo"),ssaudio=document.getElementById("slideshowaudio"),ssaudio.addEventListener("ended",(function(){customConsoleLog("audio ended for index",audioindex),audioindex=parseInt(getRandomNo()%totalaudios),$("#slideshowaudio").attr("src",audiopath+slideshowaudios[audioindex]),$("#slideshowaudio").get(0).play()})),ssaudio.addEventListener("pause",(function(){customConsoleLog("audio pause")})),ssaudio.addEventListener("error",(function(){customConsoleLog("audio error")})),ssaudio.addEventListener("play",(function(){customConsoleLog("audio play"),$("#remove_slideshow_tab").show()})),!e){$("#slideshowaudio").get(0).play(),$("#slideshowaudio").get(0).muted=!1,document.getElementById("slideshowaudio").volume=1,$(".flex-caption").fadeIn("slow"),setTimeout((function(){$(".flex-caption").fadeOut()}),4e3),$("#splashvideo").hide(),$(".kenburn-slider").show(),$(".slide-image").each((function(){var e=$(this).data("bg"),t=$(this).data("kenburn-start");$(this).css({"background-image":"url("+e+")","transform-origin":t})}));var t=0,o=animationeffects.length,a=!0;$(".kenburn-slider").flexslider({startAt:0,slideshow:!0,slideshowSpeed:3e3,animationSpeed:2e3,controlNav:!1,start:function(e){a&&($(".kb .total-slides").text(e.count),$(".kb .current-slide").text(1),a=!1)},before:function(e){var a=animationeffects[t];t=(t+1)%o,$("li.flex-active-slide").next().children().attr("data-kenburn-start",a),$("li.flex-active-slide").next().children().css({"transform-origin":a,"-ms-transform-origin":a}),customConsoleLog(a),$(".current-slide").text(e.currentSlide+2)},after:function(e){},end:function(e){$(".last-slide-name").fadeIn(900),getSoundAndFadeAudio(),setTimeout((function(){$("#playpausebtn").hide(),$("#slideshowmodal").modal("hide"),$("#slideshowaudio").get(0).pause(),$("#slideshowaudio").get(0).currentTime=0,e.flexAnimate(0),$(".kenburn-slider").hide(),$(".kb .current-slide").text(1),$(".last-slide-name").fadeOut(),$(".kenburn-slider").flexslider("destroy"),currentvideo="",$("#splashvideo").show(),$("#play_me").show(),$("#remove_slideshow_tab").hide()}),3e3),isslideshowrunning=!1}})}}function canonicalfunadd(){$("LINK[rel*='canonical']").remove();var e=document.createElement("link");e.rel="canonical",e.href=location.origin+hppHandle,document.head.appendChild(e)}function generateLead(e){aerial_lead_generated||$.ajax({type:"POST",async:!1,url:web_url+"ajax/generate-aeriallead",data:{home_id:$("#home_id").val(),aerial:e,agent_id:$("#user_info").val()},success:function(e){aerial_lead_generated=!0},error:function(){}})}function generateSlideShowLead(){slideshow_lead_generated||$.ajax({url:web_url+"ajax/slideshow-lead",type:"post",data:{home_id:document.getElementById("home_id").value},dataType:"json",success:function(e){slideshow_lead_generated=!0,1==e.status||isUnbranded},error:function(){}})}function cropDescription(){$(".agency_name_cl").height()>13.6&&$("div#tab1 .search-content").addClass("company2lines");var e=$("#crop_content").text(),t=document.querySelector("#p_description");e.length;if(t)var o=setInterval((function(){var e=t.scrollHeight;if($(window).width()<1537&&(e=t.scrollHeight+0),t.offsetHeight<parseInt(e)){var a=$("#crop_content").css("font-size");a=a.replace("px",""),(a=parseInt(a))>12?$("#crop_content").css("font-size",a-1+"px"):($("#p_description").css("align-items","flex-start"),clearInterval(o))}else $("#p_description").css("align-items","center"),clearInterval(o)}),100)}function setSliderDivWidth(e){var t=$("#main_content_div").width(),o=$("#bigimg").width(),a=$("#main_image_div").css("padding-left");a=a.replace("px",""),a=parseInt(a);var i=t+o+8;1==e?i=$("#main_image_div").width():$("#slider_main").width(i);for(var n=0,r=i-130.23,l=1;l<40;l++){if(105*l>=r){n=l;break}}1==e&&(n-=1),changeNumberOfSlides(n,e)}function brochureFun(){broucherLoaded||(showBroucherLoading(),$(".brcoucher-pdf-cb").css("display","none !important"),$(".wrapper-portrait").show(),$("#flipbook").hide(),$(".flipbook .page").hide(),$(".flipbook_prev, .flipbook_next").hide(),$.ajax({type:"GET",url:web_url+"ajax/get-broucher/"+home_id,success:function(e){if(hideBroucherLoading(),e.status&&e.link&&1==e.is_custom){$(".brcoucher-pdf-cb").hide(),$("#flipbook").show(),$(".flipbook .page").show(),$(".wrapper-portrait").show(),$(".flipbook_prev, .flipbook_next").show(),e.layout>=5&&($("#tab7 .wrapper-portrait").addClass("wrapper-landscape"),$("#tab7 .aspect").addClass("aspect-landscape")),$("#tab7 .tab-inner-content").css("margin-top","10px"),$(".brcoucher-pdf-cb").hide(),brochure_pdf_link=e.file_path,brochure_pdf_stream=e.file_stream,broucherLoaded=!0,(e.links.length<=1||$(window).width()<=990)&&$(".flipbook_prev,.flipbook_next").hide();for(var t=0;t<=3;t++){var o="broucher_img"+(t+1);if(e.links[t])(n=document.getElementById(o))&&($(".wrapper-portrait").showLoading(),$("#"+o).on("load",(function(){$(".wrapper-portrait").hideLoading()})).attr("src",e.links[t]));else $("#"+o).parent(".page").remove()}if(e.links.length>1&&$(window).width()>990){var a=document.getElementById("flipbook");window.addEventListener("resize",(function(e){a.style.width="",a.style.height="",$(a).turn("size",a.clientWidth,a.clientHeight)})),$(a).turn({autoCenter:!0,acceleration:!isChrome(),duration:1e3,gradients:!0});var i=$(a).turn("pages");$(".flipbook_prev a").mousedown((function(){var e=$(a).turn("page");$(".flipbook_next a").removeClass("disabledcb"),$(".flipbook_prev a").removeClass("disabledcb"),1==e&&$(".flipbook_prev a").addClass("disabledcb"),$(a).turn("peel","tl")})).mouseup((function(){$(a).turn("options",{turnCorners:"bl,br"}),$(a).turn("previous");var e=$(a).turn("page");1!=e&&e!=i||$(".flipbook_prev a").addClass("disabledcb")})),$(".flipbook_next a").mousedown((function(){$(a).turn("page");$(".flipbook_next a").removeClass("disabledcb"),$(".flipbook_prev a").removeClass("disabledcb"),$(a).turn("peel","br")})).mouseup((function(){$(a).turn("options",{turnCorners:"tl,tr"}),$(a).turn("next");var e=$(a).turn("page");(e==i||3==i&&2==e)&&($("body").css("overflow","hidden"),$(".flipbook_next a").addClass("disabledcb"))})),$("#flipbook").bind("turning",(function(e,t,o){})),$("#flipbook").bind("turned",(function(e,t,o){$(".flipbook_next a").removeClass("disabledcb"),$(".flipbook_prev a").removeClass("disabledcb"),1==t&&$(".flipbook_prev a").addClass("disabledcb"),(t==i||3==i&&2==t)&&($("body").css("overflow","hidden"),$(".flipbook_next a").addClass("disabledcb"))}))}1==e.links.length&&$(window).width()>990&&$("#flipbook .page img#broucher_img1").css("border","1px solid lightgray")}else if(e.status&&e.link&&0==e.is_custom){var n;$(".brcoucher-pdf-cb").show(),$("#flipbook").hide(),$(".wrapper-portrait").hide(),$(".flipbook_prev, .flipbook_next").hide(),brochure_pdf_link=e.file_path,brochure_pdf_stream=e.file_stream,broucherLoaded=!0,(n=document.getElementById("broucher_img"))&&(n.src=e.link,n.style.height="100%"),$(".brcoucher-pdf-cb").showLoading(),$("#broucher_img").on("load",(function(){$(".brcoucher-pdf-cb").hideLoading()})).attr("src",e.link)}},error:function(){showErrorToast("Something went wrong."),hideBroucherLoading()}}))}function adjustFontSize(){var e=screen.width;screen.height;if(e>1024&&e<=1366){var t=$("#crop_content");if(t.text().length>600){var o=t.text(),a=(o=o.slice(0,300))+'<a href="javascript:void(0);" class=more-btn id="home-description-more-link" >MORE</a>';t.html(a)}else t.css("font-size","12px")}e>1366&&(description_text.text().length>600?description_text.css("font-size","12px"):description_text.css("font-size","14px"))}function generate_aeriallead(){var e=document.getElementById("home_id").value;if(0==logged_in_user_id&&1==restrict_30_seconds);else{e=document.getElementById("home_id").value;var t=document.getElementById("aerial").value,o=document.getElementById("agent_id").value;$.ajax({type:"POST",url:web_url+"ajax/generate-aeriallead",data:{home_id:e,aerial:t,agent_id:o},success:function(e){}})}}function generate_unbranded_aeriallead(){var e=document.getElementById("home_id").value;if(fetchModalPopupAndShow({"popup-name":"myModal"},(function(){$("#myModal").modal("show"),setupVideoPlayer({id:"aerialv",url:$("#unbranded_aerial").val(),modal:"myModal",restrict_30_seconds:restrict_30_seconds,home_id:e})})),0==logged_in_user_id&&1==restrict_30_seconds);else{e=document.getElementById("home_id").value;var t=document.getElementById("unbranded_aerial").value,o=document.getElementById("agent_id").value;$.ajax({type:"POST",url:web_url+"ajax/generate-aeriallead",data:{home_id:e,aerial:t,agent_id:o},success:function(e){}})}}function generate_vimeo_aeriallead(){var e=document.getElementById("home_id").value;if(fetchModalPopupAndShow({"popup-name":"myModal"},(function(){$("#myModal").modal("show"),$("#myModal #aerialv").hide(),setupVimeoVideoPlayer({id:"unbrandedaerialv",url:$("#aerial").val(),modal:"myModal",restrict_30_seconds:restrict_30_seconds,home_id:e})})),0==logged_in_user_id&&1==restrict_30_seconds);else{e=document.getElementById("home_id").value;var t=document.getElementById("aerial").value,o=document.getElementById("agent_id").value;$.ajax({type:"POST",url:web_url+"ajax/generate-aeriallead",data:{home_id:e,aerial:t,agent_id:o},success:function(e){}})}}function generate_vimeo_unbranded_aeriallead(){var e=document.getElementById("home_id").value;if(fetchModalPopupAndShow({"popup-name":"myModal"},(function(){$("#myModal").modal("show"),$("#myModal #aerialv").hide(),setupVimeoVideoPlayer({id:"unbrandedaerialv",url:$("#unbranded_aerial").val(),modal:"myModal",restrict_30_seconds:restrict_30_seconds,home_id:e})})),0==logged_in_user_id&&1==restrict_30_seconds);else{e=document.getElementById("home_id").value;var t=document.getElementById("unbranded_aerial").value,o=document.getElementById("agent_id").value;$.ajax({type:"POST",url:web_url+"ajax/generate-aeriallead",data:{home_id:e,aerial:t,agent_id:o},success:function(e){}})}}function playssaudio(){var e=imagepathss;$("#playpausebtn").toggleClass("play"),$("#playpausebtn").hasClass("play")?($("#playpauseimg").attr("src",e+"sound-on.png"),$("#slideshowaudio").get(0).play()):($("#playpauseimg").attr("src",e+"sound-off.png"),$("#slideshowaudio").get(0).pause(),$("#slideshowaudio").get(0).currentTime=0)}function clearkenburn(){setTimeout((function(){$(".kenburn-slider li").each((function(){$(this).css("opacity","0"),$(this).removeClass("flex-active-slide")}))}),2e3)}function getSoundAndFadeAudio(){customConsoleLog("in fade out");var e=document.getElementById("slideshowaudio"),t=(e.duration,setInterval((function(){e.volume>.1&&(e.volume-=.1);var o=parseFloat(e.volume.toFixed(1));customConsoleLog(o),.1==o&&(e.volume=0,customConsoleLog("clear interval"),clearInterval(t))}),200))}function generate_threedlead(){var e=document.getElementById("home_id").value,t=document.getElementById("threed").value,o=(document.getElementById("redurl").value,document.getElementById("agent_id").value);threed_lead_generated||$.ajax({type:"POST",url:web_url+"ajax/generate-threedlead",data:{home_id:e,threed:t,agent_id:o},success:function(e){threed_lead_generated=!0}})}function generate_brochureViewLead(){var e=document.getElementById("home_id").value;brochureview_lead_generated||$.ajax({type:"POST",url:web_url+"ajax/generate-brochureviewlead",data:{home_id:e},success:function(e){brochureview_lead_generated=!0}})}function generateWalkthroughLead(){var e=document.getElementById("home_id").value;walkthrough_lead_generated||$.ajax({url:web_url+"ajax/generate-walkthroughlead",type:"post",data:{home_id:e},dataType:"json",success:function(e){walkthrough_lead_generated=!0,1==e.status||isUnbranded},error:function(e){}})}function generate_threedrequest(){$("#threedrequest").showLoading(),$("#threedrequest").attr("onclick","javascript:void(0);");var e=document.getElementById("home_id").value,t=document.getElementById("agent_id").value;$.ajax({type:"POST",url:web_url+"ajax/generate-threedrequest",data:{home_id:e,agent_id:t},success:function(e){$("#threedrequest").hideLoading(),showSuccessToast("Your request has been submitted. Thank you!")},error:function(){$("#threedrequest").hideLoading(),showErrorToast("Something went wrong.")}})}function generate_aerialrequest(){$("#aerialrequest").showLoading(),$("#aerialrequest").attr("onclick","javascript:void(0);");var e=document.getElementById("home_id").value,t=document.getElementById("agent_id").value;$.ajax({type:"POST",url:web_url+"ajax/generate-aerialrequest",data:{home_id:e,agent_id:t},success:function(e){$("#aerialrequest").hideLoading(),showSuccessToast("Your request has been submitted. Thank you!")},error:function(){$("#aerialrequest").hideLoading()}})}function goback(){window.location.href=web_url}function closevideo(){var e=document.getElementById("aerialv");e.src=e.src}function closeslideshow(){$(".flex-caption").show(),$("#playpausebtn").hide(),$("#slideshowaudio").get(0).pause(),$("#slideshowaudio").get(0).currentTime=0,isslideshowrunning=!1,$("#splashvideo").show(),$("#remove_slideshow_tab").hide(),$("#play_me").show();var e=$(".kenburn-slider").data("flexslider");e&&e.flexAnimate(1),$(".kenburn-slider").flexslider("destroy"),$(".kenburn-slider").hide()}firstSlideShow=!0,$(".rahul-tabs li").click((function(){var e=$(this),t=e.attr("class");if(t=t.trim(),localStorage.setItem("current_tab",t),"overview_tab"==t&&(isDescriptionCalled||e.children("a").hasClass("notfirst")&&(cropDescription(),setTimeout((function(){setSliderDivWidth(mediaSlider)}),1e3),isDescriptionCalled=!0)),"aerialvideo_tab"!=t&&stopVideoPlayer(),"3dtour_tab"==t&&generate_threedlead(),"brochure_tab"==t&&generate_brochureViewLead(),"slideshow_tab"!=t)try{closeslideshow()}catch(e){}})),$(".rahul-new-tabs li").click((function(){$(".rahul-new-tabs li").each((function(){var e=$(this).children().first().attr("data-href");$(e).removeClass("active")}));var e=$(this).children().first().attr("data-href");$(e).addClass("active");var t=$(this),o=t.attr("class");if(o=o.trim(),localStorage.setItem("current_tab",o),"walkthrough_tab"==o?walkthroughAutoplayModal():(walkthroughAudioPause(),$("#walkthrough_iframe").attr("src","")),"overview_tab"==o&&(isDescriptionCalled||t.children("a").hasClass("notfirst")&&(cropDescription(),setTimeout((function(){setSliderDivWidth(n)}),1e3),isDescriptionCalled=!0)),"aerialvideo_tab"!=o&&stopVideoPlayer(),"3dtour_tab"==o&&generate_threedlead(),"brochure_tab"==o&&generate_brochureViewLead(),"slideshow_tab"!=o)try{closeslideshow()}catch(e){}if("unbranded"!=handle1&&"unbranded"!=handle){if($(".rahul-new-tabs li.active").children().first().html($(".rahul-new-tabs li.active").children().first().text()),"map-school-tab"==o){var a=location.origin+hppHandle+"/maps-schools",i={Page:hppHandle,Url:a};history.pushState(i,i.Page,i.Url),$("meta[property='og:title']").attr("content",resultCheck.map_schools_meta.title),$("meta[property='og:description']").attr("content",resultCheck.map_schools_meta.description),$("meta[name='description']").attr("content",resultCheck.map_schools_meta.description),$("meta[property='og:url']").attr("content",a),$(".h1-data").html('<span itemprop="streetAddress">'+resultCheck.map_schools_meta.h1+"</span>"),$(this).children().first().html("<h2>"+$(this).children().first().text().toUpperCase()+"</h2>"),$(document).prop("title",resultCheck.map_schools_meta.title),canonicalfunadd()}if("3dtour_tab"==o){a=location.origin+hppHandle+"/3d-tour",i={Page:hppHandle,Url:a};history.pushState(i,i.Page,i.Url),$("meta[property='og:title']").attr("content",resultCheck.threedtour_meta.title),$("meta[property='og:description']").attr("content",resultCheck.threedtour_meta.description),$("meta[name='description']").attr("content",resultCheck.threedtour_meta.description),$("meta[property='og:url']").attr("content",a),$(".h1-data").html('<span itemprop="streetAddress">'+resultCheck.threedtour_meta.h1+"</span>"),$(this).children().first().html("<h2>"+$(this).children().first().text().toUpperCase()+"</h2>"),$(document).prop("title",resultCheck.threedtour_meta.title),canonicalfunadd()}if("aerialvideo_tab"==o){a=location.origin+hppHandle+"/aerial-video",i={Page:hppHandle,Url:a};history.pushState(i,i.Page,i.Url),$("meta[property='og:title']").attr("content",resultCheck.aerial_meta.title),$("meta[property='og:description']").attr("content",resultCheck.aerial_meta.description),$("meta[name='description']").attr("content",resultCheck.aerial_meta.description),$("meta[property='og:url']").attr("content",a),$(".h1-data").html('<span itemprop="streetAddress">'+resultCheck.aerial_meta.h1+"</span>"),$(this).children().first().html("<h2>"+$(this).children().first().text().toUpperCase()+"</h2>"),$(document).prop("title",resultCheck.aerial_meta.title),canonicalfunadd(),$(".aerialvideos .vjs-big-play-button").trigger("click")}if("floorplan_tab"==o){a=location.origin+hppHandle+"/floor-plan",i={Page:hppHandle,Url:a};history.pushState(i,i.Page,i.Url),$("meta[property='og:title']").attr("content",resultCheck.floor_meta.title),$("meta[property='og:description']").attr("content",resultCheck.floor_meta.description),$("meta[name='description']").attr("content",resultCheck.floor_meta.description),$("meta[property='og:url']").attr("content",a),$(".h1-data").html('<span itemprop="streetAddress">'+resultCheck.floor_meta.h1+"</span>"),$(this).children().first().html("<h2>"+$(this).children().first().text().toUpperCase()+"</h2>"),$(document).prop("title",resultCheck.floor_meta.title),canonicalfunadd()}if("slideshow_tab"==o){a=location.origin+hppHandle+"/slideshow",i={Page:hppHandle,Url:a};history.pushState(i,i.Page,i.Url),$("meta[property='og:title']").attr("content",resultCheck.slideshow_meta.title),$("meta[property='og:description']").attr("content",resultCheck.slideshow_meta.description),$("meta[name='description']").attr("content",resultCheck.slideshow_meta.description),$("meta[property='og:url']").attr("content",a),$(".h1-data").html('<span itemprop="streetAddress">'+resultCheck.slideshow_meta.h1+"</span>"),$(this).children().first().html("<h2>"+$(this).children().first().text().toUpperCase()+"</h2>"),$(document).prop("title",resultCheck.slideshow_meta.title),canonicalfunadd()}if("brochure_tab"==o){a=location.origin+hppHandle+"/brochure",i={Page:hppHandle,Url:a};history.pushState(i,i.Page,i.Url),$("meta[property='og:title']").attr("content",resultCheck.brochure_meta.title),$("meta[property='og:description']").attr("content",resultCheck.brochure_meta.description),$("meta[name='description']").attr("content",resultCheck.brochure_meta.description),$("meta[property='og:url']").attr("content",a),$(".h1-data").html('<span itemprop="streetAddress">'+resultCheck.brochure_meta.h1+"</span>"),$(this).children().first().html("<h2>"+$(this).children().first().text().toUpperCase()+"</h2>"),$(document).prop("title",resultCheck.brochure_meta.title),canonicalfunadd()}if("walkthrough_tab"==o){a=location.origin+hppHandle+"/walkthrough",i={Page:hppHandle,Url:a};history.pushState(i,i.Page,i.Url),$("meta[property='og:title']").attr("content",resultCheck.walkthrough_meta.title),$("meta[property='og:description']").attr("content",resultCheck.walkthrough_meta.description),$("meta[name='description']").attr("content",resultCheck.walkthrough_meta.description),$("meta[property='og:url']").attr("content",a),$(".h1-data").html('<span itemprop="streetAddress">'+resultCheck.walkthrough_meta.h1+"</span>"),$(this).children().first().html("<h2>"+$(this).children().first().text().toUpperCase()+"</h2>"),$(document).prop("title",resultCheck.walkthrough_meta.title),canonicalfunadd()}if("guidedtour_tab"==o){a=location.origin+hppHandle+"/guided-tour",i={Page:hppHandle,Url:a};history.pushState(i,i.Page,i.Url),$("meta[property='og:title']").attr("content",resultCheck.guided_meta.title),$("meta[property='og:description']").attr("content",resultCheck.guided_meta.description),$("meta[name='description']").attr("content",resultCheck.guided_meta.description),$("meta[property='og:url']").attr("content",a),$(".h1-data").html('<span itemprop="streetAddress">'+resultCheck.guided_meta.h1+"</span>"),$(this).children().first().html("<h2>"+$(this).children().first().text().toUpperCase()+"</h2>"),$(document).prop("title",resultCheck.guided_meta.title),canonicalfunadd()}if("overview_tab"==o){a=location.origin+hppHandle,i={Page:hppHandle,Url:a};history.pushState(i,i.Page,i.Url),$("meta[property='og:title']").attr("content",resultCheck.overview_meta.title),$("meta[property='og:description']").attr("content",resultCheck.overview_meta.description),$("meta[name='description']").attr("content",resultCheck.overview_meta.description),$("meta[property='og:url']").attr("content",a),$(".h1-data").html('<span itemprop="streetAddress">'+resultCheck.overview_meta.h1+"</span>"),$(document).prop("title",resultCheck.overview_meta.title),$("LINK[rel*='canonical']").remove();var n=0;window.innerWidth<=991&&(n=1),$(".carousel-inner").empty(),setTimeout((function(){setSliderDivWidth(n)}),1e3),cropDescription()}}})),$(window).resize((function(){var e=0;window.innerWidth<=991&&(e=1),$(".carousel-inner").empty(),setSliderDivWidth(e),cropDescription()})),$(document).ready((function(){$(".slideshow-property-text").html(slideshowText),$(".flex-caption").show(),setTimeout((function(){cropDescription()}),1e3),$("#remove_slideshow_tab").hide();var e=$("#aerial").val();if(isUnbranded)e=$("#unbranded_aerial").val();document.getElementById("home_id").value;if(e){$(".aerialvideos").find("#aerialv").attr("src",e);if(e.indexOf("player.vimeo.com")<0&&e.indexOf("vimeo.com")>-1){var t=e.replace("vimeo.com","player.vimeo.com/video"),o=t.substring(0,t.lastIndexOf("/")+1),a=o.substring(0,o.lastIndexOf("/")),i=(a.substring(a.lastIndexOf("/")+1,a.length),a+"?h="+t.substring(t.lastIndexOf("/")+1,t.length));$(".aerialvideos").find("#aerialv").attr("src",i)}}$(".rahul-new-tabs li a").on("click",(function(){$("#tab3").find("#aerialv").attr("src",$("#tab3").find("#aerialv").attr("src"))})),initializeSlideshowElements(!0),$(".fa-heart-o").on("click",(function(){$(this).addClass(".fa-heart"),$(this).removeClass(".fa-heart-o")})),$(".fa-heart").on("click",(function(){$(this).addClass(".fa-heart-o"),$(this).removeClass(".fa-heart")})),$(".threeDvideo iframe").iframeTracker({blurCallback:function(e){videoClicked||(videoClicked=!0,0==logged_in_user_id&&1==restrict_30_seconds&&0==parseInt(unbranded)&&setTimeout((function(){open30SecondRestrictionPopup(home_id,{restrict_30_seconds:restrict_30_seconds,restrict_30_seconds_action:"restrict_30_seconds_3d"}),$("#threed-iframe-container iframe").attr("src",$("#threed-iframe-container iframe").attr("src")),videoClicked=!1}),15e3))},overCallback:function(e,t){this._overId=$(e).parents(".iframe-container").attr("id")},outCallback:function(e,t){this._overId=null},_overId:null}),"floor-plan"==handle1&&(floorplanLoaded||(console.time("first"),$(".floor-plan-toimg").showLoading(),$.ajax({type:"GET",url:web_url+"ajax/get-floorplan/"+home_id,success:function(e){if(e.status&&e.link){floorplanLoaded=!0;var t=document.getElementById("floor_plan_image");if(t.src=e.link,t.style.width="94%",1==e.include_2nd_building){var o=document.getElementById("second_floor_plan_image");o.src=e.second_link,o.style.width="94%",$(".showNextFloorPlan").show(),$("#download-floor-plan").attr("data-temp",e.second_pdf_link)}}$(".floor-plan-toimg").hideLoading()},error:function(){showErrorToast("Something went wrong."),$(".floor-plan-toimg").hideLoading()}}))),"brochure"==handle1&&brochureFun(),"guided-tour"==handle1&&home_id&&!guidedTourLoaded&&($(".guided-tour-main").showLoading(),$.ajax({type:"GET",url:web_url+"ajax/guided-tour/tour/"+home_id,success:function(e){$(".guided-tour-main").hideLoading(),e.status?(guidedTourLoaded=!0,e.tour_data&&(tourData=e.tour_data,e.default_image&&e.default_floor?showTour(e.default_image,e.default_floor):showTour())):e.message?showErrorToast(e.message):showErrorToast("Something went wrong.")},error:function(){showErrorToast("Something went wrong."),$(".guided-tour-main").hideLoading()}}))})),$(document).on("click","#remove_slideshow_tab",(function(){closeslideshow()}));var __PDF_DOC,__CURRENT_PAGE,__TOTAL_PAGES,__PAGE_RENDERING_IN_PROGRESS=0,__CANVAS="",__CANVAS_CTX="";function tax_details_show(){$.alert({title:"",content:"The property tax amount shown is based on property taxes assessed for the most recent tax year.  This amount may increase or decrease as a result of the new selling price."})}function showPDF(e){$(".floor-plan-toimg").showLoading(),$("#pdf-loader").show(),pdfjsLib.getDocument({url:e}).then((function(e){__TOTAL_PAGES=(__PDF_DOC=e).numPages,$("#pdf-loader").hide(),$("#pdf-contents").show(),$("#pdf-total-pages").text(__TOTAL_PAGES),showPage(1)})).catch((function(e){$("#pdf-loader").hide(),$("#upload-button").show(),alert(e.message)}))}function showPage(e){__PAGE_RENDERING_IN_PROGRESS=1,__CURRENT_PAGE=e,$("#pdf-next, #pdf-prev").attr("disabled","disabled"),$("#pdf-canvas").show(),$("#page-loader").show(),$("#pdf-current-page").text(e),__PDF_DOC.getPage(e).then((function(e){__CANVAS.width,e.getViewport(1).width;var t=e.getViewport(2);__CANVAS.width=t.width,__CANVAS.height=t.height;var o={canvasContext:__CANVAS_CTX,viewport:t};e.render(o).then((function(){__PAGE_RENDERING_IN_PROGRESS=0,$("#pdf-next, #pdf-prev").removeAttr("disabled");var e=__CANVAS.toDataURL(),t=document.getElementById("floor_plan_image");t.src=e,t.style.width="98%",$("#pdf-canvas").hide(),$("#page-loader").hide(),$(".floor-plan-toimg").hideLoading()}))}))}home_floor_plan_url&&(__CANVAS=$("#pdf-canvas").get(0),__CANVAS_CTX=__CANVAS.getContext("2d"));var floorPlanPdfLink="";function generateFloorPlanLead(e){if(!is_user_login)return openLoginPopup((function(){useraction="floor-plan-download",agentid=home_id,$("#login_modal").modal("show")})),!1;var t=$(e);floorPlanPdfLink=t.attr("data-href"),t.showLoading(),$.ajax({url:web_url+"ajax/generate-floorplan-lead",type:"post",data:{home_id:home_id,user_id:is_user_login,web_request:1},dataType:"json",success:function(e){t.hideLoading(),1==e.status&&(window.location.href=web_url+"download-floor-plan-pdf?pdf_url="+floorPlanPdfLink)},error:function(){t.hideLoading(),showErrorToast("Something Went Wrong.")}})}function initiateMortgageComponents(){interestDropdown=$("#loan-term-dropdown"),resetMortgageInputs(),$popoverTrigger="hover",$(window).width()<=767&&($popoverTrigger="click"),$(".insurance-price-per-year").popover({html:!0,title:"",trigger:"hover",content:"<p class='mortgage_text'>This is an estimated amount only.  According to the Federal Reserve Bureau, for most homeowners, the annual cost for a homeowners insurance policy can be estimated by dividing the value of the home by 1,000, then multiplying the result by $3.50.  If would like a more accurate estimate please contact the home insurance agent shown above.</p>",placement:"left"})}function openLoginPopupForMortgageCalculator(){var e=!0;$("#mortgage-calculator-modal").length&&(e=!1),fetchModalPopupAndShow({"popup-name":"mortgage-calculator-modal"},(function(){if(e){$("#loan-term-dropdown").html("");var t,o=_createForOfIteratorHelper(mortgageDataList);try{for(o.s();!(t=o.n()).done;){var a=t.value;$("#loan-term-dropdown").append('<option value="'+a.rate+'" data-years="'+a.years+'">'+a.label+"</option>")}}catch(e){o.e(e)}finally{o.f()}$("#selling-price-input").val(home_original_price).attr("data-old-price",home_original_price).attr("data-max-price",max_selling_price),void 0===google.charts&&(mortgagePopUpOpenedOnce||(loadScriptAsync({"script-url":chartJsURL},(function(){google.charts.load("current",{packages:["corechart"]}),google.charts.setOnLoadCallback(calculatePrincipalAmount)}),(function(){})),mortgagePopUpOpenedOnce=!0))}$("#mortgage-calculator-modal").modal("show"),initiateMortgageComponents()}))}function resetMortgageInputs(){home_price=Number(home_original_price),sellingPriceInput=$("#selling-price-input"),downpaymentPercentage=20,downpaymentPriceTextObj=$("#downpayment-price"),downpaymentPercentageTextObj=$("#downpayment-price-percentage"),$("#selling-price-slider").length&&(priceSlider=$("#selling-price-slider").slider({range:"max",min:1,max:max_selling_price,value:home_price,create:function(){},slide:function(e,t){updateSellingPrice(t.value)}})),updateSellingPrice(home_price),interestTextObj=$("#interest-rate-percentage"),interestTextObj.length&&interestDropdown.find("option:nth-child(0)").prop("selected",!0),changeLoanTerm()}function updateSellingPrice(e){var t=cleanPriceValue((""+e).replace("$","")),o=Number(sellingPriceInput.attr("data-max-price")),a=Number(sellingPriceInput.attr("data-old-price"));t||(t=1),o&&t>o&&(t=a),priceSlider&&priceSlider&&priceSlider.slider("value",t),sellingPriceInput&&sellingPriceInput.length&&sellingPriceInput.val("$"+convertToPriceFormat(t)).attr("data-old-price",t),home_price=Number(t),insuranceAmountPerYear=Math.floor(home_price/1e3*3.5),insuranceAmountFixed=Number(12*Number(Math.floor(insuranceAmountPerYear/12))),$("#downpayment-price-slider").length&&(downpaymentSlider=$("#downpayment-price-slider").slider({range:"max",min:0,max:100,value:downpaymentPercentage,create:function(){},slide:function(e,t){updateDownPayment(t.value)}})),updateDownPayment(downpaymentPercentage)}function updateDownPayment(e){downpaymentPercentage=e,downpaymentPrice=Math.floor(downpaymentPercentage*home_price/100),downpaymentPercentageTextObj&&downpaymentPercentageTextObj.length&&downpaymentPercentageTextObj.text(downpaymentPercentage),downpaymentPriceTextObj&&downpaymentPriceTextObj.length&&downpaymentPriceTextObj.text(convertToPriceFormat(parseInt(downpaymentPrice))),loanAmount=home_price-downpaymentPrice,calculatePrincipalAmount()}function updateInterestRate(e){interestRate=Number(e),interestTextObj&&interestTextObj.length&&interestTextObj.text(interestRate),calculatePrincipalAmount()}function changeLoanTerm(){var e=interestDropdown.find("option:selected");interestDropdown.length&&(interestRate=Number(e.attr("value")),interestYears=Number(e.attr("data-years"))),$("#interest-rate-percentage-slider").length&&(interestSlider=$("#interest-rate-percentage-slider").slider({min:.01,max:2*Math.floor(interestRate),step:.01,value:interestRate,create:function(){},slide:function(e,t){updateInterestRate(t.value)}})),updateInterestRate(interestRate),calculatePrincipalAmount()}function calculatePrincipalAmount(){if(interestRate&&monthDuration&&interestYears){if(PMTAmount=Math.floor(loanAmount*(interestRate/(100*monthDuration))/(1-Math.pow(1+interestRate/(100*monthDuration),-monthDuration*interestYears))),monthlyMortgagePrice=Math.floor(PMTAmount+property_tax/12+insuranceAmountFixed/12),$(mortgagePriceTextSelector).length&&$(mortgagePriceTextSelector).text(convertToPriceFormat(parseInt(monthlyMortgagePrice))),$(mortgagePriceTextSelector).is(":visible")||$(".main-mortgage-monthly-payment-amount").html(convertToPriceFormat(parseInt(monthlyMortgagePrice))),$("#pmt-amount").length&&($("#pmt-amount").text(parseInt(PMTAmount)),$("#insurance-amount").text(parseInt(insuranceAmountFixed))),$(".insurance-price-per-year").text("$"+convertToPriceFormat(parseInt(insuranceAmountFixed))),$("#mortgage-chart-element").length){if(void 0===google.charts)return;google.charts.load("current",{packages:["corechart"]}),customConsoleLog("creating chart");var e=google.visualization.arrayToDataTable([["Name","Data"],["Principal and Interest",parseInt(PMTAmount)],["Property Taxes",parseInt(property_tax/12)],["Insurance/yr $"+parseInt(insuranceAmountFixed),parseInt(insuranceAmountFixed/12)]]);new google.visualization.PieChart(document.getElementById("mortgage-chart-element")).draw(e,{title:"",colors:["#003D5E","#f89425","#808080"],pieSliceText:"none",height:180,width:180,legend:"none"})}}}function changevalue(e){var t=document.getElementById(e).value,o=cleanPriceValue(t);document.getElementById(e).value=convertToPriceFormat(t),$("#"+e).attr("data-clean-value",o)}function cleanPriceValue(e){return e.toString().replace(/,/g,"")}function convertToPriceFormat(e){return e.toString().replace(/,/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,",")}function isFloat(e,t){var o=e.which?e.which:e.keyCode;return 46!=o&&o>31&&(o<48||o>57)&&44!=o?(showErrorToast("Only numbers and commas are permitted in this field. No letters or special characters."),!1):!(e.target.value.split(".").length>1&&46==o&&44==o)}function showTour(e,t){if(tourData){showFirst=!0,floor=tourData[0].floor,t&&(floor=t);var o="";e&&(o=e),appendViewImages(floor,o);for(var a=0;a<tourData.length;a++){var i=$("#floor_detail").html();i=i.replace(/{floor}/g,tourData[a].floor);var n="Floor "+tourData[a].floor;tourData[a].title&&(n=tourData[a].title),i=i.replace(/{title}/g,n),$(".floors").append(i),tourData[a].floor==floor&&$("#floor_"+tourData[a].floor).addClass("active")}dragElement(document.getElementById("main_view"))}}function appendViewImages(e,t){if(tourData)for(var o=0;o<tourData.length;o++)if(tourData[o].floor==e){$(".main-image-div").showLoading();var a="";tourData[o].images[0]&&(a=tourData[o].images[0].image);var i=tourData[o].floorplan_crop;$(".floor-image").on("load",(function(){$(".main-image-div").hideLoading()})).attr("src",i);for(var n=0;n<tourData[o].images.length;n++)if(tourData[o].images[n]){var r=document.createElement("img");zoomFloorPlan?(r.style.height="30px",r.style.width="30px"):(r.style.height="17px",r.style.width="17px"),r.style.position="absolute",showFirst?t?t==tourData[o].images[n].id?(r.src=$("#activeimage").val(),r.className="viewimage active",a=tourData[o].images[n].image,showFirst=!1):(r.src=$("#dragimage").val(),r.className="viewimage"):(r.src=$("#activeimage").val(),r.className="viewimage active",showFirst=!1):(r.src=$("#dragimage").val(),r.className="viewimage"),r.dataset.img_id=tourData[o].images[n].image,r.style.top=tourData[o].images[n].top+"%",r.style.left=tourData[o].images[n].left+"%",$("#main_view").append(r)}$(".main-image").attr("src",a);break}}function createViewImage(e,t){var o=document.createElement("img");return o.style.height="17px",o.style.width="17px",o.style.position="absolute",o.src=t,o.dataset.img_id=e,o.className="viewimage",o.id="viewimage_"+e,o}function dragElement(e){var t=0,o=0,a=0,i=0,n=Math.max(document.getElementById("tab6").clientWidth||0),r=(Math.max(document.getElementById("tab6").clientHeight||0),$("#tab6").scrollTop(),document.getElementById("main_view").clientWidth);document.getElementById("main_view").clientHeight;function l(l){if((l=l||window.event).preventDefault(),!zoomFloorPlan){p={top:l.clientY,left:l.clientX};var s=$("#tab6").position();if(p.top<=s.top||p.left<=s.left)return;var d=$("#main_view").position(),c=p.left+r-45;d.top;if(c>n)return;t=a-l.clientX,o=i-l.clientY,a=l.clientX,i=l.clientY,e.style.top=e.offsetTop-o+"px",e.style.left=e.offsetLeft-t+"px"}}function s(){document.onmouseup=null,document.onmousemove=null}document.getElementById("move_floor_plan")&&(document.getElementById("move_floor_plan").onmousedown=function(e){(e=e||window.event).preventDefault(),a=e.clientX,i=e.clientY,document.onmouseup=s,document.onmousemove=l})}$(document).ready((function(){var e=$(".rahul-new-tabs li.active").children().first().text();if($(".rahul-new-tabs li.active").children().first().html("<h2>"+e+"</h2>"),0==$(".rahul-new-tabs li.active").length){if($(".tab-content .tab-pane").each((function(){$(this).removeClass("active")})),"unbranded"!=handle&&"unbranded"!=handle1){var t=location.origin+hppHandle,o={Page:hppHandle,Url:t};history.pushState(o,o.Page,o.Url),$("meta[property='og:title']").attr("content",resultCheck.overview_meta.title),$("meta[property='og:description']").attr("content",resultCheck.overview_meta.description),$("meta[name='description']").attr("content",resultCheck.overview_meta.description),$("meta[property='og:url']").attr("content",t),$(".h1-data").html('<span itemprop="streetAddress">'+resultCheck.overview_meta.h1+"</span>"),$(document).prop("title",resultCheck.overview_meta.title)}$(".overview_tab").addClass("active"),$("#tab1").addClass("active")}show_login_popup&&openLoginPopup((function(){$("#login_modal").modal("show")}))})),$(document).on("click",".show-guided-tour",(function(){home_id&&!guidedTourLoaded&&($(".guided-tour-main").showLoading(),$.ajax({type:"GET",url:web_url+"ajax/guided-tour/tour/"+home_id,success:function(e){$(".guided-tour-main").hideLoading(),e.status?(guidedTourLoaded=!0,e.tour_data&&(tourData=e.tour_data,e.default_image&&e.default_floor?showTour(e.default_image,e.default_floor):showTour())):e.message?showErrorToast(e.message):showErrorToast("Something went wrong.")},error:function(){showErrorToast("Something went wrong."),$(".guided-tour-main").hideLoading()}}))})),$(document).on("click",".viewimage",(function(){$(".main-image-div").showLoading();var e=$(this).data("img_id");$(".viewimage.active").attr("src",$("#dragimage").val()),$("#main_view .viewimage").removeClass("active"),$(this).addClass("active").attr("src",$("#activeimage").val()),$(".main-image").on("load",(function(){$(".main-image-div").hideLoading()})).attr("src",e)})),$(document).on("click",".show-floors",(function(){$(".floors").slideToggle("slow")})),$(document).on("click",".floor-change",(function(){var e=$(this).data("floor");e!=floor&&(floor=e,showFirst=!0,$("#main_view .viewimage").remove(),appendViewImages(floor),$(".floors .floor").removeClass("active"),$(this).parent().addClass("active"))})),$(document).on("click",".close-floor-plan",(function(){$("#main_view").hide(),$("#image_view").show()})),$(document).on("click","#image_view",(function(){$("#main_view").show(),$("#image_view").hide()})),$(document).on("click",".zoom-floor-plan",(function(){$("#main_view").hasClass("zoomed-floor-plan")?($("#main_view").removeClass("zoomed-floor-plan"),$(".guided-tour-main").removeClass("main-zoom"),$(".viewimage").css("height","17px"),$(".viewimage").css("width","17px"),zoomFloorPlan=!1,$("#zoom_in_floor").show(),$("#zoom_out_floor").hide()):($(".viewimage").css("height","30px"),$(".viewimage").css("width","30px"),$("#main_view").addClass("zoomed-floor-plan"),$(".guided-tour-main").addClass("main-zoom"),zoomFloorPlan=!0,$("#zoom_in_floor").hide(),$("#zoom_out_floor").show())}));var previousX,previousY,clicking=!1;function showBroucherLoading(){$(".wrapper-portrait").showLoading()}function hideBroucherLoading(){$(".wrapper-portrait").hideLoading()}function sell_agent_loading_show_contact(){$("#sell_contact_agent_modal #sell_contact_agent_loading").showLoading()}function sell_agent_loading_hide_contact(){$("#sell_contact_agent_modal #sell_contact_agent_loading").hideLoading()}function submit_phone_contact(e,t,o,a){$(".additional_information_mobile").showLoading(),$.ajax({url:web_url+"ajax/contact-agent-home",type:"post",data:{first_name:e,last_name:t,email:o,phone:a,home_id:home_id},dataType:"json",success:function(e){1==e.status?(agent_contact_displayed=!0,$(".additional_information_mobile").hideLoading(),agent_details_show()):($(".additional_information_mobile").hideLoading(),showSuccessToast(e.message)),hideagentphonemodal()},error:function(){hideagentphonemodal(),$(".additional_information_mobile").hideLoading(),showErrorToast("Something Went Wrong.")}})}function hideagentphonemodal(){$("#property_phone_agent_modal").is(":visible")&&$("#property_phone_agent_modal").modal("hide")}$(document).on("mousedown","#floor_plan_image_div",(function(e){e.preventDefault(),previousX=e.clientX,previousY=e.clientY,clicking=!0,$(this).addClass("grab")})),$(document).on("mouseup","#floor_plan_image_div",(function(e){clicking=!1,$(this).removeClass("grab")})),$(document).on("mouseleave","#floor_plan_image_div",(function(e){clicking=!1,$(this).removeClass("grab")})),$(document).on("mousemove","#floor_plan_image_div",(function(e){if(clicking){e.preventDefault();e.clientX,e.clientY;$("#floor_plan_image_div").scrollLeft($("#floor_plan_image_div").scrollLeft()+(previousX-e.clientX)),$("#floor_plan_image_div").scrollTop($("#floor_plan_image_div").scrollTop()+(previousY-e.clientY)),previousX=e.clientX,previousY=e.clientY}})),$(document).on("click",".zoom-in",(function(){if($("#second_floor_plan_image").is(":visible"))var e=$("#second_floor_plan_image");else e=$("#floor_plan_image");e.width()<4e3&&e.width(e.width()+300)})),$(document).on("click",".zoom-out",(function(){if($("#second_floor_plan_image").is(":visible"))var e=$("#second_floor_plan_image");else e=$("#floor_plan_image");e.width()>200&&e.width(e.width()-300)})),$(document).on("click",".getfloorplan",(function(){floorplanLoaded||(console.time("first"),$(".floor-plan-toimg").showLoading(),$.ajax({type:"GET",url:web_url+"ajax/get-floorplan/"+home_id,success:function(e){if(e.status&&e.link){floorplanLoaded=!0;var t=document.getElementById("floor_plan_image");if(t.src=e.link,t.style.width="94%",1==e.include_2nd_building){var o=document.getElementById("second_floor_plan_image");o.src=e.second_link,o.style.width="94%",$(".showNextFloorPlan").show(),$("#download-floor-plan").attr("data-temp",e.second_pdf_link)}}$(".floor-plan-toimg").hideLoading()},error:function(){showErrorToast("Something went wrong."),$(".floor-plan-toimg").hideLoading()}}))})),$(document).on("click",".get-broucher",(function(){brochureFun()})),$(document).on("click","#sell_contact_agent_modal #sell_contact_agent_submit",(function(){$("#sell_contact_agent_modal #sell_contact_agent-first_name-sell_contact_agent_required").text("First Name is required."),$("#sell_contact_agent_modal #sell_contact_agent-last_name-sell_contact_agent_required").text("Last Name is required."),$("#sell_contact_agent_modal #sell_contact_agent-email-sell_contact_agent_required").text("Email is required."),$("#sell_contact_agent_modal #sell_contact_agent-phone-sell_contact_agent_required").text("Phone Number is required.");var e=!0;$("#sell_contact_agent_modal .sell_contact_agent_required").each((function(t){var o=$(this).attr("name");""==$(this).val()?($("#sell_contact_agent_modal #"+o+"-sell_contact_agent_required").css("display","block"),e=!1):$("#sell_contact_agent_modal #"+o+"-sell_contact_agent_required").css("display","none")}));var t=$("#sell_contact_agent_modal #sell_contact_agent-email").val();/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(t)||""==t||($("#sell_contact_agent_modal #sell_contact_agent-email-sell_contact_agent_required").text("Email is not valid."),$("#sell_contact_agent_modal #sell_contact_agent-email-sell_contact_agent_required").css("display","block"),e=!1),e&&(sell_agent_loading_show_contact(),$.ajax({url:web_url+"ajax/contact-found-agent",type:"post",data:{first_name:$("#sell_contact_agent_modal #sell_contact_agent-first_name").val(),last_name:$("#sell_contact_agent_modal #sell_contact_agent-last_name").val(),email:$("#sell_contact_agent_modal #sell_contact_agent-email").val(),phone:$("#sell_contact_agent_modal #sell_contact_agent-phone").val(),home_id:$("#sell_contact_agent_modal #sell_contact_agent-agent_id").val()},dataType:"json",success:function(e){1==e.status?(showSuccessToast(e.message),$("#sell_contact_agent_modal #sell_contact_agent_modal").modal("hide")):showSuccessToast(e.message),sell_agent_loading_hide_contact()},error:function(){sell_agent_loading_hide_contact(),showErrorToast("Something Went Worng."),$("#sell_contact_agent_modal #sell_contact_agent_modal").modal("hide")}}))})),$(document).on("click","#property_phone_agent_modal #sell_contact_agent_submit",(function(){$("#property_phone_agent_modal #sell_contact_agent-first_name-sell_contact_agent_required").text("First Name is required."),$("#property_phone_agent_modal #sell_contact_agent-last_name-sell_contact_agent_required").text("Last Name is required."),$("#property_phone_agent_modal #sell_contact_agent-email-sell_contact_agent_required").text("Email is required."),$("#property_phone_agent_modal #sell_contact_agent-phone-sell_contact_agent_required").text("Phone Number is required.");var e=!0;$("#property_phone_agent_modal .sell_contact_agent_required").each((function(t){var o=$(this).attr("name");""==$(this).val()?($("#property_phone_agent_modal #"+o+"-sell_contact_agent_required").css("display","block"),e=!1):$("#property_phone_agent_modal #"+o+"-sell_contact_agent_required").css("display","none")}));var t=$("#property_phone_agent_modal #sell_contact_agent-email").val();(/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(t)||""==t||($("#property_phone_agent_modal #sell_contact_agent-email-sell_contact_agent_required").text("Email is not valid."),$("#property_phone_agent_modal #sell_contact_agent-email-sell_contact_agent_required").css("display","block"),e=!1),e)&&submit_phone_contact($("#property_phone_agent_modal #sell_contact_agent-first_name").val(),$("#property_phone_agent_modal #sell_contact_agent-last_name").val(),t,$("#property_phone_agent_modal #sell_contact_agent-phone").val())})),$(document).ready((function(){$("#property_phone_agent_modal #sell_contact_agent-phone, #sell_contact_agent_modal #sell_contact_agent-phone").on("propertychange input",(function(e){var t=e.target.value.replace(/\D/g,"").match(/(\d{0,3})(\d{0,3})(\d{0,4})/);e.target.value=t[2]?"("+t[1]+") "+t[2]+(t[3]?"-"+t[3]:""):t[1]}))}));
