var complete_franchisee_tour_video=!1,y_cords=99999,exitPopupShown=!1,completeTourPopupShown=!1,scrollHeight=0,showRequestInfoModal=!0;function IsEmail(e){return!!/^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(e)}function updateCounts(e,o,t,r){e=parseInt(e),o=e+parseInt(o),$("#"+r).val(o),$("."+t).countTo({from:e,to:o,speed:4e3,refreshInterval:100,onUpdate:function(e){$("."+t).html(Math.floor(e).toLocaleString())},onComplete:function(e){$("."+t).html(o.toLocaleString())}})}function beforeAfter(){$(".ba-slider").each((function(){var e=$(this),o=e.width()+"px";e.find(".resize img").css("width",o),drags(e.find(".handle"),e.find(".resize"),e)}))}function drags(e,o,t){e.on("mousedown touchstart",(function(r){e.addClass("draggable"),o.addClass("resizable");var n=r.pageX?r.pageX:r.originalEvent.touches[0].pageX,i=e.outerWidth(),a=e.offset().left+i-n,s=t.offset().left,c=t.outerWidth();minLeft=s+10,maxLeft=s+c-i-10,e.parents().on("mousemove touchmove",(function(e){var t=e.pageX?e.pageX:e.originalEvent.touches[0].pageX;leftValue=t+a-i,leftValue<minLeft?leftValue=minLeft:leftValue>maxLeft&&(leftValue=maxLeft),widthValue=100*(leftValue+i/2-s)/c+"%",$(".draggable").css("left",widthValue).on("mouseup touchend touchcancel",(function(){$(this).removeClass("draggable"),o.removeClass("resizable")})),$(".resizable").css("width",widthValue)})).on("mouseup touchend touchcancel",(function(){e.removeClass("draggable"),o.removeClass("resizable")})),r.preventDefault()})).on("mouseup touchend touchcancel",(function(t){e.removeClass("draggable"),o.removeClass("resizable")}))}function addEvent(e,o,t){e.addEventListener?e.addEventListener(o,t,!1):e.attachEvent&&e.attachEvent("on"+o,t)}function ShowLoading(){$("body").hasClass("modal-open")||$("body").css("overflow","hidden"),$(".loading-indicator-overlay,.loading-indicator").show()}function HideLoading(){$("body").hasClass("modal-open")||$("body").css("overflow","auto"),$(".loading-indicator-overlay,.loading-indicator").hide()}function dashboardopenNav(){$("body").addClass("bdmodal-open-cls"),document.getElementById("navbar_mobile").style.width="100%"}function dashboardcloseNav(){$("body").removeClass("bdmodal-open-cls"),document.getElementById("navbar_mobile").style.width="0"}setInterval((function(){var e=$("#og_services_count").val(),o=$("#og_agents_count").val(),t=$("#og_listing_count").val(),r=$("#og_buyers_count").val();0==fetchingCount&&(fetchingCount=1,$.ajax({type:"POST",url:"/ajax/office-counts-update",data:{services_completed_count:e,agents_count:o,current_listings_count:t,buyers_search_count:r,from:"top-franchise-opportunity"},success:function(n){fetchingCount=0,n.services_incremented_by>0&&updateCounts(e,n.services_incremented_by,"services_counter","og_services_count"),n.agents_incremented_by>0&&updateCounts(o,n.agents_incremented_by,"agents_count","og_agents_count"),n.listings_incremented_by>0&&updateCounts(t,n.listings_incremented_by,"current_listings_count","og_listing_count"),n.buyers_incremented_by>0&&updateCounts(r,n.buyers_incremented_by,"buyers_search_count","og_buyers_count")}}))}),5e3),setTimeout((function(e){lm_InitWebForm()}),5e3),$("#ebookemailsubmit").on("click",(function(e){e.preventDefault();var o=$("#ebook_email").val();return""==o?($("#ebook_email_error").text("Please enter email"),!1):0==IsEmail(o)?($("#ebook_email_error").text("Please enter valid email"),!1):(ShowLoading(),void $.ajax({url:store_ebookform_req,type:"POST",data:{ebook_email:o},success:function(e){if(1==e.status){$.alert(e.message);var o=web_url+"/flipbook/web/viewer.html";window.open(o,"_blank")}else $.alert("Something went wrong.");$("#flipbook").modal("hide"),HideLoading()},error:function(){HideLoading(),$.alert("Something went wrong.")}}))})),$("#flipbook").on("hide.bs.modal",(function(){$("#ebook_email").val(""),$("#ebook_email_error").text("")})),function(e){e.fn.countTo=function(o){o=e.extend({},e.fn.countTo.defaults,o||{});var t=Math.ceil(o.speed/o.refreshInterval),r=(o.to-o.from)/t;return e(this).each((function(){var n=this,i=0,a=o.from,s=setInterval((function(){a+=r,i++,e(n).html(a.toFixed(o.decimals)),"function"==typeof o.onUpdate&&o.onUpdate.call(n,a);i>=t&&(clearInterval(s),a=o.to,"function"==typeof o.onComplete&&o.onComplete.call(n,a))}),o.refreshInterval)}))},e.fn.countTo.defaults={from:0,to:100,speed:1e3,refreshInterval:100,decimals:0,onUpdate:null,onComplete:null}}(jQuery),$(window).scroll((function(){scrollHeight=$(window).scrollTop()})),$(document).ready((function(){function e(e,o,t,r,n,i,a,s){ShowLoading(),$.ajax({url:store_franchise_req,type:"POST",data:{fname:e,lname:o,email:t,number:r,state:n,county:i,soonto:a,cashavail:s},success:function(e){1==e.status?($.alert(e.message),setTimeout((function(){lm_SubmitWebForm()}),2e3),$("#request_info_form,#request_info_form1,#request_info_form2").validate().resetForm(),$("#request_info_form input[type=text],#request_info_form input[type=email],#request_info_form1 input[type=text],#request_info_form1 input[type=email],#request_info_form2 input[type=text],#request_info_form2 input[type=email]").val(""),$("#request_info_form select,#request_info_form1 select,#request_info_form2 select").val("").trigger("change"),$("#request_info").modal("hide")):$.alert("Something went wrong."),HideLoading()},error:function(){HideLoading(),$.alert("Something went wrong.")}})}function o(e){ShowLoading(),$.ajax({url:check_earning_pass,type:"post",data:{password:e},success:function(e){1==e.status?($("#earnings").html(e.data),showRequestInfoModal=!1):($.alert(e.data),$("#earnings_password").val("")),HideLoading()},error:function(){HideLoading(),$.alert("Something Went Wrong.")}})}$("#franchise_state,#franchise_county,#how_soonto_open,#cash_available").select2({dropdownParent:$("#request_info")}),$("#franchise_state1,#franchise_county1,#how_soonto_open1,#cash_available1").select2(),$("#franchise_state2,#franchise_county2,#how_soonto_open2,#cash_available2").select2(),$(".select2").css("width","100%"),$("body,.request_info.show").mousemove((function(e){e.pageX,$(this).offset().left;var o=e.pageY-$(this).offset().top,t=$("header").height();$("section:visible").height();y_cords=0==scrollHeight?o:scrollHeight<=o?o-scrollHeight:o})),$(".counter").counterUp({delay:50,time:2e3}),$("section#home video").on("timeupdate",(function(e){1==play_count&&1==is_first_time&&!0===show_text&&parseInt(e.target.currentTime)>6&&($(".video_help").show("slow"),show_text=!1,is_first_time=0),parseInt(e.target.duration)==parseInt(e.target.currentTime)&&!0===show_text&&play_count++})),$("section#home video").on("ended",(function(e){play_count++})),$("#request_info_form").validate({rules:{first_name_franchise:{required:!0},last_name_franchise:{required:!0},email_franchise:{required:!0,email:!0},number_franchise:{required:!0},franchise_state:{required:!0},franchise_county:{required:!0},how_soonto_open:{required:!0},cash_available:{required:!0}},messages:{first_name_franchise:{required:"First name is required"},last_name_franchise:{required:"Last name is required"},email_franchise:{required:"Email is required",email:"Please enter valid email"},number_franchise:{required:"Phone is required"},franchise_state:{required:"Franchise state is required"},franchise_county:{required:"Franchise county is required"},how_soonto_open:{required:"How soon to open is required"},cash_available:{required:"Cash available is required"}},submitHandler:function(o){var t=$("#request_info_form #first_name_franchise").val(),r=$("#request_info_form #last_name_franchise").val(),n=$("#request_info_form #email_franchise").val(),i=$("#request_info_form #number_franchise").val(),a=$("#request_info_form #franchise_state option:selected").text(),s=$("#request_info_form #franchise_county option:selected").text(),c=$("#request_info_form #how_soonto_open").val(),u=$("#request_info_form #cash_available").val();$("#crm_fname").val(t),$("#crm_lname").val(r),$("#crm_email").val(n),$("#crm_franchise_state").val(a),$("#crm_price_phone_number").val(i),$("#crm_franchise_county_req").val(s),$("#crm_how_soonto_open").val(c),$("#crm_cash_available").val(u),e(t,r,n,i,a,s,c,u)}}),$("#request_info_form1").validate({rules:{first_name_franchise:{required:!0},last_name_franchise:{required:!0},email_franchise:{required:!0,email:!0},number_franchise:{required:!0},franchise_state:{required:!0},franchise_county:{required:!0},how_soonto_open:{required:!0},cash_available:{required:!0}},messages:{first_name_franchise:{required:"First name is required"},last_name_franchise:{required:"Last name is required"},email_franchise:{required:"Email is required",email:"Please enter valid email"},number_franchise:{required:"Phone is required"},franchise_state:{required:"Franchise state is required"},franchise_county:{required:"Franchise county is required"},how_soonto_open:{required:"How soon to open is required"},cash_available:{required:"Cash available is required"}},submitHandler:function(o){var t=$("#request_info_form1 #first_name_franchise1").val(),r=$("#request_info_form1 #last_name_franchise1").val(),n=$("#request_info_form1 #email_franchise1").val(),i=$("#request_info_form1 #number_franchise1").val(),a=$("#request_info_form1 #franchise_state1 option:selected").text(),s=$("#request_info_form1 #franchise_county1 option:selected").text(),c=$("#request_info_form1 #how_soonto_open1").val(),u=$("#request_info_form1 #cash_available1").val();$("#crm_fname").val(t),$("#crm_lname").val(r),$("#crm_email").val(n),$("#crm_franchise_state").val(a),$("#crm_price_phone_number").val(i),$("#crm_franchise_county_req").val(s),$("#crm_how_soonto_open").val(c),$("#crm_cash_available").val(u),e(t,r,n,i,a,s,c,u)}}),$("#request_info_form2").validate({rules:{first_name_franchise:{required:!0},last_name_franchise:{required:!0},email_franchise:{required:!0,email:!0},number_franchise:{required:!0},franchise_state:{required:!0},franchise_county:{required:!0},how_soonto_open:{required:!0},cash_available:{required:!0}},messages:{first_name_franchise:{required:"First name is required"},last_name_franchise:{required:"Last name is required"},email_franchise:{required:"Email is required",email:"Please enter valid email"},number_franchise:{required:"Phone is required"},franchise_state:{required:"Franchise state is required"},franchise_county:{required:"Franchise county is required"},how_soonto_open:{required:"How soon to open is required"},cash_available:{required:"Cash available is required"}},submitHandler:function(o){var t=$("#request_info_form2 #first_name_franchise2").val(),r=$("#request_info_form2 #last_name_franchise2").val(),n=$("#request_info_form2 #email_franchise2").val(),i=$("#request_info_form2 #number_franchise2").val(),a=$("#request_info_form2 #franchise_state2 option:selected").text(),s=$("#request_info_form2 #franchise_county2 option:selected").text(),c=$("#request_info_form2 #how_soonto_open2").val(),u=$("#request_info_form2 #cash_available2").val();$("#crm_fname").val(t),$("#crm_lname").val(r),$("#crm_email").val(n),$("#crm_franchise_state").val(a),$("#crm_price_phone_number").val(i),$("#crm_franchise_county_req").val(s),$("#crm_how_soonto_open").val(c),$("#crm_cash_available").val(u),e(t,r,n,i,a,s,c,u)}}),$(document).on("click",".close_req_info_form",(function(){$("#request_info_form").validate().resetForm(),$("#request_info_form input[type=text],#request_info_form input[type=email]").val(""),$("#request_info_form select").val(""),$("#franchise_state").val("").trigger("change")})),$(document).on("click",".go_to_next",(function(){is_first_time=0;var e=$(this).parents("section");e.hide();var o=e.next();o.show("slow",(function(){"our-awards"==o?($("#our-awards video").trigger("load"),$("#our-awards video").trigger("play")):"complete_franchisee_tour"==o&&(complete_franchisee_tour_video=!1,$("#complete_franchisee_tour video").trigger("load"),$("#complete_franchisee_tour video").trigger("play")),"our-awards"==e?$("#our-awards video").trigger("pause"):"complete_franchisee_tour"==e&&$("#complete_franchisee_tour video").trigger("pause")}))})),$(".hl-menu-item,.earnings-investment").on("click",(function(){$("section#home,section#our-services,section#franchise-benefits,section#emerging-industry,section#investment,section#earnings,section#training-support,section#our-awards,section#franchisees-testimonials,section#our-story,section#agents-need-us,section#ideal-candidate,section#steps-to-ownership,section#faqs,section#complete_franchisee_tour").hide(),$("#our-awards video").trigger("load"),$("#our-awards video").trigger("pause"),$("#complete_franchisee_tour video").trigger("load"),$("#complete_franchisee_tour video").trigger("pause");var e=$(this).attr("data-menu"),o=$("body").find("section#"+e),t=new URL($("a.navbar-br").attr("href"));t=t+"/"+e,window.history.pushState({},"",t),o.show("slow",(function(){"our-awards"==e?($("#our-awards video").trigger("load"),$("#our-awards video").trigger("play")):"complete_franchisee_tour"==e&&(complete_franchisee_tour_video=!1,$("#complete_franchisee_tour video").trigger("load"),$("#complete_franchisee_tour video").trigger("play")),"home"==e&&($("section#home video").trigger("load"),$("section#home video").trigger("play"))})),$("#navbar_mobile").css("width","0px")})),$('.hl-menu-item[data-menu="earnings"]').on("click",(function(){showRequestInfoModal&&setTimeout((function(){$("#request_info").modal("show")}),2e3)})),$(".finish_tour").on("click",(function(){$(this).parents("section").hide(),$("#complete_franchisee_tour").show("slow",(function(){complete_franchisee_tour_video=!1,$("#complete_franchisee_tour video").trigger("load"),$("#complete_franchisee_tour video").trigger("play")}))})),$("#threedtourmodal,#aerialvideomodal,#introvideomodal,#arhomemodal,#arcardmodal,#agent_testimonial_videos,#firstvideomodal,#secondvideomodal,#thirdvideomodal,#storybehindhommatimodal").on("hidden.bs.modal",(function(){var e=$(this).find("iframe").attr("src");$(this).find("iframe").attr("src",""),$(this).find("iframe").attr("src",e)})),$("#earnings_password").on("blur",(function(){$(this).val()&&o($(this).val())})),$("#earnings_password").keypress((function(e){13==e.which&&$(this).val()&&o($(this).val())}))})),$(document).on("show.bs.modal",".trigger_before_after",(function(){setTimeout((function(){beforeAfter()}),200)})),$(document).on("slide.bs.carousel",".trigger_before_after",(function(){setTimeout((function(){beforeAfter()}),500)})),$(document).ready((function(){$("#complete_franchisee_tour video").on("ended",(function(){complete_franchisee_tour_video=!0,$("#eq_test_modal").is(":visible")||$("input,select").is(":focus")||$("#request_info").fadeIn(500,(function(){$(this).modal("show")}))})),beforeAfter()})),$("#request_info_form2 #franchise_state2,#request_info_form1 #franchise_state1,#request_info_form #franchise_state").on("change",(function(){var e=$(this).val();""!=e?$.ajax({url:"/ajax/county-find",type:"post",data:{state_id:e},dataType:"json",beforeSend:function(){ShowLoading()},success:function(e){HideLoading(),$("#request_info_form2 #franchise_county2,#request_info_form1 #franchise_county1,#request_info_form #franchise_county").html(e.county_options)},error:function(){HideLoading()}}):$("#request_info_form2 #franchise_county2,#request_info_form1 #franchise_county1,#request_info_form #franchise_county").html('<option value="">DESIRED COUNTY</option>')})),$(window).resize((function(){$(".ba-slider").each((function(){var e=$(this),o=e.width()+"px";e.find(".resize img").css("width",o)}))})),$((function(){document.getElementById("number_franchise").addEventListener("input",(function(e){var o=e.target.value.replace(/\D/g,"").match(/(\d{0,3})(\d{0,3})(\d{0,4})/);e.target.value=o[2]?"("+o[1]+") "+o[2]+(o[3]?"-"+o[3]:""):o[1]}))})),$((function(){document.getElementById("number_franchise1").addEventListener("input",(function(e){var o=e.target.value.replace(/\D/g,"").match(/(\d{0,3})(\d{0,3})(\d{0,4})/);e.target.value=o[2]?"("+o[1]+") "+o[2]+(o[3]?"-"+o[3]:""):o[1]}))})),$((function(){document.getElementById("number_franchise2").addEventListener("input",(function(e){var o=e.target.value.replace(/\D/g,"").match(/(\d{0,3})(\d{0,3})(\d{0,4})/);e.target.value=o[2]?"("+o[1]+") "+o[2]+(o[3]?"-"+o[3]:""):o[1]}))})),addEvent(document,"mouseout",(function(e){null==e.toElement&&null==e.relatedTarget&&($("section#home").is(":visible")&&!1===exitPopupShown&&y_cords<100&&(exitPopupShown=!0,$("#flipbook").fadeIn(500,(function(){$(this).modal("show")}))),$("section#complete_franchisee_tour").is(":visible")&&!1===completeTourPopupShown&&y_cords<100&&(completeTourPopupShown=!0,$("#request_info").is(":visible")&&$("#request_info").modal("hide"),$("#eq_test_modal").fadeIn(500,(function(){$(this).modal("show")}))))})),$(document).on("scroll",(function(){$(document).scrollTop()>150?$(".navbar-sticky").addClass("fixed-top"):$(".navbar-sticky").removeClass("fixed-top")})),$(document).ready((function(){$("ul li a").click((function(){$("li a").removeClass("active"),$(this).addClass("active")}))})),$(document).ready((function(){$("ul .menu_home").click((function(){$(".menu_home").removeClass("active"),$(this).addClass("active")}))}));
